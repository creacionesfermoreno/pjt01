
@{
    ViewBag.Title = "membresiaspagos";
    Layout = "~/Views/Shared/__LayoutAppFitPlataformaFit.cshtml";
}

<link href="@Url.Content("~/Content/cssKendo/kendo.common.min.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/cssKendo/kendo.dataviz.default.min.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/cssKendo/kendo.dataviz.min.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/cssKendo/kendo.default.min.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/printjs/print.min.css")" rel="stylesheet" />

<style>

    .k-block, .k-button, .k-textbox, .k-drag-clue, .k-touch-scrollbar, .k-window, .k-window-titleless .k-window-content, .k-window-action, .k-inline-block, .k-grid .k-filter-options, .k-grouping-header .k-group-indicator, .k-autocomplete, .k-multiselect, .k-combobox, .k-dropdown, .k-dropdown-wrap, .k-datepicker, .k-timepicker, .k-colorpicker, .k-datetimepicker, .k-notification, .k-numerictextbox, .k-picker-wrap, .k-numeric-wrap, .k-colorpicker, .k-list-container, .k-calendar-container, .k-calendar td, .k-calendar .k-link, .k-treeview .k-in, .k-editor-inline, .k-tooltip, .k-tile, .k-slider-track, .k-slider-selection, .k-upload {
        border-radius: 3px;
    }

    .modal-body {
    }

    .modal-backdrop {
        display: none;
    }

    .card-body {
        margin-top: -5px;
        margin-bottom: -5px;
    }

    .k-dropdown .k-input, .k-selectbox .k-input {
        /* background: none; */
        background-color: #fff;
        font-weight: bold;
    }

    .k-dropdown-wrap .k-input, .k-picker-wrap .k-input, .k-numeric-wrap .k-input {
        border-radius: 3px 0 0 3px;
        font-weight: bold;
    }

    .k-autocomplete {
        background-image: url(textures/highlight.png);
        background-image: none,linear-gradient(to bottom,#e2e1e199 0,#e2e1e199 100%);
        background-position: 50% 50%;
        background-color: #e3e3e3;
        border: 1px solid #cac9c9;
        color: #fff;
    }

    .k-header, .k-grid-header, .k-toolbar, .k-dropdown-wrap, .k-picker-wrap, .k-numeric-wrap, .k-grouping-header, .k-pager-wrap, .k-textbox, .k-button, .k-progressbar, .k-draghandle, .k-state-highlight, .k-tabstrip-items .k-item, .k-panelbar .k-tabstrip-items .k-item, .km-pane-wrapper > .km-pane > .km-view > .km-content {
        background-image: url(textures/highlight.png);
        background-image: none,-webkit-linear-gradient(top,#0075ff 0,#0075ff 100%);
        background-image: none,-moz-linear-gradient(top,#0075ff 0,#0075ff 100%);
        background-image: none,-o-linear-gradient(top,#0075ff 0,#0075ff 100%);
        background-image: none,linear-gradient(to bottom,#0075ff 0,#0075ff 100%);
        background-position: 50% 50%;
        background-color: #e3e3e3;
        color: #fff;
    }

        .k-header, .k-grid-header-wrap, .k-grid .k-grouping-header, .k-grid-header, .k-pager-wrap, .k-pager-wrap .k-textbox, .k-pager-wrap .k-link, .k-grouping-header .k-group-indicator, .k-gantt-toolbar .k-state-default {
            border-color: #e8eaee;
            background-color: #0075ff;
            color: #fff;
        }

    .modal {
        display: none;
        background-color: rgba(0, 0, 0, 0.77);
    }

    .k-block, .k-header, .k-grid-header, .k-toolbar, .k-grouping-header, .k-pager-wrap, .k-button, .k-draghandle, .k-treemap-tile, html .km-pane-wrapper .k-header {
        background-color: #0075ff;
        color: #fff;
    }

        .k-grid-header th.k-header > .k-link {
            display: block;
            min-height: 18px;
            line-height: 18px;
            margin: -0.5em -0.6em -0.4em -0.6em;
            padding: .1em .1em .1em .1em;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #fff;
        }

        .k-grid-header table, .k-grid-content table, .k-grid-footer table, .k-grid-content-locked > table {
            table-layout: fixed;
        }



        .k-grid-toolbar:first-child, .k-grouping-header + .k-grid-toolbar {
            border-width: 0 0 1px;
            border-radius: 0px;
            background-color: #d7eafa;
            height: 10px;
        }

    .k-block, .k-header, .k-grid-header, .k-toolbar, .k-grouping-header, .k-pager-wrap, .k-button, .k-draghandle, .k-treemap-tile, html .km-pane-wrapper .k-header {
        background-color: rgba(227, 227, 227, 0);
    }

    #txtFechaInicioProcFreezing .k-header, .k-grid-header, .k-toolbar, .k-dropdown-wrap, .k-picker-wrap, .k-numeric-wrap, .k-grouping-header, .k-pager-wrap, .k-textbox, .k-button, .k-progressbar, .k-draghandle, .k-autocomplete, .k-state-highlight, .k-tabstrip-items .k-item, .k-panelbar .k-tabstrip-items .k-item, .km-pane-wrapper > .km-pane > .km-view > .km-content {
        background-image: url(textures/highlight.png);
        background-image: none,-webkit-linear-gradient(top,#0075ff 0,#0075ff 100%);
        background-image: none,-moz-linear-gradient(top,#0075ff 0,#0075ff 100%);
        background-image: none,-o-linear-gradient(top,#0075ff 0,#0075ff 100%);
        background-image: none,linear-gradient(to bottom,#0075ff 0,#0075ff 100%);
        background-position: 50% 50%;
        background-color: #ffffff;
    }

    .k-state-selected {
        color: #FFFFFF;
        background-color: #0075ff;
        border-color: #0075ff;
    }


    .k-grid tr td {
        border-bottom: 1px solid #eaeaea;
        border-left: 1px solid #eaeaea;
        border-style: solid;
    }

    tr {
        height: 16px;
        font-size: 13px;
    }

    .k-textbox, .k-autocomplete, .k-dropdown-wrap, .k-picker-wrap, .k-numeric-wrap {
        border-width: 1px;
        border-style: solid;
        padding: 0 1.9em 0 0;
        font-weight: bold;
    }

    .k-state-focused.k-state-selected, .k-list > .k-state-focused.k-state-selected, .k-listview > .k-state-focused.k-state-selected, td.k-state-focused.k-state-selected {
        webkit-box-shadow: inset 0 0 3px 4px #0075ff;
        box-shadow: inset 0 0 3px 4px #0075ff;
    }

    .k-state-selected, .k-state-selected:link, .k-state-selected:visited, .k-list > .k-state-selected, .k-list > .k-state-highlight, .k-panel > .k-state-selected, .k-ghost-splitbar-vertical, .k-ghost-splitbar-horizontal, .k-draghandle.k-state-selected:hover, .k-scheduler .k-scheduler-toolbar .k-state-selected, .k-scheduler .k-today.k-state-selected, .k-marquee-color {
        color: #fff;
        background-color: #0075ff;
        border-color: #0075ff;
    }
    /** SPINNER CREATION **/
    .loader {
        position: relative;
        text-align: center;
        margin: 15px auto 35px auto;
        z-index: 9999;
        display: block;
        width: 80px;
        height: 80px;
        border: 10px solid rgba(0, 0, 0, .3);
        border-radius: 50%;
        border-top-color: #000;
        animation: spin 1s ease-in-out infinite;
        -webkit-animation: spin 1s ease-in-out infinite;
    }


    /** MODAL STYLING **/
    .modal-content {
        border-radius: 0px;
        box-shadow: 0 0 20px 8px rgba(0, 0, 0, 0.7);
    }


    [dir=ltr] .modal-lg, [dir=ltr] .modal-xl {
        max-width: 950px;
    }

    a {
        color: transparent;
        text-decoration: none;
    }

    .b-boton-selected {
        background-color: #f70f0f;
        border: 2px #f70f0f solid;
        color: #fff;
        border-radius: 3px;
        font-weight: bold;
        cursor: pointer;
        text-align: center;
    }

    .b-boton-normal {
        background-color: #0075ff;
        color: #fff;
        border-radius: 3px;
        border: 2px #0075ff solid;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
    }
</style>

<input id="txtActivarGenerarContratoMembresias" type="hidden" />
<input id="txtKeyTipoContrato" type="hidden" />
<input id="txtNombreMemTC" type="hidden" />
<input id="namepdftcm" type="hidden" />
<input id="codigoTipoContratoM" type="hidden" />

<input id="FlagPermiso_EliminarCliente" type="hidden" value="0" />
<input id="FlagPermiso_ActualizarCliente" type="hidden" value="0" />
<input id="FlagPermiso_EliminarMembresia" type="hidden" value="0" />
<input id="FlagPermiso_AgregarMembresia" type="hidden" value="0" />
<input id="FlagPermiso_ActualizarMembresia" type="hidden" value="0" />

<input id="hdCodigoUnidadNegocio" type="hidden" value="1" />
<input id="hdCodigoSede" type="hidden" value="0" />
<input id="hdCodigoPais" type="hidden" value="0" />
<input id="hdCodigoPerfil" type="hidden" value="0" />
<input id="hdUsuario" type="hidden" value="0" />
<input id="hdCarpetaSocios" type="hidden" value="" />
<input id="hdClickIngresoLogeo" type="hidden" value="0" />
<input id="hdCodigoUsuario" type="hidden" value="0" />
<input id="hdAccionPE" type="hidden" value="" />
<input id="hdCodigo" type="hidden" value="" />
<input id="hdCodEgreso" type="hidden" value="" />
<input id="hdIPCliente" type="hidden" value="" />
<input id="hdHostCliente" type="hidden" value="" />
<input id="hdLatitude" type="hidden" value="" />
<input id="hdLongitude" type="hidden" value="" />
<input id="hdEstadoMensajeAdFitness" type="hidden" value="1" />

<input type="hidden" id="hdFlagPrimeraVesAbreVentanaContrato" value="0" />
<input id="hdFlagVentanaSocios" type="hidden" value="0" />
<input id="FlagModulos" type="hidden" value="1" />
<input type="hidden" id="hdFlagPrimeraVezClickLiTranseferencia" value="0" />
<input id="hdAccionCrearPaquetes" type="hidden" value="" />
<input type="hidden" id="hdFlagPrimeraVesClickLIpaquetes" value="0" />
<input type="hidden" id="hdFlagPrimeraVezClickLiAnularVenta" value="0" />
<input type="hidden" id="hdFlagPrimeraVesTipoDocumentoPagoSuplementos" value="0" />
<input type="hidden" id="hdFlagPrimeraVesTipoDocumentoPagoRopas" value="0" />
<input type="hidden" id="hdFlagPrimeraVesVentaCafeteria" value="0" />
<input type="hidden" value="0" id="hdCodigoCategoriaProducto" />
<input type="hidden" id="hdFlagPrimeraVesInventario" value="0" />
<input type="hidden" id="hdFlagPrimeraVesUsuario" value="0" />
<input type="hidden" value="" id="hdCodigoPerfilModalUsuario" />
<input type="hidden" id="hdFlagPrimeraVesGastos" value="0" />
<input id="hdTipoFechaFinContrato" type="hidden" value="" />
<input id="hdFrezenDisponibles" type="hidden" />
<input id="hdTotalCuota" type="hidden" value="0" />
<input id="hdAccionTraspaso" type="hidden" />
<input type="hidden" id="hdCodPaquete" value="" />
<input id="hdCodHorarioPaquete" type="hidden" value="" />
<input id="hdCodHoraCurso" type="hidden" value="" />
<input id="flagImprimirVentasAnuladas" type="hidden" value="1" />
<input type="hidden" value="" id="hdCodigoSalida" />
<input type="hidden" value=" " id="hdCodigoSalidaAnularSuplementos" />
<input type="hidden" value=" " id="hdCodigoPagoAnularSuplementos" />
<input type="hidden" value="" id="hdCodigoPagoAnularRopas" />
<input type="hidden" value="" id="hdCodigoSalidaAnularRopas" />
<input type="hidden" value="0" id="hdDeudasSuplementos" />
<input type="hidden" value="0" id="hdCodigoSalidaPagoSuplementos" />
<input type="hidden" value="0" id="hdCodigoSalidaPagoRopas" />
<input id="hdflagSuplemento" type="hidden" value="0" />
<input id="hdflagRopas" type="hidden" value="0" />
<input type="hidden" value="0" id="hdCodigoCategoriaSuplemento" />
<input id="hdCodigoCDetalle" type="hidden" />

<input id="hdCodigoCodigoMenbresiaPago" type="hidden" value="0" />
<input id="hdCodigoDescripcionMenbresiaPago" type="hidden" value="" />
<input id="hdAsesorComercialPago" type="hidden" value="" />
<input id="hdCodigoTipoIngresoPago" type="hidden" value="0" />
<input id="hdTipoProducto" type="hidden" value="0" />
<input id="hdMontoTal" type="hidden" value="0" />
<input id="hdAccionProducto" type="hidden" value="" />
<input id="hdAccionServicios" type="hidden" value="" />
<input id="hdAccionSuplementos" type="hidden" value="" />
<input id="hdAccionRopa" type="hidden" value="" />
<input type="hidden" id="hdFlagPrimeraVesHacerCompras" value="0" />
<input type="hidden" id="hdFlagPrimeraVesAbreVentanaEliminarProductos" value="0" />
<input type="hidden" id="hdFlagPrimeraVesHacerComprasSuplementos" value="0" />
<input type="hidden" id="hdFlagPrimeraVesAbreVentanaEliminarSuplementos" value="0" />
<input type="hidden" id="hdFlagPrimeraVesAbreVentanaEliminarRopas" value="0" />
<input id="hdCodigoCompraSuplemento" type="hidden" value="" />
<input id="hdCodigoCompraRopa" type="hidden" value="" />
<input id="hdAccionUsuario" type="hidden" value="" />
<input id="hdAccionTipoResponsable" type="hidden" value="N" />


<input id="hdAccionContrato" type="hidden" value="N" />
<input id="hdCodPaqueteTraspaso" type="hidden" value="" />
<input id="hdCodigoMembresiaTraspasoOrigen" type="hidden" />
<input id="hdCodMembresiaCuotas" type="hidden" />
<input type="hidden" id="hdFlagPrimeraVesEstadoSocio" value="0" />
<input type="hidden" value="0" id="hdFlagPrimeraVezClickAbrirCaja" />
<input id="hdEstadoEgresosCaja" type="hidden" value="0" />
<input id="hdFlagCambiarEstado" type="hidden" value="0" />
<input id="hdCodigoUsuarioConfiguracionNuevoMes" type="hidden" value="0" />
<input id="hdMontoTotalGrillaContrato" type="hidden" value="0" />

<input type="hidden" id="hdFlagPrimeraVezClickEnviarNuevoAInvitado" value="0" />
<input type="hidden" id="hdFlagPrimeraVezClickEnviarReferidoAInvitado" value="0" />
<input type="hidden" id="hdFlagPrimeraVezClickEnviarLlamadaAInvitado" value="0" />
<input type="hidden" id="hdFlagPrimeraVezClickVerMasStockProducto" value="0" />

<input type="hidden" id="hdFlagPrimeraVezClickIngresoDeAgenda" value="0" />
<input id="hdAccionTablaProspectos" type="hidden" />
<input id="hdCodigoOrigen" type="hidden" />
<input id="hdCodigoSocioRenoReins" type="hidden" />
<input id="hdVendedorGrillaRenovReins" type="hidden" value="" />
<input id="hdEstadoCita" type="hidden" value="" />
<input id="hdCodigoTipoAgenda" type="hidden" />
<input id="hdCodigoSocio" type="hidden" />
<input id="hdHoraAgenda" type="hidden" value="" />
<input id="hdCodigoPago" type="hidden" value="" />
<input id="hdCodigoMenbresiaVerPago" type="hidden" value="" />
<input id="hdCodigoInteres" type="hidden" value="" />
<input type="hidden" id="hdFlagPrimeraVezClickAgregarInteres" value="0" />
<input type="hidden" value="0" id="hdCodigoCategoriaProductoCompra" />
<input type="hidden" value="0" id="hdCodigoCategoriaSuplementoCompra" />
<input type="hidden" value="0" id="hdCodigoCuota" />
<input type="hidden" value="0" id="flagRenovacionesInscritos" />
<input type="hidden" id="hdFlagPrimeraVezClickRenovacionesInscritos" value="0" />

<input id="hdRadioMigracion" type="hidden" />
<input id="hdCodTipoAgendaClientesCaidos" type="hidden" />
<input id="hdCodigoSocioCaidos" type="hidden" />
<input type="hidden" id="hdFlagPrimeraVezClickCitasPendientes" value="0" />

<input id="hdTieneFacturacionElectronica" type="checkbox" style="display:none;" />

<div class="page__header page__header-nav mb-0">
    <div class="container-fluid page__container">
        <div class="navbar navbar-secondary navbar-light navbar-expand-sm p-0 d-none d-md-flex" id="secondaryNavbar">
            <ul class="nav navbar-nav">
                <li class="nav-item">
                    <button style="color: #ffffff;background-color: #ff0200;font-size: 1.0rem;border: 0px #ff0200 solid;height: 33px;padding: 5px;cursor:pointer;" class="navbar-toggler navbar-toggler-custom d-flex mr-navbar" type="button" data-toggle="sidebar">
                        Operaciones
                    </button>
                </li>
                <li class="nav-item" data-controlmodulo="45833cdd-55db-4a67-a879-f1ae9353f8bf">
                    <a href="@Url.Action("checking","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})" class="nav-link">Clientes</a>
                </li>
                <li class="nav-item" data-controlmodulo="9e69cfd8-b063-44df-a7f2-a3a10d1eb899" style="display:none;">
                    <a class="nav-link " href="@Url.Action("posfitness","pos",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Punto de venta</a>
                </li>
                <li class="nav-item" data-controlmodulo="7611dfbe-186f-4abe-8e2e-e64ad7281728" style="display:none;">
                    <a class="nav-link" href="@Url.Action("caja","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Caja</a>
                </li>
                <li class="nav-item" data-controlmodulo="93c0d848-83aa-45eb-a83a-ded00a6b6e23" style="display:none;">
                    <a class="nav-link" href="@Url.Action("nutricion","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Medidas y Nutrición</a>
                </li>
                <li class="nav-item" data-controlmodulo="947dc11f-3e14-4fe7-bedc-ae3d81219bee" style="display:none;">
                    <a class="nav-link" href="@Url.Action("Index","inventariofit",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Inventario</a>
                </li>

                <li class="nav-item" data-controlmodulo="39497bd3-94ab-4236-a1d4-4623d854f91e" style="display:none;">
                    <a href="@Url.Action("agendacomercial","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})" class="nav-link">Agenda Comercial</a>
                </li>
                <li class="nav-item" data-controlmodulo="bbc035e6-68ea-4885-917f-005ad3fcfb66" style="display:none;">
                    <a href="@Url.Action("metascomerciales","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})" class="nav-link">Metas</a>
                </li>
                <li class="nav-item" data-controlmodulo="bd61dc23-54d9-4901-9c35-b8d228b3a924" style="display:none;">
                    <a href="@Url.Action("marketing","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})" class="nav-link">Marketing</a>
                </li>
                <li class="nav-item" data-controlmodulo="e1eadd0d-39b3-498d-b09b-9b3b28610b9b" style="display:none;">
                    <a href="@Url.Action("informesfit","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})" class="nav-link">Informes</a>
                </li>
                <li class="nav-item" data-controlmodulo="600dabf4-7dc3-4dc0-a0ba-74b782955e52" style="display:none;">
                    <a class="nav-link" href="@Url.Action("pagospersonal","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Pagos</a>
                </li>
                <li class="nav-item" data-controlmodulo="b1f65597-fd27-46ca-90d0-a0f2f1039ef7" style="display:none;">
                    <a class="nav-link" href="@Url.Action("finanzas","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Finanzas</a>
                </li>
                <li class="nav-item" data-controlmodulo="4c01e8de-9440-4927-a2f2-d6241d925c39" style="display:none;">
                    <a class="nav-link" href="@Url.Action("estadisticas","gestionce",new {id= HttpContext.Current.Request.Cookies["_SubDominio_Business"].Value})">Estadísticas</a>
                </li>

            </ul>
        </div>
    </div>
</div>

<div class="container-fluid page__container" style="background-color:#e9ebee;">
    <br />
    <div class="row">
        <div class="col-lg-5">
            <div class="card">
                <div class="card-header card-header-sm d-flex align-items-center" style="background-color:#fff">
                    <h4 class="card-header__title flex m-0">PASO 1 : BUSQUE O AGREGUE UN CLIENTE</h4>
                </div>
                <div class="card-body tab-content">
                    <div class="button-list">

                        <button data-controlmodulo="b2af03cc-2778-48eb-9647-16dadf51c33e" style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnNuevoClienteContrato" title="Nuevo Cliente"><i class="fa-solid fa-plus"></i>&nbsp;Nuevo Cliente</button>

                        <button data-controlmodulo="fb78492d-dd67-463c-9b68-89fb78d32978" style="display:none;" type="button" class="btn btn-primary btn-sm" disabled id="btnEliminarClienteContrato" title="Eliminar Cliente"><i class="fa-solid fa-trash"></i>&nbsp;Eliminar Cliente</button>

                        <button data-controlmodulo="b2af03cc-2778-48eb-9647-16dadf51c33e" style="display:none;" type="button" class="btn btn-primary btn-sm" disabled id="btnGuardar" title="Guardar Cliente"><i class="fa-solid fa-floppy-disk"></i>&nbsp;Guardar Cliente</button>

                        <button data-controlmodulo="b59ce50d-1750-4afd-bb99-82f4b52141fd" style="display:none;" type="button" class="btn btn-primary btn-sm" disabled id="btnActualizarClientesContrato" title="Actualizar Cliente"><i class="fa-solid fa-pen-to-square"></i>&nbsp;Actualizar Cliente</button>

                    </div>
                    <div class="tab-pane active show fade" id="activity_all">
                        <div style="border-bottom:1px #dcdcdc solid;border-top:1px #dcdcdc solid;width:100%;margin-bottom:5px;padding:5px">
                            <table width="100%" border="0">
                                <tr>
                                    <td style="width:5%;">
                                        <h style="font-size: 11px;color:#0075ff;">Codigo:</h>
                                    </td>
                                    <td style="width:12%;">
                                        <input id="txtBuscarPorCodigoClienteContrato" tabindex="1" onfocus="EstaFocus_CodigoSocioContrato();" onblur="SalidaFocus_CodigoSocioContrato();" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" placeHolder="Buscar codigo" />
                                    </td>
                                    <td style="width:5%;">
                                        <h style="font-size: 11px;color:#0075ff;">Nombres:</h>
                                    </td>
                                    <td style="width:25%;">
                                        <input id="txtBuscarPorNombreClienteContrato" tabindex="2" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" placeHolder="por nombre" onkeypress="return validarCamposCadena(event)" />
                                    </td>
                                    <td style="width:5%;">
                                        <h style="font-size: 11px;color:#0075ff;">Apellidos:</h>
                                    </td>
                                    <td style="width:23%;">
                                        <input id="txtBuscarPorApellidoClienteContrato" tabindex="3" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" placeHolder="por apellido" onkeypress="return validarCamposCadena(event)" />
                                    </td>
                                    <td style="width:4%;">
                                        <h style="font-size: 11px;color:#0075ff;">Dni:</h>
                                    </td>
                                    <td style="width:12%;">
                                        <input id="txtBuscarPorDniClienteContrato" tabindex="4" type="text" onfocus="EstaFocus_DNISocioContrato();" onblur="SalidaFocus_DNISocioContrato();" class="form-control form-control-sm" style="width:98%;font-size:11px;" placeHolder="por DNI" />
                                    </td>
                                    <td style="width:5%;" align="center">
                                        <button type="button" class="btn btn-sm btn-primary" onclick="BuscarSociosContrato()">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <center>
                            <div class="btn-group btn-group-sm" style="cursor:pointer;">
                                <button type="button" class="btn btn-secondary  active" id="btnInformacionCliente" style="font-size: 11px;">Información</button>
                                <button type="button" class="btn btn-secondary" id="btnUbicacionCliente" style="font-size: 11px;">Otros Datos</button>
                            </div>
                        </center>
                        <div id="trInformacionCliente">
                            <input type="hidden" value="0" id="hdCodigoOrigenMembresia" />

                            <div class="row mg-b-25">
                                <div class="col-lg-6">
                                    <div style="display:none;">
                                        <input id="txtCodigo" type="text" class="form-control form-control-sm" />
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtNombre" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Nombres" style="width:100%;font-weight:bold;" onkeypress="return validarCamposCadena(event)">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Nombres:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtApellido" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Apellidos" style="width:100%;font-weight:bold;" onkeypress="return validarCamposCadena(event)">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Apellidos:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <select id="ddlTipoDocumento" style="font-size: 13px;font-weight:bold;width:100%;height:30px;" class="k-dropdown">
                                                <option value="0">SELECCIONAR TIPO DOCUMENTO</option>
                                                <option value="1">DNI</option>
                                                <option value="2">PASAPORTE</option>
                                                <option value="3">CE/CC</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">

                                            <input id="txtDni" type="text" class="form-control form-control-prepended" placeHolder="Escriba nro documento" style="width:100%;font-weight:bold;" maxlength="15" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Nro Doc:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <select id="cboEstadoCivil" style="font-size: 13px;font-weight:bold;width:100%;height:30px;" class="k-dropdown">
                                                <option value="0">SELECCIONAR ESTADO CIVIL</option>
                                                <option value="1">SOLTERO</option>
                                                <option value="2">CASADO</option>
                                                <option value="3">VIUDO</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <select id="cboGenero" tabindex="9" style="font-size: 13px;font-weight:bold;width:100%;height:30px;" class="k-dropdown">
                                                <option value="0">SELECCIONAR GENERO</option>
                                                <option value="M">MASCULINO</option>
                                                <option value="F">FEMENINO</option>
                                            </select>

                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlDepartamento" value="0" style="font-size: 13px;font-weight:bold;width:100%;height:30px;" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlProvincia" value="" style="font-size: 13px;font-weight:bold;width:100%;height:30px;" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlDistrito" value="" style="font-size: 13px;font-weight:bold;width:100%;height:30px;" />
                                            <input id="hdUbicaciones" type="hidden" value="" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtDireccion" type="text" class="form-control form-control-prepended" placeHolder="Escriba Dirección" style="width:100%;font-weight:bold;" maxlength="100" onkeypress="return validarCamposCadena(event)" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Dirección:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="display:none;">
                                        <label for="txtDistrito" style="font-size: 13px;color:#FF0000;display:none;" id="Label9">(Falta Ingresar)</label>
                                        <input id="txtDistrito" tabindex="15" type="text" class="form-control form-control-sm" placeHolder="Escriba Distrito" style="width:100%;height:21px;font-size: 11px;font-weight:bold;" maxlength="40" />
                                    </div>
                                    <div style="display:none;">
                                        <input id="chkEstado" type="checkbox" checked>
                                        <span class="handle"></span>
                                    </div>
                                </div><!-- col-4 -->
                                <div class="col-lg-6">
                                    <div class="form-group mg-t-2">
                                        <img id="imgFoto" style="height: 130px;" src="/Content/app/img/img0.jpg" class="img-fluid img-thumbnail" />
                                        <label for="fileImagen" style="font-size: 13px;"><img for="fileImagen" src="../Imagenes/SeleccioneArchivo.png" style="width:120px;height:29px;display:none;" /></label>
                                        <input id="hdURLFoto" type="hidden" />
                                        <input id="hdHuellaSocio" type="hidden" />
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtTelefono" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba T.Fijo" style="width:100%;font-weight:bold;" onkeypress="return validarNumeros(event)">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    T.Fijo:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtCelular" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Whatsapp" style="width:100%;font-weight:bold;" onkeypress="return validarNumeros(event)">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Whatsapp:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtCorreo" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Correo" style="width:100%;font-weight:bold;">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Correo:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            F Naci:
                                            <input id="txtFechaNacimiento" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Fecha" style="width:100%;font-weight:bold;font-size:11px;">
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <label for="txtPrimeraNotaCliente" style="font-size: 12px;font-weight: bold;">ingrese nota: (opcional)</label>
                                        <textarea id="txtPrimeraNotaCliente" type="text" class="form-control form-control-prepended" placeholder="Ingrese alguna nota al momento de ingresar al cliente." style="        width: 98%;
        font-size: 12px;
        height: 64px;
        background-color: #fbf8e1;" onkeypress="return validarCamposCadena(event)"></textarea>
                                    </div>
                                </div><!-- col-4 -->
                            </div><!-- row -->

                        </div>
                        <div id="liOtrosDatosCliente" style="display:none;padding-left: 2px;">
                            <br />
                            <center>
                                <table width="100%">
                                    <tr>
                                        <td style="width:50%;" valign="top">
                                            <table style="width:100%;">
                                                <tr>
                                                    <td>
                                                        <div style="width:80px">
                                                            &nbsp;&nbsp<h style="font-size: 13px;color:#000;">Hijos:</h>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div>
                                                            <label>
                                                                <input id="chkHijos" type="checkbox" onclick="EstadoHijos()"
                                                                       data-bind="checked: checkboxListValue" />
                                                            </label>
                                                            <input id="HdHijos" type="hidden" value="0" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div>
                                                            &nbsp;&nbsp<h style="font-size: 13px;color:#000;">Facebook:</h>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div>
                                                            <input id="txtUrlFacebook" type="text" class="form-control form-control-sm" placeHolder="Escriba Facebook" style="text-transform: lowercase;width:200px;height:21px;font-size: 11px;font-weight:bold;" tabindex="12" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div>
                                                            &nbsp;&nbsp<h style="font-size: 13px;color:#000;">Ocupación:</h>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div>
                                                            <input id="txtOcupacion" type="text" class="form-control form-control-sm" placeHolder="Escriba Ocupación" style="width:200px;height:21px;font-size: 11px;font-weight:bold;" tabindex="13" onkeypress="return validarCamposCadena(event)" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div>
                                                            &nbsp;&nbsp<h style="font-size: 13px;color:#000;">D.Trabajo:</h>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div>
                                                            <input id="txtDireccionTrabajo" type="text" class="form-control form-control-sm" placeHolder="Escriba Dirección de su trabajo" style="width:200px;height:21px;font-size: 11px;font-weight:bold;" tabindex="14" onkeypress="return validarCamposCadena(event)" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div>
                                                            &nbsp;&nbsp<h style="font-size: 13px;color:#000;">Teléf Trabajo:</h>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div>
                                                            <input id="txtTelefonoTrabajo" type="text" class="form-control form-control-sm" placeHolder="Escriba Teléf trabajo" style="width:200px;height:21px;font-size: 11px;font-weight:bold;" tabindex="15" maxlength="15" onkeydown="return validarNumeros(event)" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div>
                                                            &nbsp;&nbsp<h style="font-size: 13px;color:#000;font-weight:bold;">Creado:</h>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div>
                                                            <input id="txtFechaCreacion" type="text" class="form-control form-control-sm" placeHolder="" style="width:200px;font-weight:bold;height:21px;font-size: 11px;font-weight:bold;" tabindex="15" />
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>

                                        </td>
                                        <td style="width:50%;"></td>
                                    </tr>
                                </table>
                            </center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-7">
            <div class="card">
                <div class="card-header card-header-sm d-flex align-items-center" style="background-color:#fff">
                    <h4 class="card-header__title flex m-0">PASO 2: MEMBRESIA</h4>
                </div>
                <div class="card-body tab-content" style="height: 521px;">
                    <div class="tab-pane active show fade" id="activity_all">
                        <div class="button-list">
                            <button data-controlmodulo="fdbfc585-2dd6-4a33-a1da-f12aea4e2f8f" style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnNuevoContrato" title="Nuevo membresia" disabled><i class="fa-solid fa-plus"></i>&nbsp; 1. Nueva membresia</button>
                            <button data-controlmodulo="ad3e8139-a055-4c4a-9d07-da6fec5a9a7a" style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnNuevoTraspaso" title="Nuevo traspaso" disabled><i class="fa-solid fa-plus"></i>&nbsp; 2. Nuevo traspaso</button>
                            <button data-controlmodulo="9f2e1a1d-f07f-4076-8dd7-1a2b50a824bd" style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnEliminarContratoSocios" title="Eliminar membresia" data-toggle="modal" data-target="#myModalConfirmContrato" disabled><i class="fa-solid fa-trash"></i>&nbsp;Eliminar membresia</button>
                            <button data-controlmodulo="fdbfc585-2dd6-4a33-a1da-f12aea4e2f8f" style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnGuardarContrato" title="Guardar membresia" disabled><i class="fa-solid fa-floppy-disk"></i>&nbsp;Guardar membresia</button>
                            <button data-controlmodulo="734a1c73-49da-4897-b263-821a9345d04b" style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnActualizarContrato" title="Actualizar membresia" data-toggle="modal" data-target="#myModalConfirmActualizarContrato" disabled><i class="fa-solid fa-pen-to-square"></i>&nbsp;Actualizar membresia</button>

                            <button style="display:none;" type="button" class="btn btn-primary btn-sm" id="btnGenerateContrato" onclick="generateTCHearder(this)" title="Generar contrato" data-toggle="modal" data-target="#myModalGenerateContrato"><i class="fa fa-file-pdf-o" aria-hidden="true"></i>&nbsp;Generar contrato</button>

                            <button data-controlmodulo="ad3e8139-a055-4c4a-9d07-da6fec5a9a7a" style="display:none;" type="button" class="btn btn-primary btn-sm" id="GuardarTraspaso" title="Realizar Traspaso"><i class="fa-solid fa-floppy-disk"></i>&nbsp;Realizar Traspaso</button>
                        </div>

                        <div id="divContratos">
                            <div id="DivgridContratos" style="color:#0075ff;text-align:left;display:none;padding:2px;">
                                <div style="margin-left:5px;font-weight:bold;">Historial de contratos</div>
                            </div>
                            <div id="gridContratos" style="width:100%;margin-top: 1px;">
                            </div>
                            <br />
                            <table style="width:100%">
                                <tr>
                                    <td style="width:100%;text-align:left;font-weight:bold;padding:5px;">
                                        <input id="ddlPaqueteContrato" value="0" style="width:100%;text-align:left;font-weight:bold;color:#568800;height:25px;font-size: 13px;" />
                                        <input type="hidden" id="hdPaqueteContrato" value="" />
                                    </td>
                                </tr>
                            </table>
                            <div class="row mg-b-25">
                                <div class="col-lg-4">
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlAsesorVentas" value="0" style="font-size: 13px;width: 100%;font-weight:bold;height:25px;" class="k-dropdown" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlVendedoresContrato" value="0" style="font-size: 13px;width: 100%;font-weight:bold;height:25px;" class="k-dropdown" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlOrigenContrato" value="0" style="font-size: 13px;width: 100%;font-weight:bold;height:25px;" class="k-dropdown" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlTipoIngresoMembresia" value="0" style="font-size: 13px;width: 100%;font-weight:bold;height:25px;" class="k-dropdown" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group mg-t-2">
                                        <input type="hidden" id="hdFechaInicio" value="" />
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtFechaInicioContrato" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Fecha" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Fecha Inicio:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <input type="hidden" id="hdFechaFinOculto" value="" />
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtFechaFinContrato" type="text" required="" class="form-control form-control-prepended" placeholder="Escriba Fecha" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Fecha Fin:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtHoraInicioMatricula" type="time" class="form-control form-control-prepended" style="width:100%;font-weight:bold;height:25px;font-size:12px;border:0px;" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Hora inicio:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtHoraFinMatricula" type="time" class="form-control form-control-prepended" style="width:100%;font-weight:bold;height:25px;font-size:12px;border:0px;" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Hora Fin:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtCosto" type="text" class="form-control form-control-prepended" placeHolder="Precio" style="width:100%;font-weight:bold;" onkeypress="return validarCamposCadena(event)" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Precio:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtNroClases" type="text" class="form-control form-control-prepended" placeHolder="Nro. Clases Disponibles" style="width:100%;font-weight:bold;" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    # Sesiones:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtFrezenDisponibles" type="text" class="form-control form-control-prepended" placeHolder="Escriba Dias Freezing" style="width:100%;font-weight:bold;" onkeydown="return validarNumeros(event)" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    # Días Freezing:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="ddlTipoContratoSerie" value="0" style="width: 100%;font-weight:bold;height:25px;font-size: 13px;" />
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtContrato" type="text" class="form-control form-control-prepended" placeHolder="Nro Contrato" style="width:100%;font-weight:bold;" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    # Contrato:
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mg-t-2">
                                        <div class="input-group input-group-sm input-group-merge">
                                            <input id="txtObservacion" type="text" class="form-control form-control-prepended" placeHolder="Observación" style="width:100%;font-weight:bold;" onkeypress="return validarCamposCadena(event)" />
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    Observación:
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div style="display:none;">
                                <input id="txtCodigoContrato" type="text" class="form-control form-control-sm" placeHolder="Codigo" style="width:100px;" disabled />
                                <input type="hidden" id="hdCodMembresia" value="" />
                                <select id="ddlTipoMembresia" style="width:100%;font-weight:bold;" class="k-list">
                                    <option value="1">Personal</option>
                                    <option value="2">Traspaso</option>
                                </select>
                                <input id="chkEstadoContrato" type="checkbox" style="background-color: #009900;" checked>
                                <select id="ddlTipoDescuento" style="width: 98%;font-weight:bold;" class="k-list">
                                    <option value="0">Tipo de descuento (opcional) </option>
                                    <option value="1">Soles</option>
                                    <option value="2">Porcentaje</option>
                                </select>
                                <img id="imgDesPorcentaje" title="Porcentaje" src="../Imagenes/fitness/porcentaje.png" onclick="AgregarDescuento()" style="width:20px;cursor:pointer;display:none;" />
                                <input id="txtMontoDescuento" type="text" class="form-control form-control-sm " value="0" placeHolder="Resultado" style="width:98%;height: 23px;font-size:11px;" disabled />
                                <input id="txtNroClasesActual" type="text" class="form-control form-control-sm" placeHolder="Nro. Clases Asistidas" style="width:96%;height: 23px;font-size:11px;" value="0" />
                            </div>

                        </div>
                        <div id="divTraspaso" style="display:none;">
                            <div id="gridMenbresiasTraspaso" style="text-align:left">
                            </div>
                            <input type="hidden" id="hdPaqueteTraspaso" value="" />
                            <div id="divTransferenciaOcultarInformacion">
                                <div id="divPaso2Tranferencia" style="color:#0075ff;text-align:left;padding-left:7px;width:65%;font-weight:bold;">busque al cliente a transferir la membresia</div>

                                <table style="width:100%;" border="0">
                                    <tr>
                                        <td style="width:5%;">
                                            <h style="font-size: 11px;color:#000;">Codigo:</h>
                                        </td>
                                        <td style="width:12%;">
                                            <input id="txtBuscarCodigoClienteTransferir" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" tabindex="6" />
                                        </td>
                                        <td style="width:5%;">
                                            <h style="font-size: 11px;color:#000;">Nombres:</h>
                                        </td>
                                        <td style="width:25%;">
                                            <input id="txtBuscarNombresClienteTransferir" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" tabindex="6" onkeypress="return validarCamposCadena(event)" />
                                        </td>
                                        <td style="width:5%;">
                                            <h style="font-size: 11px;color:#000;">Apellidos:</h>
                                        </td>
                                        <td style="width:23%;">
                                            <input id="txtBuscarApellidosClienteTransferir" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" tabindex="6" onkeypress="return validarCamposCadena(event)" />
                                        </td>
                                        <td style="width:4%;">
                                            <h style="font-size: 11px;color:#000;">Dni:</h>
                                        </td>
                                        <td style="width:12%;">
                                            <input id="txtBuscarDniClienteTransferir" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" tabindex="6" />
                                        </td>
                                        <td style="width:5%;" align="center">
                                            <button type="button" class="btn btn-sm btn-primary" onclick="BuscarSociosTransferenciaContrato()">
                                                <i class="fa fa-search"></i>
                                            </button>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="9">
                                            <div style="display:none;"><input id="hdCodigoSocioTraspaso" type="text" class="form-control form-control-sm" style="width:98%;font-size:11px;" tabindex="6" /></div>
                                            <div style="border-radius:4px;width: 99.4%;height:28px;">
                                                <label id="txtDatosClienteTransferir" style="font-size:11px;width:100%;color: #0075ff;"><label style="padding-top: 7px;font-size:11px;" id="Holder">&nbsp;&nbsp;Falta buscar al nuevo dueño de la membresia</label></label>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                                <div class="form-group mg-t-2">
                                    <textarea id="txtMotivoTraslado" type="text" class="form-control form-control-sm " style="width:100%;font-size: 14px;font-weight: bold;" rows="3"></textarea>

                                </div>


                                <div class="row mg-b-25">
                                    <div class="col-lg-4">
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="ddlAsesorTraspaso" value="0" style="font-size: 13px;width: 100%;font-weight:bold;height:25px;" />
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="ddlVendedoresTraspaso" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Counter(Traspaso):
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="txtAsesorExistente" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" disabled />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Ases Vtas:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="txtVendedorExistente" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" disabled />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Counter:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input type="hidden" id="hdFechaInicioTraspaso" value="" />
                                                <input id="txtFechaInicioTraspaso" type="text" required="" class="form-control form-control-prepended" placeholder="" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Fecha Inicio:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="hdFechaFinTraspaso" type="hidden" />
                                                <input id="txtFechaFinTraspaso" type="text" required="" class="form-control form-control-prepended" placeholder="" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Fecha Fin:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="ddlTipoContratoSerieTraspaso" value="0" style="width:98%;font-size: 11px;font-weight:bold;" />
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="txtContratoTraspaso" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" onkeydown="return validarNumeros(event)" />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        # Contrato:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="col-lg-4">
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="txtCostoTraspaso" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Precio:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="txtNroSesionesTraspaso" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" disabled />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        # Sesiones:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="txtSesionesAsistidadTraspaso" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" onkeydown="return validarNumeros(event)" disabled />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Dias Asist:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mg-t-2">
                                            <div class="input-group input-group-sm input-group-merge">
                                                <input id="hdFrezenDisponiblesTraspaso" type="hidden" />
                                                <input id="txtFrezenDisponiblesTraspaso" type="text" class="form-control form-control-prepended" placeHolder="" style="width:100%;font-weight:bold;" onkeydown="return validarNumeros(event)" disabled />
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        Freez. Disp:
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <table border="0" style="display:none;">
                                    <tr>
                                        <td valign="center">
                                            Estado:
                                        </td>
                                        <td>
                                            <div class="form-group" style="width:80px">

                                                <label class="toggle">
                                                    <input id="chkTraspasoEstado" type="checkbox" checked>
                                                    <span class="handle"></span>
                                                </label>
                                            </div>
                                        </td>

                                        <td id="td1">
                                            <label style="font-size: 13px;">Días:</label>
                                        </td>
                                        <td id="td2" style="display:none;">
                                            <div class="form-group" style="width:70px;margin-top:11px;">
                                                <label for="txtNroDiasCongelarTraspaso" style="font-size: 13px;color:#FF0000;display:none;" id="Label71">(Falta Ingresar)</label>
                                                <input id="txtNroDiasCongelarTraspaso" type="text" class="form-control form-control-sm" placeHolder="Días" style="width:70px;" onkeydown="return validarNumeros(event)" tabindex="5" />
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td id="td3">
                                            <label style="font-size: 13px;">Inicio:</label>
                                        </td>
                                        <td id="td4">
                                            <div class="form-group" style="width:150px;margin-top:11px;">
                                                <label style="font-size: 13px;color:#FF0000;display:none;" id="Label72">(Falta Ingresar)</label>
                                                <div>
                                                    <input id="txtFechaFreezingTraspaso" type="text" CssClass="form-control form-control-sm" placeHolder="Escriba Fecha Freezing" style="width:150px;" />
                                                    <input type="hidden" id="hdFechaFreezingTraspaso" value="" />
                                                </div>
                                            </div>
                                        </td>

                                        <td id="td5">
                                            <div>
                                                <label style="font-size: 13px;">Fin:</label>
                                            </div>
                                        </td>
                                        <td id="td6">
                                            <div class="form-group" style="width:150px;margin-top:11px;">
                                                <label for="txtFechaFreezingFinTraspaso" style="font-size: 13px;color:#FF0000;display:none;" id="Label73">(Falta Ingresar)</label>
                                                <div>
                                                    <input id="txtFechaFreezingFinTraspaso" type="text" CssClass="form-control form-control-sm" placeHolder="Escriba Fecha Freezing Fin" style="width:150px;" />
                                                    <input type="hidden" id="hdFechaFreezingFinTraspaso" value="" />
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>

                                <table style="width:100%" border="0">
                                    <tr>
                                        <td style="width:10%">
                                            <div id="VerMensajeTraspaso" style="display:none;">
                                                <label style="padding: 4px;background-color: #fff;color: #00B233;border-radius: 7px;padding-left: 10px;padding-right: 10px;">Su membresia ha sido traspasada...</label>
                                            </div>
                                            <div id="VerMensajeMembresia" style="display:none;">
                                                <label style="padding: 4px;background-color: #fff;color: #00B233;border-radius: 7px;padding-left: 10px;padding-right: 10px;">Su membresia ha sido traspasada...</label>
                                            </div>
                                        </td>

                                    </tr>
                                </table>
                            </div>

                            <center>
                                <div id="divListadoMensajeTranferenciaContrato" style="width: 98%;text-align:left;display:none;">
                                    <br />
                                    <div style="color:#000;font-size:18px;font-weight:bold;">
                                        El cliente que has buscado no tiene membresia activo.
                                    </div>
                                </div>
                            </center>


                        </div>

                        <div data_idserver="19" id="divTransferencia" style="border-radius:10px;width:100%;background-color:#fff;height:365px;padding:3px 3px 3px 3px;margin:5px 5px 5px 5px;border:1px #000 solid;display:none">

                        </div>

                        <table border="0" style="width:100%;display:none;">
                            <tr>
                                <td style="width:41%" valign="top">
                                    <div class="modal-footer" style="border-radius:32px;background-color: #f5f6f7;color: #141823;font-weight: bold;line-height: 13px;padding: 10px 12px;display:none;">


                                    </div>
                                </td>
                                <td style="width:50%" valign="top">
                                    <table border="0" style="display:none;">
                                        <tr>
                                            <td colspan="6" align="center" style="background-color:#e5e5e5">
                                                <div id="ProgramacionFreezing" style="width:590px">
                                                    Programación de freezing
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td id="tdDiasFreezing2">
                                                <div style="margin-top:6px;">
                                                    <label for="txtNroDiasCongelar" style="font-size: 13px;">Días:</label>
                                                </div>
                                            </td>
                                            <td id="tdDiasFreezing" style="display:none;">
                                                <div class="form-group" style="width:70px;margin-top:11px;">
                                                    <label for="txtNroDiasCongelar" style="font-size: 13px;color:#FF0000;display:none;" id="Label50">(Falta Ingresar)</label>
                                                    <input id="txtNroDiasCongelar" type="text" class="form-control form-control-sm" placeHolder="Días" style="width:70px;" onkeydown="return validarNumeros(event)" tabindex="5" />
                                                </div>
                                            </td>

                                            <td id="tdFechaFreezing2">
                                                <div style="margin-top:6px;">
                                                    <label for="txtFechaFreezing" style="font-size: 13px;">Se congelará el:</label>
                                                </div>
                                            </td>
                                            <td id="tdFechaFreezing" style="display:none;">
                                                <div class="form-group" style="width:150px;margin-top:11px;">
                                                    <label for="txtFechaFreezing" style="font-size: 13px;color:#FF0000;display:none;" id="Label51">(Falta Ingresar)</label>
                                                    <div>
                                                        <input id="txtFechaFreezing" type="text" CssClass="form-control form-control-sm" placeHolder="Escriba Fecha Freezing" style="width:150px;" />
                                                        <input type="hidden" id="hdFechaInicioFreezing" value="" />
                                                    </div>
                                                </div>
                                            </td>

                                            <td id="tdFechaFreezingFin2">
                                                <div style="margin-top:6px;">
                                                    <label for="txtFechaFreezingFin" style="font-size: 13px;">Se descongelará:</label>
                                                </div>
                                            </td>
                                            <td id="tdFechaFreezingFin" style="display:none;">
                                                <div class="form-group" style="width:150px;margin-top:11px;">
                                                    <label for="txtFechaFreezingFin" style="font-size: 13px;color:#FF0000;display:none;" id="Label52">(Falta Ingresar)</label>
                                                    <div>
                                                        <input id="txtFechaFreezingFin" type="text" CssClass="form-control form-control-sm" placeHolder="Escriba Fecha Freezing Fin" style="width:150px;" />
                                                        <input type="hidden" id="hdFechaFinFreezing" value="" />
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <div id="divMotidoTraslado" style="display:none;">
                                        <table border="0" width="90%">
                                            <tr>
                                                <td>
                                                    <label style="font-size: 14px;width:120px;">Motivo:</label>
                                                </td>
                                                <td>
                                                    <div>
                                                        <textarea id="txtMotivo" type="text" class="form-control form-control-sm " style="width:450px;max-width:450px;"></textarea>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>

                                </td>
                            </tr>
                        </table>


                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" data-controlmodulo="928172cc-53be-4a94-8b07-ba2082ff277b" style="display:none;">
        <div class="col-lg">
            <div class="card">
                <div class="card-header card-header-sm d-flex align-items-center" style="background-color:#fff">
                    <h4 class="card-header__title flex m-0">PASO 3: INGRESE PAGO.</h4>
                </div>
                <div class="card-body tab-content">
                    <div class="row mg-b-25">
                        <div class="col-lg-3">
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <label style="color:#0075ff;font-weight:bold;">a) Ingrese la fecha y el monto del pago</label>
                                </div>
                            </div>
                            <div id="tdFechaSalida" class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtFechaSalida" type="text" required="" class="form-control form-control-prepended" placeholder="Fecha venta" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Fecha Venta:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtTotalPagado" type="text" class="form-control form-control-prepended" placeHolder="A cuenta" style="width:100%;font-weight:bold;" />
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            A cuenta:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">

                                    <input id="lblTotalDebe" type="text" class="form-control form-control-prepended" placeHolder="Saldo" style="width:100%;font-weight:bold;" disabled />
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Saldo:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="lblTotal" type="text" class="form-control form-control-prepended" placeHolder="Saldo" style="width:100%;font-weight:bold;" disabled />
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Total:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="display:none;">
                                <div id="validatorddlResponsablePagoContrato" style="width: 97%;border-radius:5px;">
                                    <input id="ddlResponsablePagoContrato" value="0" style="width:100%;font-size: 10px;font-weight:bold;" />
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <label style="color:#0075ff;font-weight:bold;">b) Forma de pago</label>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h for="rbEfectivo" style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input onclick="TipoPago()" id="rbEfectivo" type="radio" name="orderBoxFormaPago[]" value="1" style="width:20px;height:20px;" checked
                                               data-bind="checked: radioValue" />Efectivo
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h for="rbTarjetaDebito" style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input onclick="TipoPago()" id="rbTarjetaDebito" type="radio" name="orderBoxFormaPago[]" value="2" style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Tarjeta Debito
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h for="rbTarjetaCredito" style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input onclick="TipoPago()" id="rbTarjetaCredito" type="radio" name="orderBoxFormaPago[]" value="3" style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Tarjeta Credito
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h for="rbDeposito" style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input onclick="TipoPago()" id="rbDeposito" type="radio" name="orderBoxFormaPago[]" value="4" style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Deposito
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h for="rbWeb" style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input onclick="TipoPago()" id="rbWeb" type="radio" name="orderBoxFormaPago[]" value="5" style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Web
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtTextoBaucher1" type="text" class="form-control form-control-prepended" placeHolder="Nro Baucher" style="width:100%;font-weight:bold;" onkeypress="return validarCamposCadena(event)" />
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            nro boucher:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="divOpcionTarjetas1" style="display:none;">
                                <table width="75%" border="0" style="margin-top:0px;">
                                    <tr>
                                        <td style="font-size:11px;color:#000;width:75%;" colspan="2">
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdebitoVisa" type="radio" name="orderBoxOpcion1[]" value="1" checked
                                                       data-bind="checked: radioValue" />Visa
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdebitoMasterCard" type="radio" name="orderBoxOpcion1[]" value="2"
                                                       data-bind="checked: radioValue" />Master Card
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdebitoAmex" type="radio" name="orderBoxOpcion1[]" value="3"
                                                       data-bind="checked: radioValue" />AMEX
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdebitoDinersClub" type="radio" name="orderBoxOpcion1[]" value="4"
                                                       data-bind="checked: radioValue" />Diners Club
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                        </td>
                                        <td style="width:25%;"></td>
                                    </tr>
                                </table>
                            </div>
                            <div id="divOpcionTarjetas2" style="display:none;">
                                <table width="100%" border="0" style="margin-top:0px;">
                                    <tr>
                                        <td style="font-size:11px;color:#000;width:75%;" colspan="2">
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdepositoBcp" type="radio" name="orderBoxOpcion2[]" value="1" checked
                                                       data-bind="checked: radioValue" />BCP
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdepositoInterbank" type="radio" name="orderBoxOpcion2[]" value="2"
                                                       data-bind="checked: radioValue" />Interbank
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdepositoContinental" type="radio" name="orderBoxOpcion2[]" value="3"
                                                       data-bind="checked: radioValue" />Continental
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <h style="font-size:13px;font-weight:bold;background-color:#dcdee0;padding:2px 2px 2px 2px;border-radius: 4px;">
                                                <input id="rtdepositoOtros" type="radio" name="orderBoxOpcion2[]" value="4"
                                                       data-bind="checked: radioValue" />Otros
                                            </h>&nbsp;&nbsp;&nbsp;&nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id="tdSubtotal" style="display:none;">
                                sub Total:
                                <label id="txtSubTotalTop" style="width:100%;font-size:20px;color:#000;">0.00</label>
                            </div>
                            <div id="tdIGV" style="display:none;">
                                Igv:<label id="txtIGVTop" style="width:100%;font-size: 20px;;color:#000;">0.00</label>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <label style="color:#0075ff;font-weight:bold;">c) Comprobante de pago</label>
                                </div>
                            </div>

                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input id="rtComprobanteFac" onclick="ListaTipoDocumentoContrato()" type="radio" name="orderBoxComprobante[]" value="1" style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Factura
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input id="rtComprobanteBol" onclick="ListaTipoDocumentoContrato()" type="radio" name="orderBoxComprobante[]" value="2" style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Boleta
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <h style="font-size:13px;font-weight:bold;padding:2px 2px 2px 2px;border-radius: 4px;">
                                        <input id="rtComprobanteOtros" onclick="ListaTipoDocumentoContrato()" type="radio" name="orderBoxComprobante[]" value="3" checked style="width:20px;height:20px;"
                                               data-bind="checked: radioValue" />Recibo
                                    </h>
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="ddlSubTipoDocumento" value="0" style="width:100%;font-weight:bold;font-size: 13px;" />
                                </div>
                            </div>
                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtNroDocumento" type="text" class="form-control form-control-prepended" placeholder="Nro del comprobante" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Nro:
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <textarea id="txtNroObservacionesFacturacion" type="text" class="form-control form-control-prepended" placeholder="..." style="width:100%;font-weight:bold;height:49px;border: 1px solid #d8e2ef;" "></textarea>
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Observaciones:
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="div_nro_contribuyente" class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtNroDocumentoContribuyente" type="text" class="form-control form-control-prepended" placeholder="00000000000" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            RUC:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="div_nombre_empresa" class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtNombreEmpresa" type="text" class="form-control form-control-prepended" placeholder="Nombre de Empresa" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Empresa:
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="div_direccionfiscal_empresa" class="form-group mg-t-2">
                                <div class="input-group input-group-sm input-group-merge">
                                    <input id="txtDireccionFiscalEmpresa" type="text" class="form-control form-control-prepended" placeholder="Direccion Fiscal" style="width:100%;font-weight:bold;height:25px;border:0px;">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            Direccion:
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <div>
                                <table width="100%" border="0">
                                    <tr>
                                        <td valign="top" style="width:50%;">
                                            <div data-controlmodulo="928172cc-53be-4a94-8b07-ba2082ff277b" style="display:none;">
                                                <button id="lblRealizarPago" type="button" class="btn btn-primary btn-xs" title="Pagar" style="cursor:pointer;width:100%;color:#fff;font-size: 14px;"><i class="fa-solid fa-floppy-disk"></i>&nbsp;Realizar Pago</button>
                                                <div id="divCuotasPago" style="background-color: #fff;padding:5px;border-radius:3px;margin:5px 5px 5px 5px;display:none;">

                                                    <table width="99%" border="0">
                                                        <tr>
                                                            <td colspan="5">
                                                                <div style="color:#0075ff;height:15px;text-align:left;width:93%;padding:2px">
                                                                    <div style="margin-left:5px;">Si el pago es en cuotas entonces es obligatorio agendarlo.</div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width:20%;" align="center">
                                                                <label for="txtMontoCuota" style="font-size: 13px;color:#000;padding-top: 6px;">Monto de la cuota:</label>
                                                            </td>
                                                            <td style="width:15%;">
                                                                <input id="txtMontoCuota" type="text" class="form-control form-control-sm" placeHolder="Monto" style="width:100px;font-size:11px;font-weight:bold;" />
                                                            </td>
                                                            <td align="center" style="width:20%;">
                                                                <label for="txtFechaCuota" style="font-size: 13px;width:90px;color:#000;padding-top: 6px;">Fecha Cuota:</label>
                                                            </td>
                                                            <td style="width:10%;">
                                                                <label for="txtFechaCuota" style="font-size: 13px;color:#FF0000;display:none;" id="validatorFechaCuota">(Falta Ingresar)</label>
                                                                <input id="txtFechaCuota" type="text" class="k-datetime" placeHolder="Escriba Fecha" style="width:100px;font-size:11px;" />
                                                            </td>
                                                            <td style="width:15%;">
                                                                <button id="btnAgregarCuota" type="button" title="Guardar Cuota Pago" class="btn btn-primary btn-sm">Agregar</button>
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="5">
                                                                <div>
                                                                    <table id="gridCuotasContrato" class="table">
                                                                        <colgroup>
                                                                            <col />
                                                                            <col />
                                                                            <col />
                                                                        </colgroup>
                                                                        <thead>
                                                                            <tr>
                                                                                <th data-field=""></th>
                                                                                <th data-field="fechaHoraHoy"><span style="font-size: 11px;font-weight:bold;"><b>Fecha</b></span></th>
                                                                                <th data-field="Importe"><span style="font-size: 11px;font-weight:bold;"><b>Monto</b></span></th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody></tbody>
                                                                    </table>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </table>

                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div id="myModalConfirm" class="modal">
    <div class="modal-dialog" style="width:22%;">
        <div class="modal-content" style="border: 1px solid #00bcd4;border-radius: 15px;">
            <div id="Xclose" style="background-color: rgba(0, 188, 212, 0.08);border-bottom: 1px solid rgba(0, 188, 212, 0.12);-webkit-border-radius: 0px 0px 0 0;color: #141823;line-height: 13px;padding: 10px 12px;-webkit-border-top-left-radius: 15px;-webkit-border-top-right-radius: 15px;-moz-border-radius-topleft: 15px;-moz-border-radius-topright: 15px;border-top-left-radius: 15px;border-top-right-radius: 15px;height: 26px;">
                <button type="button" class="close" style="margin-top: -10px;" data-dismiss="modal" aria-hidden="true">×</button>
                <label class="modal-title" style="color:#F09300;font-size:13px;margin-top: -3px;">Mensaje </label>
            </div>
            <div class="modal-body">
                <p></p>
                <h style="font-size:12px;">
                    ¿Estás seguro de eliminar este cliente? <br />
                    * Este cliente solo se eliminará si no tiene membresía.
                </h>
                <p></p>
            </div>
            <div class="modal-footer" style="background-color: rgba(0, 188, 212, 0.07);border-bottom: 0px solid #e5e5e5;-webkit-border-radius: 3px 3px 0 0;color: #141823;font-weight: bold;line-height: 13px;padding: 3px 12px;border-radius: 12px;">
                <button id="btnNo" style="font-size: 10px;" type="button" class="btn btn-default btn-sm" data-dismiss="modal">No</button>
                <button id="btnSi" style="font-size: 10px;" type="button" class="btn btn-primary btn-sm" style="background-color:#F09300;border-color:#F09300;">Si</button>
            </div>
        </div>
    </div>
</div>

<div id="myModalConfirmActualizarContrato" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-small-title" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div id="DivCerrarConfirmActualizarContrato" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Confirmar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p> ¿Estás seguro de Actualizar la membresia seleccionada? </p>
            </div>
            <div class="modal-footer">
                <button id="btnNoActualizarContrato" type="button" class="btn btn-light" data-dismiss="modal">No</button>
                <button id="btnSiActualizarContrato" style="display:none;" type="button" data-controlmodulo="734a1c73-49da-4897-b263-821a9345d04b" class="btn btn-primary">Si</button>
            </div>
        </div>
    </div>
</div>

<div id="myModalConfirmContrato" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-small-title" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div id="DivCerrarConfirmContrato" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Confirmar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro de eliminar esta membresia?</p>
                <p>* Recuerde que solo se podrá eliminar la membresia si no tiene ningun pago.</p>
                <p>* Si la membresía ya tiene pago(s) puede anularlo.</p>
            </div>
            <div class="modal-footer">
                <button id="btnNoContrato" type="button" class="btn btn-light" data-dismiss="modal">No</button>
                <button id="btnSiContrato" type="button" style="display:none;" data-controlmodulo="9f2e1a1d-f07f-4076-8dd7-1a2b50a824bd" class="btn btn-primary">Si</button>
            </div>
        </div>
    </div>
</div>

<div id="myModalCuotas" class="modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div id="cerrarCuotas" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Historial de cuotas</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div data-controlmodulo="aa7ef11c-2c8e-4337-b5d3-0bad32fdf7f7" style="display:none;border-radius: 10px;padding: 6px;">
                    <table border="0" style="width:100%;background-color: #fff;border-radius: 10px;margin-top: 4px;">
                        <tr>
                            <td style="width:20%;" align="center">
                                <label style="font-size: 12px;color:#000;padding-top: 6px;">Monto:</label>
                            </td>
                            <td style="width:15%;">
                                <input id="txtMontoCuotaModal" type="text" class="form-control form-control-sm" placeHolder="Monto" style="width:100px;font-size:11px;font-weight:bold;" />
                            </td>
                            <td align="center" style="width:20%;">
                                <label style="font-size: 12px;width:90px;color:#000;padding-top: 6px;">Fecha Cuota:</label>
                            </td>
                            <td style="width:15%;">
                                <label style="font-size: 13px;color:#FF0000;display:none;">(Falta Ingresar)</label>
                                <input id="FechaCuotaModal" type="text" class="k-datetime" placeHolder="Escriba Fecha" style="width:150px;font-size:11px;" />
                            </td>
                            <td style="width:30%;">
                                <button id="btnCuotaPago" type="button" title="Guardar Cuota Pago" class="btn btn-primary btn-sm">Agregar</button>
                            </td>
                        </tr>
                    </table>
                    <br />
                    <div>
                        <div id="gridCuotas" style="width:100%;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="myModalConfirmAnularPago" class="modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div id="DivCerrarConfirmAnularPago" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Confirmar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group mg-t-2">
                    <label for="txtMotivo_AnularPagoMembresia" style="font-weight: 500;font-size: 12px;">ingrese motivo:</label>
                    <textarea id="txtMotivo_AnularPagoMembresia" type="text" class="form-control form-control-prepended" placeholder="¿Cual es el motivo para anular el pago de la membresia?" style="width: 98%;font-size: 12px;height: 100px;background-color:#fbf8e1;" onkeypress="return validarCamposCadena(event)"></textarea>
                </div>
                <div class="form-group mg-t-2">
                    <label class="form-label" style="font-size: 12px;text-align: right;" id="txtResponsable_AnularPagoMembresia">ingresar clave:</label>
                </div>
                <div class="form-group mg-t-2">
                    <label class="form-label" for="txtValidarClave_AnularPagoMembresia" style="font-size: 12px;text-align: right;">ingresar clave:</label>
                    <input id="txtValidarClave_AnularPagoMembresia" class="form-control form-control-sm" style="font-size: 13px;width: 100%;" placeHolder="Ingresar clave" type="password" value="">
                </div>
                <br />
                <p>¿Estás seguro de eliminar el pago?</p>
            </div>
            <div class="modal-footer" data-controlmodulo="7f739014-8635-4471-abef-106461f5ad55" style="display:none;">
                <button id="btnNoAnularPago" type="button" class="btn btn-light" data-dismiss="modal">No</button>
                <button id="btnSiAnularPago" type="button" class="btn btn-primary">Si</button>
            </div>
        </div>
    </div>
</div>

<div id="myModalVerPagos" class="modal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="cerrarmyModalVerPagos" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Historial de pagos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div data-controlmodulo="7f739014-8635-4471-abef-106461f5ad55" style="display:none;">
                    <div id="gridVerPagos" style="width:100%;">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="myModalConfirmTraspaso" class="modal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="DivCerrarmyModalConfirmTraspaso" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Traspaso</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table width="100%">
                    <tr>
                        <td style="text-align:center">
                            <h style="font-size:12px;"> ¿Estás seguro de Traspasar la membresia : <label style="font-size:11px;color:red" id="nomMenbresia"></label></h>
                            <h style="font-size:12px;"> de </h>
                            <label style="font-size:11px;color:blue" id="lblNomSalidaTraspaso"></label>
                            <h style="font-size:12px;"> a </h>
                            <label style="font-size:11px;color:blue" id="lblNomDestinoTraspaso"></label>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer" data-controlmodulo="ad3e8139-a055-4c4a-9d07-da6fec5a9a7a" style="display:none;">
                <button id="btnNoConfirmTraspaso" type="button" class="btn btn-light" data-dismiss="modal">No</button>
                <button id="btnSiConfirmTraspaso" type="button" class="btn btn-primary">Si</button>
            </div>
        </div>
    </div>
</div>

<div id="myModalConfirmEliminarCuota" class="modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div id="DivCerrarConfirmEliminarCuota" class="modal-header">
                <h5 class="modal-title" id="modal-small-title">Confirmar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p> ¿Estás seguro de eliminar la cuota?</p>
            </div>
            <div class="modal-footer" data-controlmodulo="aa7ef11c-2c8e-4337-b5d3-0bad32fdf7f7" style="display:none;">
                <button id="btnNoCuota" type="button" class="btn btn-light" data-dismiss="modal">No</button>
                <button id="btnSiCuota" type="button" class="btn btn-primary">Si</button>
            </div>
        </div>
    </div>
</div>

<div id="divTicketVenta" style="margin: auto;display:none;">
    <div style="background: white;padding: 1em;">
        <br />
        <table style="font-family: monospace; width: 100%; border-collapse: collapse;width:100%;">
            <tbody>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.5em;" id="NombreEmpresaVentaTicket">
                        EMPRESA FITNESS
                    </td>
                </tr>
            </tbody>
            <tfoot style="border-bottom-style: solid; border-bottom-color: #000; border-bottom-width: 1px; ">
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.4em;" id="RucEmpresaVentaTicket">RUC: 20601916086</td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.4em;" id="CelularEmpresaVentaTicket">CELULAR: 999999999</td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.4em;" id="TelefonoEmpresaVentaTicket">TELEFONO: 012582222</td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.4em;" id="DistritoEmpresaVentaTicket">DIRECCION: AV: SURCO LIMA 205</td>
                </tr>
            </tfoot>
        </table>
        <br />
        <table style="font-family: monospace; width: 100%; border-collapse: collapse;width:100%;">
            <tbody>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.5em;" id="NombreClienteTicket">
                        CLIENTE: NOMBRE APELLIDO1 APELLIDO2 (COD 8562)
                    </td>
                </tr>
            </tbody>
            <tfoot style="border-bottom-style: solid; border-bottom-color: #000; border-bottom-width: 1px; ">
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.4em;" id="RucClienteTicket">RUC/DNI/CE: CLIENTE</td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.4em;" id="DireccionDistritoClienteTicket">DIRECCION: CLIENTE</td>
                </tr>
            </tfoot>
        </table>
        <br />
        <table style="font-family: monospace; width: 100%; border-collapse: collapse;width:100%;">
            <tbody>
                <tr>
                    <td style="text-align:center;font-weight:bold;font-size:1.5em;" colspan="2" id="NroComprobanteVentaTicket">
                        TICKET NRO: 00-000000
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td style="text-align:center;font-size:1.4em;" id="FechaDeLaVentaVentaTicket">FECHA: DD/MM/AAAA</td>
                    <td style="text-align:center;font-size:1.4em;" id="HoraDeLaVentaVentaTicket">HORA: HH:MM:SS</td>
                </tr>
            </tfoot>
        </table>
        <br />
        <table style="font-family: monospace; width: 100%; border-collapse: collapse;width:100%;">

            <thead style=" border-top-style: solid; border-top-color: #000; border-top-width: 1px;">
                <tr>
                    <th style="background-color: #b6b8b9; color: #000; font-size: 1.3em; text-align: left;">Cant</th>
                    <th style="background-color: #b6b8b9;color: #000;font-size: 1.3em;text-align: left;">Descripción</th>
                    <th style="background-color: #b6b8b9; color: #000; font-size: 1.3em; text-align: right; ">Importe</th>
                </tr>
            </thead>
            <tbody id="ProductosDeVenta">
                <tr>
                    <td style="border-bottom: 1px solid #eeee;text-align:left;font-size: 1.2em;">1</td>
                    <td style="border-bottom: 1px solid #eeee;text-align:left;font-size: 1.2em;">Membresia</td>
                    <td style="border-bottom: 1px solid #eeee;text-align: right;font-size: 1.2em;">400.00</td>
                </tr>
            </tbody>
            <tfoot style="white-space: nowrap;">
                <tr id="ticketSubtotal">
                    <td></td>
                    <td style="background: 0 0;
                                        border-bottom: 1px solid #eeee;
                                        white-space: nowrap;
                                        text-align: right;
                                        font-size: 1.5em;
                                        color: #5b636a;">
                        SUB TOTAL
                    </td>
                    <td style="background: 0 0;
                                        border-bottom: 1px solid #eeee;
                                        white-space: nowrap;
                                        text-align: right;
                                        font-size: 1.5em;
                                        color: #5b636a;" id="SubTotalVentaVentaTicket">
                        300.00
                    </td>
                </tr>
                <tr id="ticketIgv">
                    <td></td>
                    <td style="background: 0 0;
                                        border-bottom: 1px solid #eeee;
                                        white-space: nowrap;
                                        text-align: right;
                                        font-size: 1.5em;
                                        color: #5b636a;">
                        IGV
                    </td>
                    <td style="background: 0 0;
                                        border-bottom: 1px solid #eeee;
                                        white-space: nowrap;
                                        text-align: right;
                                        font-size: 1.5em;
                                        color: #5b636a;" id="IgvVentaVentaTicket">
                        300.00
                    </td>
                </tr>

            </tfoot>
            <tfoot id="tfootFormaPago">

            </tfoot>
            <tfoot style="white-space: nowrap;">
                <tr>
                    <td></td>
                    <td style=" border-bottom: 1px solid #eeee; text-align: right; color: #000; font-weight: bold; font-size: 1.5em;">TOTAL</td>
                    <td style="border-top: 1px solid #000;font-weight: bold;color: #000;background: 0 0;border-bottom: 1px solid #eeee;white-space: nowrap;text-align: right;font-size: 1.5em;border-top: 1px solid #eeee;" id="TotalPrecioTotalMembresia_Ticket">
                        500.00
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td style="background: 0 0;border-bottom: 1px solid #eeee;white-space: nowrap;text-align: right;font-size: 1.5em;color: #5b636a;">
                        A CUENTA
                    </td>
                    <td style="background: 0 0;border-bottom: 1px solid #eeee;white-space: nowrap;text-align: right;font-size: 1.5em;color: #5b636a;" id="TotalVentaVentaTicket">
                        200.00
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td style="background: 0 0;border-bottom: 1px solid #eeee;white-space: nowrap;text-align: right;font-size: 1.5em;color: #5b636a;">
                        DEBE
                    </td>
                    <td style="background: 0 0;border-bottom: 1px solid #eeee;white-space: nowrap;text-align: right;font-size: 1.5em;color: #5b636a;" id="TotalDebeMembresia_Ticket">
                        200.00
                    </td>
                </tr>
            </tfoot>
        </table>
        <br />
        <table style="font-family: monospace; width: 100%; border-collapse: collapse;width:100%;">
            <tbody>
                <tr>
                    <td style="text-align:center;font-size: 1.4em;" id="UsuarioCreacionTicket">
                        Responsable: nazarena
                    </td>
                </tr>
            </tbody>
            <tfoot style="border-bottom-style: solid; border-bottom-color: #000; border-bottom-width: 1px; ">
                <tr>
                    <th style="text-align:center;font-size: 1.3em;" id="lblFraseVentaUno">GRACIAS POR SU PREFERENCIA</th>
                </tr>
            </tfoot>
        </table>

    </div>

</div>

<div id="divImprimirComprobante_Tipo_2" style="width: 20em;margin: auto;display:none;">
    <table style="width:100%;margin-top: 90px;">
        <tr>
            <td align="right">
                <div>
                    <table style="width:280px;" border="0">
                        <tr>
                            <td align="center">
                                <div>
                                    <label id="tc_Tipo_Comprobante" style="font-size: 25px;font-family:Myriad Pro;display:none;"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td align="center">
                                <div style="margin-top:15px;margin-left:15px;">
                                    <label id="tc_Correlativo_Comprobante"></label>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <table style="width:100%;">
                    <tr>
                        <td>
                            <table>
                                <tr>
                                    <td>
                                        <div style="margin-top: -5px">
                                            <label id="tc_Dia" style="margin-left:50px;"></label>
                                            <label id="tc_Mes" style="width:200px;margin-left:50px;"></label>
                                            <label id="tc_Anio" style="margin-left:70px;"></label>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label id="tc_Cliente" style="margin-left:70px;"></label>
                                        <label id="tc_Ruc_Dni_Cli" style="margin-left:20px;"></label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label id="tc_Direccion_Cli" style="margin-left:70px;"></label>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="height: 30px;"></div>
                            <div style="height: 210px;width:100%;">
                                <label id="tc_Productos"></label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table style="width:100%;" border="0">
                                <tr>
                                    <td style="width:85%;">
                                        <div style="padding-top:50px;">
                                            <label id="tc_Dia_2" style="margin-left:245px;"></label>
                                            <label id="tc_Mes_2" style="margin-left:48px;"></label>
                                            <label id="tc_Anio_2" style="margin-left:20px;"></label>
                                        </div>
                                    </td>
                                    <td style="width:25%;" align="right">
                                        <div style="margin-top: -5px;">
                                            <label id="tc_Total"></label>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

<div class="modal fade" id="loadMe" tabindex="-1" role="dialog" aria-labelledby="loadMeLabel">
    <br /><br /><br />
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <img src="~/Content/appsfit_img/logoappsfitweb.png" style="width:255px;height:125px;" />
                <div class="loader"></div>
                <div clas="loader-txt">
                    <p>Cargando... <br><br><small>Espere por favor, este proceso puede tardar unos minutos</small></p>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modalErrorContrato" class="modal fade" tabindex="-1" role="dialog" aria-modal="true" style="padding-right: 17px;">
    <div class="modal-dialog modal-sm">
        <div class="modal-content bg-danger">
            <div class="modal-body text-center p-4">
                <i class="material-icons icon-40pt text-white mb-2">report_problem</i>
                <h4 class="text-white">Hola!</h4>
                <p class="text-white mt-3" id="lblMensajeErrorContrato">--</p>
                <button onclick="event_cerrarModalError();" type="button" class="btn btn-light my-2" data-dismiss="modal">Aceptar</button>
            </div> <!-- // END .modal-body -->
        </div> <!-- // END .modal-content -->
    </div> <!-- // END .modal-dialog -->
</div>


<div id="modaldiv_PropspectosExisteDNI" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="loadMeLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content bg-soft-info" style="margin-top: -20px;">
            <div class="modal-body text-center p-4" style="background-color: #fff;width: 910px;">
                <br />
                <div class="row">
                    <div style="font-size:13px;" class="alert alert-danger" role="alert">El DNI/CCI/CE que estas intentando guardar ya existe en otro prospecto o cliente.</div>
                    <br />
                    <div class="col-12">
                        <div id="gridProspectosExistentesDNI"></div>
                    </div>
                </div>
                <br />
                <button onclick="event_btnCerrarmodaldiv_PropspectosExisteDNI();" type="button" class="btn btn-light pd-x-25" data-dismiss="modal" aria-label="Close">Entiendo</button>
            </div> <!-- // END .modal-body -->
        </div>
    </div>
</div>


<div id="modaldiv_clausula" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="loadMeLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content bg-soft-info" style="margin-top: -20px;">
            <div class="modal-body text-center p-4" style="background-color: #fff;width: 910px;">
                <br />
                <div class="row">
                    <div style="font-size:13px;" class="alert alert-danger" role="alert">El DNI/CCI/CE que estas intentando guardar ya existe en otro prospecto o cliente.</div>
                    <br />
                    <div class="col-12">
                        <div id="gridProspectosExistentesDNI"></div>
                    </div>
                </div>
                <br />
                <button onclick="event_btnCerrarmodaldiv_PropspectosExisteDNI();" type="button" class="btn btn-light pd-x-25" data-dismiss="modal" aria-label="Close">Entiendo</button>
            </div> <!-- // END .modal-body -->
        </div>
    </div>
</div>

<div class="container-fluid">
    <!-- The modal -->
    <div class="modal fade pr-0" id="flipFlop" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-center" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <ul class="nav nav-tabs">
                        <li><a data-toggle="tab" class="active" href="#home">Formato PDF</a></li>
                        <li><a data-toggle="tab" href="#menu1">Formato HTML</a></li>

                    </ul>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="removePdf()">
                        <span aria-hidden="true">&times;</span>
                    </button>

                </div>
                <div class="modal-body">
                    <div class="tab-content">
                        <div id="home" class="tab-pane fade in active">
                            <div style="display: flex; flex-direction: column; height: 50vh; overflow: hidden; ">
                                <div>
                                    @*https://localhost:44325/Content/assets/pdf/891510660.pdf#scrollbar=0*@
                                    <embed src="" id="divrenderPDFtc" type="application/pdf" width="100%" height="600px" />
                                </div>
                            </div>
                            <hr />
                            <div class="row justify-content-center mt-5">
                                <div class="col-lg-6">
                                    <div class="input-group">
                                        <input id="txtnamePdf" type="hidden" />
                                        <input type="text" class="form-control" id="txtCorreoPDFtc" placeholder="correo electrónico">
                                        <span class="input-group-btn ml-1">
                                            <button class="btn btn-primary" onclick="sendEmailPDFtc(this)" type="button"> <i class="fa fa-envelope-o" aria-hidden="true"></i> Enviar correo</button>
                                        </span>
                                    </div><!-- /input-group -->
                                </div>
                            </div>
                        </div>
                        <div id="menu1" class="tab-pane fade">
                            <div style="display: flex; flex-direction: column; height: 50vh; overflow: auto; ">
                                <div id="bodymodalcontentClusula"></div>
                            </div>
                            <hr />
                            <div class="row justify-content-center mt-5">
                                <div class="col-lg-6">
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="txtCorreoClausula" placeholder="correo electrónico">
                                        <span class="input-group-btn ml-1">
                                            <button class="btn btn-primary" onclick="sendEmail(this)" type="button"><i class="fa fa-envelope-o" aria-hidden="true"></i> Enviar correo </button>
                                        </span>
                                    </div><!-- /input-group -->
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">CERRAR</button>
                    </div>*@
            </div>
        </div>
    </div>
</div>
<span data-toggle="modal" id="btnModalClausula" data-target="#flipFlop" style="color:none">
</span>



<div class="container-fluid">
    <!-- The modal -->
    <div class="modal fade pr-0" id="modalDiv" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-center" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" onclick="removePdf()" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div style="display: flex; flex-direction: column; height: 50vh; overflow: hidden; ">
                        <div>
                            @*https://localhost:44325/Content/assets/pdf/891510660.pdf#scrollbar=0*@
                            <embed src="" id="divrenderPdf" type="application/pdf" width="100%" height="600px" />
                        </div>
                    </div>
                    <hr />
                    <div class="row justify-content-center mt-5">
                        <div class="col-lg-6">
                            <div class="input-group">
                                <input id="txtnamePdf" type="hidden" />
                                <input type="text" class="form-control" id="txtCorreoPDF" placeholder="correo electrónico">
                                <span class="input-group-btn ml-1">
                                    <button class="btn btn-primary" onclick="sendEmailPDF(this)" type="button"><i class="fa fa-envelope-o" aria-hidden="true"></i> Enviar correo</button>
                                </span>
                            </div><!-- /input-group -->
                        </div>
                    </div>
                </div>
                @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">CERRAR</button>
                    </div>*@
            </div>
        </div>
    </div>
</div>
<span data-toggle="modal" id="btnModalPdf" data-target="#modalDiv" style="color:none">
</span>

<div class="container-fluid">
    <!-- The modal generate tc -->
    <div class="modal fade pr-0" id="myModalGenerateContrato" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-center" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="removePdf()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div style="display: flex; flex-direction: column; height: 50vh; overflow: hidden; ">
                        <div>
                            @*https://localhost:44325/Content/assets/pdf/891510660.pdf#scrollbar=0*@
                            <embed src="" id="divrendergeneratetcPdf" type="application/pdf" width="100%" height="600px" />
                        </div>
                    </div>
                    <hr />
                    <div class="row justify-content-center mt-5">
                        <div class="col-lg-6">
                            <div class="input-group">
                                <input id="txtnamePdf" type="hidden" />
                                <input type="text" class="form-control" id="txtCorreoPDFGenerate" placeholder="correo electrónico">
                                <span class="input-group-btn ml-1">
                                    <button class="btn btn-primary" onclick="sendEmailPDFGenerate(this)" type="button"><i class="fa fa-envelope-o" aria-hidden="true"></i> Enviar correo</button>
                                </span>
                            </div><!-- /input-group -->
                        </div>
                    </div>
                </div>
                @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">CERRAR</button>
                    </div>*@
            </div>
        </div>
    </div>
</div>
@section Scripts {



    @System.Web.Optimization.Scripts.Render("~/Scripts/jquery.min.js")

    @System.Web.Optimization.Scripts.Render("~/Scripts/plugins/jsKendo/jquery.min.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/plugins/jsKendo/angular.min.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/plugins/jsKendo/kendo.all.min.js")

    @System.Web.Optimization.Scripts.Render("~/Scripts/plugins/jquery-ui/jquery-ui.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/plugins/jquery-ui/jquery-ui.min.js")

    @System.Web.Optimization.Scripts.Render("~/Resource/UserControl.Helper.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/bootstrap-notify-master/bootstrap-notify.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/bootstrap-notify-master/bootstrap-notify.min.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/jsBootstrap/jquery.bootstrap-growl.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/maskedinput.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/moment.js")
    @System.Web.Optimization.Scripts.Render("~/Content/printjs/print.min.js")

    <script type="text/javascript">

        $(document).ready(function () {


            SEGListarPerfilMenu();
            //PASO 1

            $('#btnNoCuota,#DivCerrarConfirmEliminarCuota').click(function () {
                $('#myModalConfirmEliminarCuota').hide('fast');
            });

            $('#btnSiCuota').click(function () {

                $('button[type="button"]').attr("disabled", true);
                document.getElementById('loadMe').style.display = 'block';

                var codigo = $('#hdCodigoCuota').val();
                $.ajax({
                    data: '{"codigo":"' + codigo + '"}',
                    type: "POST",
                    url: "/operacionesfit/EliminarCuota",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        $.bootstrapGrowl("La cuota se eliminó correctamente.", { type: 'success', width: 'auto' });
                        $('#myModalConfirmEliminarCuota').hide('fast');
                    }, complete: function () {
                        var codigoMembresia = $('#hdCodMembresiaCuotas').val();
                        ListarCuota(codigoMembresia);
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';
                    }
                });
            });

            $('#btnInformacionCliente').click(function () {
                $(this).addClass('active');
                $('#btnUbicacionCliente').removeClass('active');
                $('#trInformacionCliente').show('fast');
                $('#liOtrosDatosCliente').hide('fast');
            });

            $('#btnUbicacionCliente').click(function () {
                $(this).addClass('active');
                $('#btnInformacionCliente').removeClass('active');
                $('#liOtrosDatosCliente').show('fast');
                $('#trInformacionCliente').hide('fast');
            });

            $("#txtFechaNacimiento").kendoDatePicker({
                change: function () {
                }
            });

            $('#txtBuscarPorCodigoClienteContrato').on('keydown', function (e) {
                if (e.which == 13) {
                    e.preventDefault();
                    BuscarSociosContrato();
                    return false;
                }
            });

            $('#txtBuscarPorDniClienteContrato').on('keydown', function (e) {
                if (e.which == 13) {
                    e.preventDefault();
                    BuscarSociosContrato();
                    return false;
                }
            });

            $('#txtBuscarPorNombreClienteContrato').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarPorCodigoClienteContrato').val('');
                    $('#txtBuscarPorDniClienteContrato').val('');
                } else {

                }
            });

            $('#txtBuscarPorApellidoClienteContrato').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarPorCodigoClienteContrato').val('');
                    $('#txtBuscarPorDniClienteContrato').val('');
                } else {
                }
            });

            $('#txtBuscarPorCodigoClienteContrato').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarPorNombreClienteContrato').val('');
                    $('#txtBuscarPorApellidoClienteContrato').val('');
                    $('#txtBuscarPorDniClienteContrato').val('');
                } else {

                }
            });

            $('#txtBuscarPorDniClienteContrato').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarPorNombreClienteContrato').val('');
                    $('#txtBuscarPorApellidoClienteContrato').val('');
                    $('#txtBuscarPorCodigoClienteContrato').val('');
                } else {

                }
            });

            $('#txtBuscarPorCodigoClienteContrato').click(function () {
                $('#txtBuscarPorCodigoClienteContrato').select();
            });

            $('#txtBuscarPorDniClienteContrato').click(function () {
                $('#txtBuscarPorDniClienteContrato').select();
            });

            $('#btnNuevoClienteContrato').click(function (e) {
                var flag = $('#FlagModulos').val();
                if (flag == 1) {
                    LimpiarNuevoClienteContrato();
                    LimpiarMenbresiaContrato();
                    LimpiarContratoPagos();
                    $('#txtBuscarPorCodigoClienteContrato').val('');
                    $('#txtBuscarPorNombreClienteContrato').val('');
                    $('#txtBuscarPorApellidoClienteContrato').val('');
                    $('#txtBuscarPorDniClienteContrato').val('');
                    document.getElementById("btnGuardar").style.display = '';
                    document.getElementById("btnActualizarClientesContrato").style.display = 'none';
                    $("#gridContratos").empty();

                } else if (flag == 2) {
                    $('#txtBuscarPorCodigoClienteContrato').val('');
                    $('#txtBuscarPorNombreClienteContrato').val('');
                    $('#txtBuscarPorApellidoClienteContrato').val('');
                    $('#txtBuscarPorDniClienteContrato').val('');
                    document.getElementById("btnGuardar").style.display = '';
                    document.getElementById("btnActualizarClientesContrato").style.display = 'none';
                    LimpiarNuevoClienteContrato();
                    ListarMembresiaTraspaso(0);
                } else if (flag == 5) {
                    $('#txtBuscarPorCodigoClienteContrato').val('');
                    $('#txtBuscarPorNombreClienteContrato').val('');
                    $('#txtBuscarPorApellidoClienteContrato').val('');
                    $('#txtBuscarPorDniClienteContrato').val('');
                    document.getElementById("btnGuardar").style.display = '';
                    document.getElementById("btnActualizarClientesContrato").style.display = 'none';
                    LimpiarNuevoClienteContrato();
                }
            });

            $('#btnActualizarClientesContrato').click(function (e) {
                e.preventDefault();
                e.stopPropagation();

                if (validador() && $('#txtCodigo').val() != 0) {
                    $('#txtBuscarPorDniClienteContrato').val('');
                    $('#txtBuscarPorNombreClienteContrato').val('');
                    $('#txtBuscarPorApellidoClienteContrato').val('');
                    GuardarSocioContrato();
                } else if (validador() && $('#txtCodigo').val() == 0) {
                    GuardarSocioContrato();
                }
            });

            $('#btnGuardar').click(function (e) {
                e.preventDefault();
                e.stopPropagation();

                if (validador() && $('#txtCodigo').val() != 0) {
                    GuardarSocioContrato();
                } else if (validador() && $('#txtCodigo').val() == 0) {
                    GuardarSocioContrato();
                }
            });

            $('#btnEliminarClienteContrato').click(function (e) {
                if ($('#txtCodigo').val() != 0) {
                    $('#myModalConfirm').show('fast');
                } else {
                    $.bootstrapGrowl("Busque al cliente.", { type: 'danger', width: 'auto' });
                }
            });

            $('#btnNo').click(function () {
                $('#myModalConfirm').hide('fast');
            });

            $('#Xclose').click(function () {
                $('#myModalConfirm').hide('fast');
            });

            $('#btnSi').click(function () {
                $('button[type="button"]').attr("disabled", true);
                var cod = $('#txtCodigo').val();

                $.ajax({
                    data: '{"codigo":"' + cod + '"}',
                    type: "POST",
                    url: "/operacionesfit/EliminarSocio",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        var mensaje = msg.split('|')[0];
                        var Validacion = msg.split('|')[1];
                        if (Validacion > 0) {
                            $('#myModalConfirm').hide('fast');
                            $.bootstrapGrowl(mensaje, { type: 'danger', width: 'auto' });
                            LimpiarNuevoClienteContrato();
                        } else {
                            $.bootstrapGrowl("Error, vuelve a intentarlo.", { type: 'danger', width: 'auto' });
                        }
                    }, complete: function () {
                        $('button[type="button"]').attr("disabled", false);
                    }
                });
            });

            $('#ddlTipoDocumento').kendoDropDownList({
                change: function () {
                    var tipoDescuento = $("#ddlTipoDocumento").data('kendoDropDownList').value();
                    if (tipoDescuento == 1) {
                        $("#lblTipoDocumento").html("Dni");
                    } else {
                        $("#lblTipoDocumento").html("Pasaporte");
                    }
                }
            });

            $('#ddlTipoMembresia').kendoDropDownList();

            $("#lblTipoDocumento").html("Dni");

            $('#txtNombre').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtNombre').removeClass('borderValidar');
                } else {
                    $('#txtNombre').addClass('borderValidar');
                }
            });

            $('#txtApellido').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtApellido').removeClass('borderValidar');
                } else {
                    $('#txtApellido').addClass('borderValidar');
                }
            });

            NuevoContratos();

            //PASO 2

            $('#btnNuevoTraspaso').click(function () {
                $('#divTraspaso').show('fast');
                $('#divContratos').hide('fast');

                document.getElementById("btnEliminarContratoSocios").style.display = 'none';
                document.getElementById("btnActualizarContrato").style.display = 'none';
                document.getElementById("btnGuardarContrato").style.display = 'none';
                document.getElementById("GuardarTraspaso").style.display = '';

                if ($('#hdFlagPrimeraVezClickLiTranseferencia').val() == 0) {
                    $('#hdFlagPrimeraVezClickLiTranseferencia').val("1");
                    listaTipoContratoSerieTraspaso();
                    listaVendedoresTraspaso();
                    listaAsesoresVentasTraspaso();
                }
                var CodigoSocio = $('#txtCodigo').val() == '' ? '0' : $('#txtCodigo').val();
                if (CodigoSocio != 0) {
                    ListarMembresiaTraspaso(CodigoSocio);
                }
            });

            $('#btnNuevoContrato').click(function () {

                document.getElementById("btnGuardarContrato").style.display = '';

                document.getElementById("btnEliminarContratoSocios").style.display = 'none';
                document.getElementById("btnActualizarContrato").style.display = 'none';
                document.getElementById("GuardarTraspaso").style.display = 'none';
                $('#divTraspaso').hide('fast');
                $('#divContratos').show('fast');

                document.getElementById("divCuotasPago").style.display = '';
                $("#gridCuotasContrato tbody").empty();
                $('#gridCuotasContrato tr:not(:first-child)').slice(1).remove();
                $('#gridCuotasContrato tbody tr').each(function () {
                    $(this).remove();
                });
                var count = 0;
                $('#gridContratos tbody tr').each(function () {
                    count += 1;
                });
                if (count > 0) {
                    var fechaFin = $('#hdTipoFechaFinContrato').val();
                    var fechaFinDia = fechaFin.split('/')[0];
                    var fechaFinMes = fechaFin.split('/')[1];
                    var fechaFinAnio = fechaFin.split('/')[2];
                    var hoy = new Date(); //DIA ACTUAL
                    var mm = hoy.getMonth() + 1; //MES ACTUAL
                    var yyyy = hoy.getFullYear(); //AÑO ACTUAL
                    var Newmm = 0;
                    var fechaConvertGrid = fechaFinAnio + fechaFinMes;

                    if (mm >= 0 && mm < 10) {
                        Newmm = 0 + '' + mm;
                    } else {
                        Newmm = mm;
                    }

                    var fechaConvert = yyyy + '' + Newmm;

                    if (fechaFinMes >= mm && fechaFinAnio >= yyyy) { //RENOVACION
                        $("#ddlTipoIngresoMembresia").data("kendoDropDownList").select(1); ///select es por index del combo
                        $("#ddlOrigenContrato").data("kendoDropDownList").select(1);
                    } else if (fechaConvertGrid < fechaConvert) { //  aqui jugar con reinscripcion e inactivo
                        var todayDate = new Date();
                        var fechaCompletaGrid = fechaFinAnio + '-' + fechaFinMes + '-' + fechaFinDia;
                        var ultimoDiaMesAnterior = new Date(todayDate.getFullYear(), (todayDate.getMonth() - 1) + 1, 0);

                        //alert('fechafin: ' + fechaCompletaGrid.toString() + 'fechafin: ' + ultimoDiaMesAnterior.toString());

                        //alert('dias: ' + calcularDiasEntre2Fechas(fechaCompletaGrid.toString(), ultimoDiaMesAnterior.toString()));
                        if (calcularDiasEntre2Fechas(fechaCompletaGrid.toString(), ultimoDiaMesAnterior.toString()) <= 60) {
                            //REINSCRIPCION
                            $("#ddlTipoIngresoMembresia").data("kendoDropDownList").select(2);
                            $("#ddlOrigenContrato").data("kendoDropDownList").select(2);
                        } else if (calcularDiasEntre2Fechas(fechaCompletaGrid.toString(), ultimoDiaMesAnterior.toString()) > 60) {
                            //INACTIVO YA NO EXISTE SEGUN HECTOR TENA
                            //REINSCRIPCION
                            $("#ddlTipoIngresoMembresia").data("kendoDropDownList").select(2);
                            $("#ddlOrigenContrato").data("kendoDropDownList").select(2);
                        }

                    }
                    //else {
                    //    $("#ddlTipoIngresoMembresia").data("kendoDropDownList").select(0);
                    //    $("#ddlOrigenContrato").data("kendoDropDownList").select(0);
                    //}
                } else {
                    //WALKING NUEVO
                    // 1	walking
                    // 2	Renovacion
                    // 3	Reinscripcion
                    // 4	Invitado
                    // 5	Referido
                    // 6	ll.Entrante
                    // 7	Facebook
                    if ($('#hdCodigoOrigenMembresia').val() != '') {
                        $("#ddlOrigenContrato").data("kendoDropDownList").value($('#hdCodigoOrigenMembresia').val());
                    } else {
                        $("#ddlTipoIngresoMembresia").data("kendoDropDownList").select(0);
                        $("#ddlOrigenContrato").data("kendoDropDownList").select(0);
                    }

                }
                LimpiarMenbresiaContrato();
            });

            $('#btnActualizarContrato').click(function () {
                var MontoTotalGrillaContrato = $('#hdMontoTotalGrillaContrato').val();
                var Costo = $('#txtCosto').val();
                if (parseFloat(Costo) >= parseFloat(MontoTotalGrillaContrato)) {
                    $('#myModalConfirmActualizarContrato').modal("show");
                } else {
                    $.bootstrapGrowl("No se puede actualizar a un precio menor del pago, anule la  venta.", { type: 'primary', width: 'auto' });
                }
            });

            $('#btnNoActualizarContrato').click(function () {
                document.getElementById("myModalConfirmActualizarContrato").style.display = 'none';
            });

            $('#DivCerrarConfirmActualizarContrato').click(function () {
                document.getElementById("myModalConfirmActualizarContrato").style.display = 'none';
            });

            $('#btnSiActualizarContrato').click(function () {
                var validator = true;
                var v_paquete = $('#ddlPaqueteContrato').data("kendoDropDownList").value();

                if (v_paquete == 0) {
                    validator = false;
                    $.bootstrapGrowl("Debe seleccionar un Paquete ", { type: 'danger', width: 'auto' });
                }

                //var CodigoUnidadNegocio = $("#hdCodigoUnidadNegocio").val();

                //if ($('#hdAccionContrato').val() == 'N') {
                //    if (CodigoUnidadNegocio != 44) {
                //        var ddlAsesorVentas = $('#ddlAsesorVentas').data("kendoDropDownList").value();
                //        if (ddlAsesorVentas == 'Ninguno') {
                //            validator = false;
                //            $('#validatorddlAsesorVentas').addClass('borderValidar');
                //            $.bootstrapGrowl("Debe seleccionar el vendedor ", { type: 'danger', width: 'auto' });
                //        } else {
                //            $('#validatorddlAsesorVentas').removeClass('borderValidar');
                //        }
                //    }
                //}

                if (validator == true) {
                    GuardarMembresiaContrato();
                }
            });


            //guardar membresia
            $('#btnGuardarContrato').click(function () {

                if ($('#txtCodigo').val() == 0) {
                    $.bootstrapGrowl(" Debe buscar ó registrar un socio", { type: 'success', width: 'auto' });
                } else {
                    var CongelamientoVigente = $('#hdFrezenDisponibles').val();
                    var validator = true;
                    if (!$('#chkEstadoContrato').is(':checked')) {
                        if (CongelamientoVigente == 0) {
                            validator = false;
                            $.bootstrapGrowl("Debe seleccionar la opción Congelar que esta en el menu de la membresía.", { type: 'danger', width: 'auto' });
                            $('#chkEstadoContrato').prop('checked', true);
                            document.getElementById("tdDiasFreezing").style.display = 'none';
                            document.getElementById("tdFechaFreezing").style.display = 'none';
                            document.getElementById("tdFechaFreezingFin").style.display = 'none';
                        }
                    }
                    var v_paquete = $('#ddlPaqueteContrato').data("kendoDropDownList").value();
                    if (v_paquete == 0) {
                        validator = false;
                        $.bootstrapGrowl("Debe seleccionar un Paquete ", { type: 'danger', width: 'auto' });
                    }

                    var ddlAsesorVentas = $('#ddlAsesorVentas').data("kendoDropDownList").value();
                    if (ddlAsesorVentas == 'Ninguno') {
                        validator = false;
                        $.bootstrapGrowl("Debe seleccionar el vendedor ", { type: 'danger', width: 'auto' });
                    }

                    if (validator == true) {
                        GuardarMembresiaContrato();
                    }
                }
            });

            $('#btnEliminarContratoSocios').click(function () {
                $('#myModalConfirmContrato').show('fast');
            });

            $('#btnNoContrato').click(function () {
                $('#myModalConfirmContrato').hide('fast');
            });

            $('#DivCerrarConfirmContrato').click(function () {
                $('#myModalConfirmContrato').hide('fast');
            });

            $('#btnSiContrato').click(function () {
                $('button[type="button"]').attr("disabled", true);
                var cod = $('#hdCodigoCodigoMenbresiaPago').val();
                var codSocio = $('#txtCodigo').val();
                $.ajax({
                    data: '{"codigo":"' + cod + '"}',
                    type: "POST",
                    url: "/operacionesfit/EliminarMembresia",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        document.getElementById("myModalConfirmContrato").style.display = 'none';
                        $.bootstrapGrowl("La membresia fue eliminada correctamente.", { type: 'danger', width: 'auto' });
                        ListarMembresiaContratos(codSocio);
                    }, complete: function () {

                        $('button[type="button"]').attr("disabled", false);
                    }
                });
            });

            $('#cerrarCuotas').click(function () {
                $('#myModalCuotas').hide('fast');
            });

            $('#btnCuotaPago').click(function (e) {
                var codigoSocio = $('#txtCodigo').val();
                var monto = $('#txtMontoCuotaModal').val();
                var codigoMembresia = $('#hdCodMembresiaCuotas').val();
                if (codigoSocio == 0) {
                    $.bootstrapGrowl("Debe buscar o agregar un cliente.", { type: 'danger', width: 'auto' });
                } else if (codigoMembresia == "") {
                    $.bootstrapGrowl("Falta seleccionar una membresia del cliente.", { type: 'danger', width: 'auto' });
                } else {
                    if (monto == "") {
                        $.bootstrapGrowl("Falta ingresar el monto de la cuota", { type: 'danger', width: 'auto' });
                    } else {
                        GuardarCuota();
                    }
                }
            });

            $('#txtFechaInicioContrato').kendoDatePicker({
                change: function () {
                    var codigoPaquete = $("#ddlPaqueteContrato").data('kendoDropDownList').value();
                    BuscarPaqueteChangueSinAfectarCosto(codigoPaquete);
                }
            });

            $('#txtFechaFinContrato').kendoDatePicker();

            $('#ddlTipoContratoSerie').change(function () {
                var v_tipContrato = $(this).val();
                document.getElementById("txtKeyTipoContrato").value = v_tipContrato;
                generarSerieComprobanteMatricula(v_tipContrato);
            });

            $("#lblTipoDocumento").html("Dni");

            $('#ddlTipoDescuento').kendoDropDownList({
                change: function () {
                    var tipoDescuento = $("#ddlTipoDescuento").data('kendoDropDownList').value();
                    var ocultoPrecio = $('#hdCodigoCosto').val();
                    if (tipoDescuento == 0) {
                        $('#txtCosto').val(ocultoPrecio);
                        $('#txtMontoDescuento').val(0);
                        $('#txtPorDescuento').val(0);
                        document.getElementById("imgDesPorcentaje").style.display = 'none';
                        document.getElementById("txtMontoDescuento").disabled = true;
                    } else if (tipoDescuento == 1) {
                        $('#txtCosto').val(ocultoPrecio);
                        $('#txtMontoDescuento').val(0);
                        $('#txtPorDescuento').val(0);
                        document.getElementById("imgDesPorcentaje").style.display = 'none';
                        document.getElementById("txtMontoDescuento").disabled = false;
                    }
                    else if (tipoDescuento == 2) {
                        $('#txtCosto').val(ocultoPrecio);
                        $('#txtMontoDescuento').val(0);
                        $('#txtPorDescuento').val(0);
                        document.getElementById("imgDesPorcentaje").style.display = '';
                        document.getElementById("txtMontoDescuento").disabled = true;
                    }
                }
            });

            $('#txtFechaFreezing').kendoDatePicker({
                change: function () {
                    var todayDate = new Date();
                    var fech = $("#txtFechaFreezing").data('kendoDatePicker').value();
                    $('#chkEstadoContrato').prop('checked', false);
                    if ((Date.parse(fech)) < (Date.parse(todayDate))) {
                        $('#txtFechaFreezing').data("kendoDatePicker").value(todayDate);
                        var NroCongelar = $('#txtNroDiasCongelar').val() == '' ? 0 : $('#txtNroDiasCongelar').val();
                        var fechaInicioFreezing = $('#txtFechaFreezing').val(); //dd MM yyyy
                        var dateInicioFreezing = sumaFechaDia(parseInt(NroCongelar), fechaInicioFreezing);
                        $('#txtFechaFreezingFin').data("kendoDatePicker").value(dateInicioFreezing);
                        $('#chkEstadoContrato').prop('checked', false);
                    } else if ((Date.parse(fech)) == (Date.parse(todayDate))) {
                        $('#chkEstadoContrato').prop('checked', false);
                    } else if ((Date.parse(fech)) > (Date.parse(todayDate))) {
                        $('#chkEstadoContrato').prop('checked', true);
                        var NroCongelar = $('#txtNroDiasCongelar').val() == '' ? 0 : $('#txtNroDiasCongelar').val();
                        var fechaInicioFreezing = $('#txtFechaFreezing').val(); //dd MM yyyy
                        var dateInicioFreezing = sumaFechaDia(parseInt(NroCongelar), fechaInicioFreezing);
                        $('#txtFechaFreezingFin').data("kendoDatePicker").value(dateInicioFreezing);
                    }
                }
            });

            $('#txtFechaFreezingFin').kendoDatePicker({
                change: function () {
                    var todayDate = new Date();
                    var fech = $("#txtFechaFreezingFin").data('kendoDatePicker').value();
                    if ((Date.parse(fech)) <= (Date.parse(todayDate))) {
                        $('#txtFechaFreezingFin').data("kendoDatePicker").value(todayDate);
                        $.bootstrapGrowl("La Fecha Freezing Programada Fin no puede ser menor igual a la de hoy.", { type: 'primary', width: 'auto' });
                    } else if ((Date.parse(fech)) == (Date.parse(todayDate))) {

                    } else if ((Date.parse(fech)) > (Date.parse(todayDate))) {

                    }
                }
            });

            //PASO 3
            //$("#gridCuotasContrato").kendoGrid({
            //    sortable: false
            //});

            var todayDate = new Date();
            $("#txtFechaCuota").kendoDatePicker();
            $('#txtFechaCuota').data("kendoDatePicker").value(todayDate);
            $("#FechaCuotaModal").kendoDatePicker();
            $('#FechaCuotaModal').data("kendoDatePicker").value(todayDate);

            $('#txtTotalPagado').click(function () {
                $('#txtTotalPagado').select();
            });

            $('#txtTotalPagado').keyup(function () {

                var total = $('#lblTotal').val();
                var TotalPagando = $('#txtTotalPagado').val();
                var debe = parseFloat(total) - parseFloat(TotalPagando);
                $('#lblTotalDebe').val(debe.toFixed(2));
                $('#TotalDebeMembresia_Ticket').html(debe.toFixed(2));

                if (debe.toFixed(2) < 0) {

                    document.getElementById('modalErrorContrato').style.display = 'block';
                    $('#lblMensajeErrorContrato').html('La membresia que has seleccionado no tiene deuda pendiente, seleccione otra membresia con deuda pendiente.');
                    $('#txtTotalPagado').val('0.00');
                }

                calcularTotalNeto();
            });

            $('#btnAgregarCuota').click(function () {
                var Monto = $('#txtMontoCuota').val();
                if (Monto == "") {
                    $.bootstrapGrowl("Ingrese el monto de la cuota.", { type: 'danger', width: 'auto' });
                } else {
                    agregarCuotasContrato();
                }
            });

            $('#lblRealizarPago').click(function () {

                $('button[type="button"]').attr("disabled", true);
                document.getElementById('loadMe').style.display = 'block';

                var codigoTipoDocumento = "";
                $('input[name="orderBoxComprobante[]"]:checked').each(function () {
                    codigoTipoDocumento += $(this).val();
                });
                var codigoSubTipoDocumento = $('#ddlSubTipoDocumento').data("kendoDropDownList").value();
                var nroDocumento = $('#txtNroDocumento').val();

                var aporte = $('#txtTotalPagado').val();
                var total = $('#lblTotal').val();

                var totalDeuda = $('#lblTotalDebe').val() == '' ? 0 : parseFloat($('#lblTotalDebe').val()).toFixed(2);
                var Acuenta = $('#hdMontoTal').val() == '' ? 0 : parseFloat($('#hdMontoTal').val()).toFixed(2);
                var TotalCuota = $('#hdTotalCuota').val() == '' ? 0 : parseFloat($('#hdTotalCuota').val()).toFixed(2);
                var count = 0;

                var IdTipoDocumentoIdentidad = $('#ddlTipoDocumento').data('kendoDropDownList').value();
                var TieneFacturacionElectronica = $('#hdTieneFacturacionElectronica').prop('checked');
                var RucEmpresa = $('#txtNroDocumentoContribuyente').val().trim();
                var NombreEmpresa = $('#txtNombreEmpresa').val().trim();
                var DireccionFiscalEmpresa = $('#txtDireccionFiscalEmpresa').val().trim();

                $('#gridContratos tbody tr').each(function () {
                    count += 1;
                });

                if (count > 0) {
                    if ($('#txtCodigo').val() == 0) {
                        document.getElementById('modalErrorContrato').style.display = 'block';
                        $('#lblMensajeErrorContrato').html('Debe buscar ó registrar un cliente, es importante para ingresar una membresia.');
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';

                    }
                    else if ((IdTipoDocumentoIdentidad == '' || IdTipoDocumentoIdentidad == '0') && codigoTipoDocumento == 2)/*Validacion Cliente para Boletas*/ {
                        document.getElementById('modalErrorContrato').style.display = 'block';
                        $('#lblMensajeErrorContrato').html('Para emitir boletas el cliente debe tener tipo de documento de identidad.');
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';
                    }
                    else if (TieneFacturacionElectronica == true && codigoTipoDocumento == 1 && RucEmpresa == '') {
                        document.getElementById('modalErrorContrato').style.display = 'block';
                        $('#lblMensajeErrorContrato').html('Para emitir factura electronica se requiere ingresar RUC.');
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';
                    }
                    else if (TieneFacturacionElectronica == true && codigoTipoDocumento == 1 && NombreEmpresa == '') {
                        document.getElementById('modalErrorContrato').style.display = 'block';
                        $('#lblMensajeErrorContrato').html('Para emitir factura electronica se requiere ingresar Razon Social de la Empresa');
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';
                    }
                    else if (TieneFacturacionElectronica == true && codigoTipoDocumento == 1 && DireccionFiscalEmpresa == '') {
                        document.getElementById('modalErrorContrato').style.display = 'block';
                        $('#lblMensajeErrorContrato').html('Para emitir factura electronica se requiere ingresar Direccion fiscal de la empresa.');
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';
                    }
                    else {
                        if (total > 0) {
                            if (parseFloat(aporte) == parseFloat(total)) {

                                if (TotalCuota > 0) {
                                    document.getElementById('modalErrorContrato').style.display = 'block';
                                    $('#lblMensajeErrorContrato').html('No es necesario agendar cuotas, borre las nuevas cuotas por favor.');
                                    $('button[type="button"]').attr("disabled", false);
                                    document.getElementById('loadMe').style.display = 'none';

                                } else {

                                    uspValidarNroComprobante(codigoTipoDocumento, codigoSubTipoDocumento, nroDocumento);
                                }

                            } else if (parseFloat(aporte) > parseFloat(total)) {

                                document.getElementById('modalErrorContrato').style.display = 'block';
                                $('#lblMensajeErrorContrato').html('El monto que estas ingresando no puede ser mayor al total de la venta.');
                                $('button[type="button"]').attr("disabled", false);
                                document.getElementById('loadMe').style.display = 'none';

                            } else if (aporte > 0 && parseFloat(aporte) < parseFloat(total)) {
                                if (Acuenta == 0) {
                                    if (TotalCuota == totalDeuda) {

                                        uspValidarNroComprobante(codigoTipoDocumento, codigoSubTipoDocumento, nroDocumento);

                                    } else if (TotalCuota > 0 && TotalCuota < totalDeuda) {

                                        document.getElementById('modalErrorContrato').style.display = 'block';
                                        $('#lblMensajeErrorContrato').html('El monto de las cuotas debe sumar igua al total de la deuda.');
                                        $('button[type="button"]').attr("disabled", false);
                                        document.getElementById('loadMe').style.display = 'none';

                                    } else if (TotalCuota > 0 && TotalCuota > totalDeuda) {
                                        document.getElementById('modalErrorContrato').style.display = 'block';
                                        $('#lblMensajeErrorContrato').html('El monto de las cuotas debe sumar igua al total de la deuda.');
                                        $('button[type="button"]').attr("disabled", false);
                                        document.getElementById('loadMe').style.display = 'none';

                                    } else {

                                        document.getElementById('modalErrorContrato').style.display = 'block';
                                        $('#lblMensajeErrorContrato').html('Debe agendar las cuotas de los proximos pagos.');
                                        $('button[type="button"]').attr("disabled", false);
                                        document.getElementById('loadMe').style.display = 'none';

                                    }
                                } else if (Acuenta > 0) {

                                    uspValidarNroComprobante(codigoTipoDocumento, codigoSubTipoDocumento, nroDocumento);

                                }
                            } else {

                                document.getElementById('modalErrorContrato').style.display = 'block';
                                $('#lblMensajeErrorContrato').html('Los datos del pago son incorrectos , verifique el "a cuenta" a pagar.');
                                $('button[type="button"]').attr("disabled", false);
                                document.getElementById('loadMe').style.display = 'none';
                            }
                        } else {

                            document.getElementById('modalErrorContrato').style.display = 'block';
                            $('#lblMensajeErrorContrato').html('La membresia que has seleccionado no tiene deuda pendiente, cuando realizas una membresia con precio 0 ya no es necesario ingresar un pago.');
                            $('button[type="button"]').attr("disabled", false);
                            document.getElementById('loadMe').style.display = 'none';
                        }
                    }
                } else {

                    $('button[type="button"]').attr("disabled", false);
                    document.getElementById('loadMe').style.display = 'none';
                    document.getElementById('modalErrorContrato').style.display = 'block';
                    $('#lblMensajeErrorContrato').html('No hay membresias a pagar, parece que no has agregado una membresia al cliente ó falta buscar a un cliente, veríficalo por favor.');

                }
            });









            $('#cerrarmyModalVerPagos').click(function () {
                document.getElementById("myModalVerPagos").style.display = 'none';
            });

            $('#btnNoAnularPago,#DivCerrarConfirmAnularPago').click(function () {
                $("#myModalConfirmAnularPago").hide("fast");
            });

            $('#btnSiAnularPago').click(function () {

                if ($('#txtMotivo_AnularPagoMembresia').val() == '') {
                    alert("Falta ingresar el motivo.");
                    return;
                } else if ($('#txtValidarClave_AnularPagoMembresia').val() == '') {
                    alert("Falta ingresar la clave del responsable.");
                    return;
                }

                uspValidarUsuario_AnularPagoMembresia();

            });


            //TRASPASO
            var todayDate = new Date();
            $("#txtFechaInicioTraspaso").kendoDatePicker();
            $("#txtFechaFinTraspaso").kendoDatePicker();
            $('#txtFechaInicioTraspaso').data("kendoDatePicker").value(todayDate);
            $('#txtFechaFinTraspaso').data("kendoDatePicker").value(todayDate);
            $('#txtFechaFreezingTraspaso').kendoDatePicker();
            $('#txtFechaFreezingFinTraspaso').kendoDatePicker();
            $('#txtFechaFreezingTraspaso').data("kendoDatePicker").value(todayDate);
            $('#txtFechaFreezingFinTraspaso').data("kendoDatePicker").value(todayDate);

            $('#ddlTipoContratoSerieTraspaso').change(function () {
                var v_tipContrato = $(this).val();
                if (v_tipContrato > 1) {
                } else {
                }
                generarSerieComprobanteMatriculaTraspaso(v_tipContrato);
            });

            $('#txtBuscarCodigoClienteTransferir').click(function () {
                $('#txtBuscarCodigoClienteTransferir').select();
            });

            $('#txtBuscarCodigoClienteTransferir').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarNombresClienteTransferir').val('');
                    $('#txtBuscarApellidosClienteTransferir').val('');
                    $('#txtBuscarDniClienteTransferir').val('');
                } else {

                }
            });

            $('#txtBuscarNombresClienteTransferir').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarCodigoClienteTransferir').val('');
                    $('#txtBuscarDniClienteTransferir').val('');
                } else {

                }
            });

            $('#txtBuscarApellidosClienteTransferir').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarCodigoClienteTransferir').val('');
                    $('#txtBuscarDniClienteTransferir').val('');
                } else {

                }
            });

            $('#txtBuscarDniClienteTransferir').keyup(function () {
                if ($(this).val().length > 0) {
                    $('#txtBuscarNombresClienteTransferir').val('');
                    $('#txtBuscarApellidosClienteTransferir').val('');
                    $('#txtBuscarCodigoClienteTransferir').val('');
                } else {

                }
            });

            $('#txtBuscarDniClienteTransferir').click(function () {
                $('#txtBuscarDniClienteTransferir').select();
            });

            $('#GuardarTraspaso').click(function () {
                if (validadorTraslado()) {
                    $('#myModalConfirmTraspaso').show('fast');
                } else {
                    return false;
                }
            });

            $('#DivCerrarmyModalConfirmTraspaso').click(function () {
                $('#myModalConfirmTraspaso').hide('fast');
            });

            $('#btnNoConfirmTraspaso').click(function () {
                $('#myModalConfirmTraspaso').hide('fast');
            });

            $('#btnSiConfirmTraspaso').click(function () {
                GuardarTraspasoMembresia();
            });

        });


        function GuardarCuota() {

            $('button[type="button"]').attr("disabled", true);
            document.getElementById('loadMe').style.display = 'block';
            var codigoMembresia = $('#hdCodMembresiaCuotas').val();
            var fecha = kendo.toString($("#FechaCuotaModal").data('kendoDatePicker').value(), 'MM/dd/yyyy');
            var monto = $('#txtMontoCuotaModal').val();

            $.ajax({
                data: '{"codigoMembresia":"' + codigoMembresia + '","fecha":"' + fecha + '","monto":"' + monto + '"}',
                type: "POST",
                url: "/operacionesfit/GuardarCuota",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    $('button[type="button"]').attr("disabled", false);
                    document.getElementById('loadMe').style.display = 'none';
                    $.bootstrapGrowl("Los datos se han guardado correctamente.", { type: 'success', width: 'auto' });
                    $('#txtMontoCuotaModal').val('');
                    var todayDate = new Date();
                    $('#FechaCuotaModal').data("kendoDatePicker").value(todayDate);

                }, complete: function () {
                    var codigoMembresia = $('#hdCodMembresiaCuotas').val();
                    ListarCuota(codigoMembresia);
                }
            });

        }


        function calcularDiasEntre2Fechas(Xfechaini, Xfechafin) {
            var fechaini = new Date(Xfechaini);
            var fechafin = new Date(Xfechafin);
            var diasdif = fechafin.getTime() - fechaini.getTime();
            var contdias = Math.round(diasdif / (1000 * 60 * 60 * 24));
            return contdias;
        }

        //PASO 1
        function NuevoContratos() {

            //LimpiarNuevoClienteContrato();
            listaVendedoresContrato();
            listaAsesoresVentas();

            listaResponsablePagoContrato();
            ListaPaquetesContrato();
            listaTipoContratoSerie();

            Listar_TipoIngreso();
            ListaTipoDocumentoContrato();
            LimpiarContratoPagos();
            var todayDate = new Date();
            $('#txtFechaSalida').kendoDatePicker({
                value: todayDate,
                change: function () {
                    var fechaInicioFiltro = $("#txtFechaSalida").data('kendoDatePicker').value();

                    var hoy = new Date();
                    if (hoy < fechaInicioFiltro) {
                        $('#txtFechaSalida').data("kendoDatePicker").value(hoy);
                        $.bootstrapGrowl("La fecha no puede ser mayor al dia actual.", { type: 'primary', width: 'auto' });
                    }

                }
            });

            $("#txtHoraInicioMatricula").kendoTimePicker({
                format: "hh:mm tt",
                parseFormats: ["HH:mm:ss"],
                min: new Date(1950, 0, 1, 4, 0, 0),
                max: new Date(2060, 11, 31, 23, 0, 0),
                value: "04:00 AM"
            });

            $("#txtHoraFinMatricula").kendoTimePicker({
                format: "hh:mm tt",
                parseFormats: ["HH:mm:ss"],
                min: new Date(1950, 0, 1, 6, 0, 0),
                max: new Date(2060, 11, 31, 23, 0, 0),
                value: "11:50 PM"
            });

            //if ($("#hdCodigoUnidadNegocio").val() != 16 && $("#hdCodigoUnidadNegocio").val() != 89 && $("#hdCodigoUnidadNegocio").val() != 92 && $("#hdCodigoUnidadNegocio").val() != 51 && $("#hdCodigoUnidadNegocio").val() != 107) {
            //    if ($('#hdCodigoPerfil').val() == 1 || $('#hdCodigoPerfil').val() == 13) {
            //        $('#txtFechaSalida').data("kendoDatePicker").enable();
            //        $('#txtCosto').removeAttr('disabled');
            //    } else {
            //        $('#txtFechaSalida').data("kendoDatePicker").enable(false);
            //        $('#txtCosto').attr('disabled', 'disabled');
            //    }
            //}

            //if ($('#hdCodigoPerfil').val() == 1 || $('#hdCodigoPerfil').val() == 13) {
            //    $('#btnCuotaPago').parent('td').parent('tr').css('display', 'block');
            //    $('#btnCuotaPago').parent('td').parent('tr').find('td:last-child').find('img').css('display', 'none');
            //    $('#btnCuotaPago').css('display', 'block');
            //} else {
            //    $('#btnCuotaPago').parent('td').parent('tr').css('display', 'none');
            //    $('#btnCuotaPago').parent('td').parent('tr').find('td:last-child').find('img').css('display', 'none');
            //}

        }

        function uspBuscarUbicacionesDefecto() {

            $.ajax({
                type: "POST",
                url: "/operacionesfit/uspBuscarUbicacionesDefecto",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg.Ubicaciones != '') {
                        $('#hdUbicaciones').val(msg.Ubicaciones);
                    }

                }, complete: function () {
                    listarDepartamento();
                }
            });
        }


        function listarDepartamento() {

            var ddlDepartamento = $("#ddlDepartamento").kendoDropDownList({
                optionLabel: "SELECCIONE DEPARTAMENTO",
                dataTextField: "Departamento",
                dataValueField: "Ubicaciones",
                dataSource: {
                    transport: {
                        read: function (options) {
                            var tipo = 2
                            var ubigeo = "0010000"; //codigo de Peru

                            var CodigoPais = $('#hdCodigoPais').val();
                            //alert(CodigoPais);
                            if (CodigoPais == 593) {
                                ubigeo = "0020000";
                            } else if (CodigoPais == 51) {
                                ubigeo = "0010000";
                            } else if (CodigoPais == 57) {
                                ubigeo = "0030000";
                            } else {
                                ubigeo = "0010000";
                            }

                            var buscador = '';
                            $.ajax({
                                data: '{"tipo":"' + tipo + '","ubigeo":"' + ubigeo + '","buscador":"' + buscador + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarUbicaciones",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                    if ($('#hdUbicaciones').val() == '') {
                                        $("#ddlProvincia").kendoDropDownList();
                                        $("#ddlDistrito").kendoDropDownList();
                                    }
                                    // listarProvincia(ddlDepartamento.value());
                                }, complete: function () {
                                    if ($('#hdUbicaciones').val() != '') {
                                        $("#ddlDepartamento").data("kendoDropDownList").value($('#hdUbicaciones').val().substring(0, 5) + '0000');
                                        listarProvincia($('#hdUbicaciones').val().substring(0, 5) + '0000', 0);
                                    } else {
                                        $("#ddlDepartamento").data("kendoDropDownList").select(0);
                                        $("#ddlProvincia").data("kendoDropDownList").select(0);
                                        $("#ddlDistrito").data("kendoDropDownList").select(0);
                                    }
                                }
                            });
                        }
                    }
                }, change: function () {

                    listarProvincia(ddlDepartamento.value());
                }
            }).data("kendoDropDownList");
        }

        function listarProvincia(departamento) {
            var ddlProvincia = $("#ddlProvincia").kendoDropDownList({
                optionLabel: "SELECCIONE PROVINCIA",
                dataTextField: "Provincia",
                dataValueField: "Ubicaciones",
                dataSource: {
                    transport: {
                        read: function (options) {
                            var tipo = 3
                            var ubigeo = departamento;
                            var buscador = '';
                            $.ajax({
                                data: '{"tipo":"' + tipo + '","ubigeo":"' + ubigeo + '","buscador":"' + buscador + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarUbicaciones",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                    if ($('#hdUbicaciones').val() == '') {
                                        $("#ddlDistrito").kendoDropDownList();
                                    }
                                    //listarDistrito(0, 0);
                                }, complete: function () {

                                    if ($('#hdUbicaciones').val() != '') {
                                        ddlProvincia.value($('#hdUbicaciones').val().substring(0, 7) + '00');
                                        listarDistrito($('#hdUbicaciones').val().substring(0, 7) + '00', 0);
                                    } else {
                                        $("#ddlProvincia").data("kendoDropDownList").select(0);
                                        $("#ddlDistrito").data("kendoDropDownList").select(0);
                                    }

                                    //if (provinciaDefoult != undefined) {
                                    //    if (provinciaDefoult != 'undefined') {
                                    //        if (provinciaDefoult != '') {
                                    //            ddlProvincia.value(provinciaDefoult.substring(0, 7) + '00');
                                    //            listarDistrito(provinciaDefoult.substring(0, 7) + '00', provinciaDefoult);
                                    //        }

                                    //    }
                                    //}
                                }
                            });
                        }
                    }
                }, change: function () {
                    listarDistrito(ddlProvincia.value());
                }
            }).data("kendoDropDownList");
        }

        function listarDistrito(provincia, DistritoDefoult) {
            var ddlDistrito = $("#ddlDistrito").kendoDropDownList({
                optionLabel: "SELECCIONE DISTRITO",
                dataTextField: "Distrito",
                dataValueField: "Ubicaciones",
                dataSource: {
                    transport: {
                        read: function (options) {
                            var tipo = 4
                            var ubigeo = provincia;
                            var buscador = '';
                            $.ajax({
                                data: '{"tipo":"' + tipo + '","ubigeo":"' + ubigeo + '","buscador":"' + buscador + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarUbicaciones",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                }, complete: function () {

                                    if ($('#hdUbicaciones').val() != '') {
                                        ddlDistrito.value($('#hdUbicaciones').val());
                                    } else {
                                        $("#ddlDistrito").data("kendoDropDownList").select(0);
                                    }

                                    //if ($('#txtCodigo').val() != 0) {
                                    //    if (DistritoDefoult != '') {
                                    //        ddlDistrito.value(DistritoDefoult);
                                    //    }
                                    //}

                                }
                            });
                        }
                    }
                }, change: function () {
                    $('#hdUbicaciones').val(ddlDistrito.value());
                }
            }).data("kendoDropDownList");
        }

        function LimpiarNuevoClienteContrato() {
            $('#txtNombre').focus();
            $('#hdURLFoto').val('/Content/app/img/img0.jpg');
            $('#imgFoto').attr('src', '/Content/app/img/img0.jpg');
            $('#txtCodigo').val('0');
            $('#txtNombre').val('');
            $('#txtApellido').val('');
            $('#txtDni').val('');
            $('#txtCorreo').val('');
            $('#txtFechaNacimiento').val('');
            $('#cboGenero').kendoDropDownList();
            $('#cboEstadoCivil').kendoDropDownList();
            $('#cboGenero').data("kendoDropDownList").select(0);
            $("#ddlTipoDocumento").data("kendoDropDownList").select(0);
            $('#txtTelefono').val('');
            $('#txtCelular').val('');
            $('#txtUrlFacebook').val('');
            $('#txtDireccion').val('');
            $('#txtDistrito').val('');
            $('#chkEstado').prop('checked', true);
            $('#txtOcupacion').val('');
            $('#txtDireccionTrabajo').val('');
            $('#txtTelefonoTrabajo').val('');
            $('#txtFechaCreacion').val('');

            $('#chkHijos').prop('checked', false);
            $("#cboEstadoCivil").data("kendoDropDownList").select(0);
            $("#txtBuscarPorCodigoClienteContrato").val('');
            $("#txtBuscarPorNombreClienteContrato").val('');
            $("#txtBuscarPorApellidoClienteContrato").val('');
            $("#txtBuscarPorDniClienteContrato").val('');
            limpiarValidacion();
            document.getElementById("btnGuardar").style.display = '';
            document.getElementById("btnEliminarClienteContrato").style.display = 'none';
            document.getElementById("btnActualizarClientesContrato").style.display = 'none';
            uspBuscarUbicacionesDefecto();

            var CodigoPerfil = getCookie('_CodigoPerfil_Business');
            if (CodigoPerfil == 5) {

                $("#txtNombre").removeAttr('disabled');
                $("#txtApellido").removeAttr('disabled');
                $("#txtDni").removeAttr('disabled');
                $("#txtDireccion").removeAttr('disabled');
                $("#txtDistrito").removeAttr('disabled');

                $("#txtNombre").css("background-color", "#fff");
                $("#txtApellido").css("background-color", "#fff");
                $("#txtDni").css("background-color", "#fff");
                $("#txtDireccion").css("background-color", "#fff");
                $("#txtDistrito").css("background-color", "#fff");

            }

        }

        function limpiarValidacion() {
            $('#txtNombre').removeClass('borderValidar');
            $('#txtApellido').removeClass('borderValidar');
            $('#txtDni').removeClass('borderValidar');
            $('#txtCelular').removeClass('borderValidar');
        }


        //PASO 2
        function listaVendedoresContrato() {
            $("#ddlVendedoresContrato").kendoDropDownList({
                dataTextField: "NombreCompleto",
                dataValueField: "NombreCompleto",
                dataSource: {
                    serverFiltering: false,
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/ListarUsuarioContrato",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                    //var User = $('#hdUsuario').val();
                                    $('#ddlVendedoresContrato').data("kendoDropDownList").value();
                                }
                            });
                        }
                    }
                }
            });
        }

        function listaAsesoresVentas() {

            $("#ddlAsesorVentas").kendoDropDownList({
                dataTextField: "NombreCompleto",
                dataValueField: "NombreCompleto",
                dataSource: {
                    serverFiltering: false,
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/ListarAsesorVentas",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                    //var User = $('#hdUsuario').val();
                                    $('#ddlAsesorVentas').data('kendoDropDownList').value();
                                }
                            });
                        }
                    }
                }, change: function () {
                    var ddlAsesorVentas = $('#ddlAsesorVentas').data("kendoDropDownList").value();
                    if (ddlAsesorVentas == 'Ninguno') {

                    } else {

                    }
                }
            }).data("kendoDropDownList");
        }

        function listaResponsablePagoContrato() {

            $("#ddlResponsablePagoContrato").kendoDropDownList({
                filter: "startswith",
                dataTextField: "NombreCompleto",
                dataValueField: "NombreCompleto",
                dataSource: {
                    serverFiltering: true,
                    transport: {
                        read: function (options) {
                            var nombre = "";
                            $.ajax({
                                data: '{"filtro":"' + nombre + '"}',
                                url: "/operacionesfit/SEGListarUsuarioResponsableSuplementos",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                type: "POST",
                                success: function (msg) {
                                    options.success(msg);
                                    //var User = $('#hdUsuario').val();
                                    //$('#ddlResponsablePagoContrato').data('kendoDropDownList').value(User);
                                },
                                error: function (e, a) {

                                }
                            });
                        }
                    }
                }, change: function () {
                    var ddlAsesorVentas = $('#ddlResponsablePagoContrato').data("kendoDropDownList").value();
                    if (ddlAsesorVentas == 'Ninguno') {
                        $('#validatorddlResponsablePagoContrato').addClass('borderValidar');
                    } else {
                        $('#validatorddlResponsablePagoContrato').removeClass('borderValidar');
                    }
                }
            }).data("kendoDropDownList");
        }

        function ListaPaquetesContrato() {
            var ddlPaqueteContrato = $("#ddlPaqueteContrato").kendoDropDownList({
                filter: "startswith",
                dataTextField: "Descripcion",
                dataValueField: "CodigoPaquete",
                template: '<div style="font-size:12px;text-transform:uppercase;"> #:data.DescTipoPaquete# &nbsp:&nbsp #:data.Descripcion# &nbsp <label style="font-size:12px;color:#:data.ColorDesEstado#;"> #:data.DesEstado#</label></div>',
                valueTemplate: '<div style="font-size:12px;text-transform:uppercase;"> #:data.DescTipoPaquete# &nbsp:&nbsp #:data.Descripcion# &nbsp <label style="font-size:12px;color:#:data.ColorDesEstado#;"> #:data.DesEstado#</label></div>',
                dataSource: {
                    serverFiltering: true,
                    transport: {
                        read: function (options) {
                            var flag = $('#hdAccionContrato').val() == 'E' ? 2 : 1;
                            var nombre = $('input[aria-owns="ddlPaqueteContrato_listbox"]').val();
                            $.ajax({
                                data: '{"flag":"' + flag + '","nombre":"' + nombre + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListaPaquetesContrato",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {

                                    options.success(msg);
                                    if (msg == "") {
                                        $.bootstrapGrowl("No hemos encontrado ningún plan.", { type: 'danger', width: 'auto' });
                                    }
                                }
                            });
                        }
                    }
                }, change: function () {
                    if (ddlPaqueteContrato.value() != '') {
                        BuscarPaqueteChangue(ddlPaqueteContrato.value());
                        $('#ddlTipoDescuento').data("kendoDropDownList").select(0);
                        $('#txtMontoDescuento').val('0');
                        document.getElementById("imgDesPorcentaje").style.display = 'none';
                        $('#ddlTipoDescuento').data("kendoDropDownList").enable(true);
                        var tipodocu = $('#ddlTipoDescuento').data("kendoDropDownList").value();
                        if (tipodocu == 1)
                            document.getElementById("txtMontoDescuento").disabled = false;
                    } else {
                    }
                }

            }).data("kendoDropDownList");
        }

        function BuscarPaqueteChangue(codigo) {

            $.ajax({
                data: '{"codigo":"' + codigo + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarPaquete",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    document.getElementById("txtNombreMemTC").value = msg?.Descripcion;

                    var fechaVenc = new Date(parseInt(msg.FechaVencimiento.replace('/Date(', '')));
                    if (new Date() > fechaVenc) {
                        $('#txtFechaInicioContrato').data('kendoDatePicker').value(null);
                        $('#txtFechaFinContrato').data("kendoDatePicker").value(null);
                        $('#txtCosto').val(0);
                        $('#txtNroClases').val(0);
                        $('#txtFrezenDisponibles').val(0);
                        $('#hdFrezenDisponibles').val(0);
                        $('#hdCodigoCosto').val(0);
                        $.bootstrapGrowl("paquete finalizado, seleccione un paquete vigente.", { type: 'danger', width: 'auto' });
                        return;
                    }
                    if (msg.EstadoFecha == 1) {
                        $('#txtFechaInicioContrato').data('kendoDatePicker').value(msg.FechaInicio);
                        $('#txtFechaFinContrato').data("kendoDatePicker").value(msg.FechaVencimiento);
                        $('#txtCosto').val(msg.Costo);
                        $('#txtNroClases').val(msg.valor);
                        $('#txtFrezenDisponibles').val(msg.CongelamientoVigente);
                        $('#hdFrezenDisponibles').val(msg.CongelamientoVigente);
                        $('#hdCodigoCosto').val(msg.Costo);
                    } else {
                        //var nroAumentar = msg.ValorDias_Tiempo;
                        var todayDate = new Date();
                        $('#txtFechaInicioContrato').data('kendoDatePicker').value(todayDate);
                        var fechaHoy = $('#txtFechaInicioContrato').data('kendoDatePicker').value();
                        var date = new Date(fechaHoy.getFullYear(), fechaHoy.getMonth(), fechaHoy.getDate());
                        ////alert('CodigoTipoPaquete: ' + msg.CodigoTipoPaquete);
                        ////alert('valor: ' + msg.valor);
                        ////alert('ValorDias_Tiempo: ' + msg.ValorDias_Tiempo);

                        if (msg.CodigoTipoPaquete == 2) { //EL PLAN ES DE TIPO MEMBRESIA

                            if (msg.EstadoMembresiaInterdiaria) { //ES INTERDIARIO
                                date.setDate(date.getDate() + parseInt(msg.ValorDias_Tiempo));
                            } else {
                                date.setDate(date.getDate() + parseInt(msg.valor));
                            }

                        } else {//EL PLAN ES DE TIPO PERSONALIZADO O NUTRICION
                            date.setDate(date.getDate() + parseInt(msg.ValorDias_Tiempo));
                        }

                        $('#txtFechaFinContrato').data("kendoDatePicker").value(date);
                        $('#txtCosto').val(msg.Costo);
                        $('#txtNroClases').val(msg.valor);
                        $('#txtFrezenDisponibles').val(msg.CongelamientoVigente);
                        $('#hdFrezenDisponibles').val(msg.CongelamientoVigente);
                        $('#hdCodigoCosto').val(msg.Costo);
                    }
                }
            });
        }

        function listaTipoContratoSerie() {

            var ddlTipoContratoSerie = $("#ddlTipoContratoSerie").kendoDropDownList({
                dataTextField: "Descripcion",
                dataValueField: "Codigo",
                dataSource: {
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/ListaTipoContratos",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                },
                                complete: function () {
                                    $("#ddlTipoContratoSerie").data("kendoDropDownList").select(0);
                                    var v_tipContrato = $('#ddlTipoContratoSerie').data("kendoDropDownList").value();

                                    generarSerieComprobanteMatricula(v_tipContrato);

                                }
                            });
                        }
                    }
                }
            }).data("kendoDropDownList");
        }

        function Listar_TipoIngreso() {

            $("#ddlTipoIngresoMembresia").kendoDropDownList({
                dataTextField: "Descripcion",
                dataValueField: "Codigo",
                dataSource: {
                    serverFiltering: false,
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/Listar_TipoIngreso",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                }, complete: function () {
                                    // $("#ddlTipoIngresoMembresia").data("kendoDropDownList").enable(false);
                                    ListarOrigenMembresia_Paso2Contrato();
                                }
                            });
                        }
                    }
                }
            });
        }

        function ListarOrigenMembresia_Paso2Contrato() {

            var ddlTipoAgenda = $("#ddlOrigenContrato").kendoDropDownList({
                dataTextField: "Descripcion",
                dataValueField: "Codigo",
                valueTemplate: '<table><tr><td><span><div style="background:#: data.Color #;-moz-border-radius: 70px; -webkit-border-radius: 70px;border-radius: 70px;width: 10px;height: 10px;margin-top: -3px; "></div></span></td><td><span style="font-size:13px;font-weight:500;margin-top: -3px;">#: data.Descripcion #</span></td></tr></table>',
                template: '<table><tr><td><span><div style="background:#: data.Color #;-moz-border-radius: 70px; -webkit-border-radius: 70px;border-radius: 70px;width: 10px;height: 10px;margin-top: -3px; "></div></span></td><td><span style="font-size:13px;font-weight:500;margin-top: -3px;">#: data.Descripcion #</span></td></tr></table>',
                dataSource: {
                    serverFiltering: true,
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/uspListarTipoAgendaCliente",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                }, complete: function () {
                                    //$("#ddlOrigenContrato").data("kendoDropDownList").enable(false);
                                }
                            });
                        }
                    }
                }, change: function () {

                }
            }).data("kendoDropDownList");
        }

        function generarSerieComprobanteMatricula(tipContrato) {
            $.ajax({
                data: '{"tipoContrato":"' + tipContrato + '"}',
                type: "POST",
                url: "/operacionesfit/ObtenerSerieGenaradoTipoContrato",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $('#txtContrato').val(msg);
                }
            });
        }

        function BuscarPaqueteChangueSinAfectarCosto(codigo) {
            $.ajax({
                data: '{"codigo":"' + codigo + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarPaquete",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg)
                    var nroAumentar = msg.ValorDias_Tiempo;
                    var fechaHoy = $('#txtFechaInicioContrato').data('kendoDatePicker').value();
                    var date = new Date(fechaHoy.getFullYear(), fechaHoy.getMonth(), fechaHoy.getDate());
                    date.setDate(date.getDate() + parseInt(nroAumentar));
                    $('#txtFechaFinContrato').data("kendoDatePicker").value(date);
                    $('#txtNroClases').val(msg.valor);
                    $('#txtFrezenDisponibles').val(msg.CongelamientoVigente);
                    $('#hdFrezenDisponibles').val(msg.CongelamientoVigente);
                    $('#hdCodigoCosto').val(msg.Costo);
                }
            });
        }




        //PASO 3
        function ListaTipoDocumentoContrato() {
            var TipoDocumento = "";
            $('input[name="orderBoxComprobante[]"]:checked').each(function () {
                TipoDocumento += $(this).val();
            });
            listaSubTipoDocumentoSerie(TipoDocumento);
            calcularTotalNeto();
            if (TipoDocumento == 1) {
                $('#div_nro_contribuyente').css('display', 'block');
                $('#div_nombre_empresa').css('display', 'block');
                $('#div_direccionfiscal_empresa').css('display', 'block');
            }
            else {
                $('#div_nro_contribuyente').css('display', 'none');
                $('#div_nombre_empresa').css('display', 'none');
                $('#div_direccionfiscal_empresa').css('display', 'none');

                $('#txtNroDocumentoContribuyente').val('');
                $('#txtNombreEmpresa').val('');
                $('#txtDireccionFiscalEmpresa').val('');


            }
        }

        function listaSubTipoDocumentoSerie(CodTipoDocumento) {

            var ddlSubTipoDocumento = $("#ddlSubTipoDocumento").kendoDropDownList({
                dataTextField: "Descripcion",
                dataValueField: "Codigo",
                dataSource: {
                    transport: {
                        read: function (options) {
                            $.ajax({
                                data: '{"CodTipoDocumento":"' + CodTipoDocumento + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarSubTipoDocumentosPorTipoDocumento",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                },
                                complete: function () {

                                    ValidarGenerarSerieComprobante();
                                }
                            });
                        }
                    }
                },
                change: function () {
                    ValidarGenerarSerieComprobante();
                }
            }).data("kendoDropDownList");
        }

        function ValidarGenerarSerieComprobante() {

            $.ajax({
                type: "POST",
                url: "/operacionesfit/BuscarConfiguracion",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg.GenerarSerie) {
                        generarSerieComprobante();
                    } else {
                        $("#txtNroDocumento").removeAttr('disabled');
                    }
                }
            });
        }
        function generarSerieComprobante() {

            var Documento = "";
            $('input[name="orderBoxComprobante[]"]:checked').each(function () {
                Documento += $(this).val();
            });
            var TipoDocumento = Documento;
            var SubTipoDocumento = $("#ddlSubTipoDocumento").data('kendoDropDownList').value();

            $.ajax({
                data: '{"tipoDocumento":"' + TipoDocumento + '","subTipoDocumento":"' + SubTipoDocumento + '"}',
                type: "POST",
                url: "/operacionesfit/ObtenerSerieGenarado",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    $('#txtNroDocumento').val(msg);
                    $('#txtNroDocumento').removeAttr("disabled");
                    if (msg.length > 1) {
                        $('#txtNroDocumento').attr("disabled", "disabled");
                    }
                }
            });
        }


        function calcularTotalNeto() {
            var codigoTipoDocumento = "";
            $('input[name="orderBoxComprobante[]"]:checked').each(function () {
                codigoTipoDocumento += $(this).val();
            });
            var SubTotal = 0;
            var igv = 0;
            var total = $('#txtTotalPagado').val();
            if (codigoTipoDocumento == 1) { //factura
                igv = parseFloat(total) * 0.18;
                SubTotal = parseFloat(total) - igv;
                //document.getElementById("tdSubtotal").style.display = '';
                //document.getElementById("tdIGV").style.display = '';

            } else if (codigoTipoDocumento == 2 || codigoTipoDocumento == 3) { //boleta o otros
                total = total;
                SubTotal = 0.00;
                igv = 0.00;
                //document.getElementById("tdSubtotal").style.display = 'none';
                //document.getElementById("tdIGV").style.display = 'none';
            }
            $('#txtSubTotalTop').html(SubTotal.toFixed(2));
            $('#txtIGVTop').html(igv.toFixed(2));
        }

        function LimpiarContratoPagos() {
            $('#lblTotal').val("0.00");
            $('#txtTotalPagado').val("0.00");
            $('#lblTotalDebe').val("0.00");

            $('#hdTotalCuota').val("0.00");
            $('#txtTextoBaucher1').val("");
            $('#txtMontoCuota').val("0.00");
            //$('#gridCuotasContrato').data('kendoGrid').refresh();
            $('#gridCuotasContrato tr:not(:first-child)').slice(1).remove();
            document.getElementById("divCuotasPago").style.display = 'none';

            var todayDate = new Date();
            $("#txtFechaSalida").kendoDatePicker();
            $('#txtFechaSalida').data("kendoDatePicker").value(todayDate);

            $('#txtNroObservacionesFacturacion').val('');
            $('#txtNroDocumentoContribuyente').val('');
            $('#txtNombreEmpresa').val('');
            $('#txtDireccionFiscalEmpresa').val('');
        }

        function LimpiarMenbresiaContrato() {

            $('#gridCuotasContrato tr:not(:first-child)').slice(1).remove();

            //$('#gridCuotasContrato').data("kendoGrid").refresh();
            //$("#gridCuotasContrato").empty();
            //$("#gridCuotasContrato").kendoGrid();
            $('#hdTotalCuota').val('0.00');
            $('#hdAccionContrato').val('N');
            $('#ddlPaqueteContrato').data('kendoDropDownList').value(0);
            $('#hdAccionPaquetes').val('N');
            $('#txtCosto').val('');
            $('#txtNroClases').val('0');
            $('#txtNroClasesActual').val('0');
            $('#txtFrezenDisponibles').val('0');
            $('#txtContrato').val('');
            $('#ddlTipoMembresia').data("kendoDropDownList").enable(false);
            $('#txtMotivo').val('');
            $('#txtMontoDescuento').val(0);
            $('#txtObservacion').val('');
            var todayDate = new Date();
            $('#txtFechaInicioContrato').data("kendoDatePicker").value(todayDate);

            $('#txtFechaFinContrato').data("kendoDatePicker").value(todayDate);

            $('#ddlAsesorVentas').data("kendoDropDownList").enable(true);
            $('#cboGenero').val('');
            $('#chkEstado').attr('checked', true);
            $("#ddlVendedoresContrato").data("kendoDropDownList").enable(true);
            $('#txtFechaFreezing').data("kendoDatePicker").value(todayDate);
            $('#txtFechaFreezingFin').data("kendoDatePicker").value(todayDate);
            document.getElementById("ProgramacionFreezing").style.display = 'none';
            document.getElementById("tdDiasFreezing").style.display = 'none';
            document.getElementById("tdFechaFreezing").style.display = 'none';
            document.getElementById("tdFechaFreezingFin").style.display = 'none';
            document.getElementById("tdDiasFreezing2").style.display = 'none';
            document.getElementById("tdFechaFreezing2").style.display = 'none';
            document.getElementById("tdFechaFreezingFin2").style.display = 'none';
            document.getElementById("tdSubtotal").style.display = 'none';
            document.getElementById("tdIGV").style.display = 'none';
            document.getElementById("btnActualizarContrato").style.display = 'none';
            document.getElementById("btnEliminarContratoSocios").style.display = 'none';
            document.getElementById("btnGuardarContrato").style.display = '';
            var User = $('#hdUsuario').val();
            $('#ddlAsesorVentas').data("kendoDropDownList").value(User);
            $('#ddlVendedoresContrato').data("kendoDropDownList").value(User);

            var todayDate = new Date();
            $("#txtFechaSalida").kendoDatePicker();
            $('#txtFechaSalida').data("kendoDatePicker").value(todayDate);

        }

        function BuscarSociosContrato() {

            $('#hdCodigoPerfil').val(getCookie('_CodigoPerfil_Business'));

            document.getElementById("GuardarTraspaso").style.display = 'none';
            if ($('#txtBuscarPorCodigoClienteContrato').val() == '' && $('#txtBuscarPorNombreClienteContrato').val() == '' && $('#txtBuscarPorApellidoClienteContrato').val() == '' && $('#txtBuscarPorDniClienteContrato').val() == '') {
                $.bootstrapGrowl("Complete el campo a buscar", { type: 'info', width: 'auto' });
                LimpiarNuevoClienteContrato();
                document.getElementById("btnGuardar").style.display = '';
                document.getElementById("btnEliminarClienteContrato").style.display = 'none';
                document.getElementById("btnActualizarClientesContrato").style.display = 'none';
                document.getElementById("GuardarTraspaso").style.display = 'none';
                document.getElementById("divContratos").style.display = '';
                document.getElementById("divTraspaso").style.display = 'none';

                var flag = $('#FlagModulos').val();
                if (flag == 2) {
                    ListarMembresiaTraspaso(0);
                }

            } else if ($('#txtBuscarPorCodigoClienteContrato').val() == 0 && $('#txtBuscarPorNombreClienteContrato').val() == '' && $('#txtBuscarPorApellidoClienteContrato').val() == '' && $('#txtBuscarPorDniClienteContrato').val() == '') {
                $.bootstrapGrowl("El cliente a buscar no existe", { type: 'danger', width: 'auto' });
                LimpiarNuevoClienteContrato();
                document.getElementById("btnGuardar").style.display = '';
                document.getElementById("btnEliminarClienteContrato").style.display = 'none';
                document.getElementById("btnActualizarClientesContrato").style.display = 'none';
                document.getElementById("GuardarTraspaso").style.display = 'none';
                document.getElementById("divContratos").style.display = '';
                document.getElementById("divTraspaso").style.display = 'none';
                var flag = $('#FlagModulos').val();
                if (flag == 2) {
                    ListarMembresiaTraspaso(0);
                }

            } else {

                document.getElementById("GuardarTraspaso").style.display = 'none';
                document.getElementById("divContratos").style.display = '';
                document.getElementById("divTraspaso").style.display = 'none';
                var Codigo = $('#txtBuscarPorCodigoClienteContrato').val() == '' ? 0 : $('#txtBuscarPorCodigoClienteContrato').val();
                var Nombre = $('#txtBuscarPorNombreClienteContrato').val();
                var Apellido = $('#txtBuscarPorApellidoClienteContrato').val();
                var Dni = $('#txtBuscarPorDniClienteContrato').val();
                document.getElementById('loadMe').style.display = 'block';
                $.ajax({
                    data: '{"codigo":"' + Codigo + '","Nombres":"' + Nombre + '","Apellidos":"' + Apellido + '","Dni":"' + Dni + '"}',
                    type: "POST",
                    url: "/operacionesfit/BuscarSociosConFiltro_Contrato",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        if (msg == null) {
                            $.bootstrapGrowl("El cliente a buscar no existe", { type: 'danger', width: 'auto' });
                            LimpiarNuevoClienteContrato();
                            document.getElementById("btnGuardar").style.display = '';
                            document.getElementById("btnEliminarClienteContrato").style.display = 'none';
                            document.getElementById("btnActualizarClientesContrato").style.display = 'none';
                            var flag = $('#FlagModulos').val();

                            if (flag == 2) {
                                ListarMembresiaTraspaso(0);
                            }

                        } else {

                            var CodigoPerfil = getCookie('_CodigoPerfil_Business');

                            if (CodigoPerfil == 5) {

                                $("#txtNombre").attr('disabled', 'disabled');
                                $("#txtApellido").attr('disabled', 'disabled');
                                $("#txtDni").attr('disabled', 'disabled');
                                $("#txtDireccion").attr('disabled', 'disabled');
                                $("#txtDistrito").attr('disabled', 'disabled');

                                $("#txtNombre").css("background-color", "#e6e6e6");
                                $("#txtApellido").css("background-color", "#e6e6e6");
                                $("#txtDni").css("background-color", "#e6e6e6");
                                $("#txtDireccion").css("background-color", "#e6e6e6");
                                $("#txtDistrito").css("background-color", "#e6e6e6");

                            }

                            $('#txtCodigo').val(msg.CodigoSocio);
                            $('#txtNombre').val(msg.Nombres.toUpperCase());
                            $('#txtApellido').val(msg.Apellidos.toUpperCase());
                            $('#txtDni').val(msg.DNI);
                            $('#txtTelefono').val(msg.Telefono);
                            $('#txtCelular').val(msg.Celular);
                            $('#txtCorreo').val(msg.Correo);
                            $('#hdCodigoOrigenMembresia').val(msg.OrigenMembresia);
                            $('#ddlOrigenContrato').data("kendoDropDownList").value(msg.OrigenMembresia);

                            $('#ddlTipoDocumento').data("kendoDropDownList").value(msg.TipoDocumento);
                            if (msg.TipoDocumento == 1) {
                                $("#lblTipoDocumento").html("Dni");
                            } else {
                                $("#lblTipoDocumento").html("Pasaporte");
                            }

                            $('#txtUrlFacebook').val(msg.UrlFacebook);
                            $('#txtDireccion').val(msg.Direccion);
                            $('#txtDistrito').val(msg.Distrito);

                            $('#txtFechaNacimiento').data('kendoDatePicker').value(msg.FechaNacimiento);
                            $('#chkEstado').prop('checked', msg.Estado);
                            $('#txtOcupacion').val(msg.Ocupacion);
                            $('#txtDireccionTrabajo').val(msg.DireccionTrabajo);
                            var url = msg.ImagenUrl == undefined ? "/Content/app/img/img0.jpg" : msg.ImagenUrl;
                            $('#hdURLFoto').val(url);
                            $('#imgFoto').attr('src', url);
                            $('#cboGenero').data("kendoDropDownList").value(msg.Genero);
                            $('#hdUbicaciones').val(msg.Ubicaciones);
                            $('#txtFechaCreacion').val(msg.DescFechaCreacion);

                            $('#cboEstadoCivil').data("kendoDropDownList").value(msg.EstadoCivil);
                            if (msg.EstadoHijos == 1) {
                                $('#chkHijos').prop('checked', true);
                            } else {
                                $('#chkHijos').prop('checked', false);
                            }
                            $('#txtTelefonoTrabajo').val(msg.TelefonoTrabajo);
                            $('#txtPrimeraNotaCliente').val(msg.Nota);

                            if (msg.Ubicaciones != undefined) {
                                if (msg.Ubicaciones != 'undefined') {
                                    if (msg.Ubicaciones != '') {
                                        $("#ddlDepartamento").data("kendoDropDownList").value(msg.Ubicaciones.substring(0, 5) + '0000');
                                        $("#ddlDepartamento").data("kendoDropDownList").trigger("change");

                                        listarProvincia(msg.Ubicaciones.substring(0, 5) + '00', msg.Ubicaciones);
                                    } else {
                                        $("#ddlDepartamento").data("kendoDropDownList").select(0);
                                        $("#ddlProvincia").data("kendoDropDownList").select(0);
                                        $("#ddlDistrito").data("kendoDropDownList").select(0);
                                    }
                                }
                            }
                            $('#txtBuscarPorCodigoClienteContrato').val(msg.CodigoSocio);
                            document.getElementById("btnGuardar").style.display = 'none';
                            document.getElementById("btnEliminarClienteContrato").style.display = '';
                            document.getElementById("btnActualizarClientesContrato").style.display = '';

                            var flag = $('#FlagModulos').val();

                            if (flag == 1) {
                                ListarMembresiaContratos(msg.CodigoSocio);
                                LimpiarContratoPagos();
                            } else if (flag == 2) {
                                ListarMembresiaTraspaso(msg.CodigoSocio);
                            } else if (flag == 5) {

                            } else if (flag == 6) {

                            }

                            if (getCookie('_CodigoPerfil_Business') == 1 || getCookie('_CodigoPerfil_Business') == 13) {
                                //var User = $('#hdUsuario').val();
                                //$("#ddlAsesorVentas").data("kendoDropDownList").value(msg.Vendedor);
                            } else {

                                var ddlAsesorVentas = $("#ddlAsesorVentas").data("kendoDropDownList");
                                var flagVendedorAgenda = 0;
                                for (var g = 0; g < ddlAsesorVentas.dataSource._data.length; g++) {
                                    if (ddlAsesorVentas.dataSource._data[g].NombreCompleto.toUpperCase() == msg.Vendedor.toUpperCase()) {
                                        flagVendedorAgenda = 1;
                                    }
                                }

                                if (flagVendedorAgenda == 0) {
                                    $('#ddlAsesorVentas').data("kendoDropDownList").enable(true);
                                    var User = getCookie('_Usuario_Business');
                                    $('#ddlAsesorVentas').data("kendoDropDownList").value(User);
                                } else {
                                    $('#ddlAsesorVentas').data("kendoDropDownList").enable(false);
                                    $("#ddlAsesorVentas").data("kendoDropDownList").value(msg.Vendedor);
                                }

                            }



                            $.bootstrapGrowl('<Table border="0"><tr><td >' + '<img class="img-circle pull-left" style="width:50px;height:50px;padding-right: 2px;padding-left: 2px;" src=' + url + '/>' + '</td><td><label style="font-size:11px;color:#000;">&nbsp;&nbsp;' + msg.Nombres.toUpperCase() + ', ' + msg.Apellidos.toUpperCase() + '</label></td></tr></table>', { type: 'primary', width: 'auto', delay: 300, align: 'right' });
                            $("#lblNomSalidaTraspaso").html(msg.Nombres.toUpperCase() + ', ' + msg.Apellidos.toUpperCase());
                        }
                    }, complete: function () {
                        document.getElementById('loadMe').style.display = 'none';
                    }
                });
            }
        }

        function ListarMembresiaContratos(codigo) {

            $("#gridContratos").empty();
            $("#gridContratos").kendoGrid({
                dataSource: {
                    type: "json",
                    transport: {
                        read: function (options) {
                            $.ajax({
                                data: '{"codSocio":"' + codigo + '"}',
                                type: "POST",
                                url: "/operacionesfit/uspListarMembresiasContrato",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);

                                    console.log(msg.length)

                                    if (msg == "") {

                                        $('#hdAccionContrato').val('N');
                                        $('#ddlPaqueteContrato').data('kendoDropDownList').value(0);
                                        $('#hdAccionPaquetes').val('N');
                                        $('#txtCosto').val('');
                                        $('#txtNroClases').val('0');
                                        $('#txtNroClasesActual').val('0');
                                        $('#txtFrezenDisponibles').val('0');
                                        $('#txtContrato').val('');
                                        $('#ddlTipoMembresia').data("kendoDropDownList").enable(false);
                                        $('#txtMotivo').val('');
                                        $('#txtMontoDescuento').val(0);
                                        $('#txtObservacion').val('');
                                        var todayDate = new Date();
                                        $('#txtFechaInicioContrato').data("kendoDatePicker").value(todayDate);

                                        $('#txtFechaFinContrato').data("kendoDatePicker").value(todayDate);

                                        $('#cboGenero').val('');
                                        $('#chkEstado').attr('checked', true);
                                        $("#ddlVendedoresContrato").data("kendoDropDownList").enable(true);
                                        $('#txtFechaFreezing').data("kendoDatePicker").value(todayDate);
                                        $('#txtFechaFreezingFin').data("kendoDatePicker").value(todayDate);
                                        document.getElementById("ProgramacionFreezing").style.display = 'none';
                                        document.getElementById("tdDiasFreezing").style.display = 'none';
                                        document.getElementById("tdFechaFreezing").style.display = 'none';
                                        document.getElementById("tdFechaFreezingFin").style.display = 'none';
                                        document.getElementById("tdDiasFreezing2").style.display = 'none';
                                        document.getElementById("tdFechaFreezing2").style.display = 'none';
                                        document.getElementById("tdFechaFreezingFin2").style.display = 'none';
                                        document.getElementById("tdSubtotal").style.display = 'none';
                                        document.getElementById("tdIGV").style.display = 'none';
                                        document.getElementById("btnActualizarContrato").style.display = 'none';
                                        document.getElementById("btnEliminarContratoSocios").style.display = 'none';
                                        document.getElementById("btnGuardarContrato").style.display = '';

                                        $('#ddlVendedoresContrato').data("kendoDropDownList").value(User);

                                        var todayDate = new Date();
                                        $("#txtFechaSalida").kendoDatePicker();
                                        $('#txtFechaSalida').data("kendoDatePicker").value(todayDate);
                                        LimpiarContratoPagos();


                                    }


                                    document.getElementById("DivgridContratos").style.display = '';

                                }
                            });
                        }
                    }
                },
                selectable: "row",
                scrollable: true,
                sortable: true,
                height: 140,
                columns: [
                    {
                        field: "NombrePaquete",
                        title: "<b style='font-size:11px;'>Promoción</b>",
                        width: 13,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "FechaCreacion",
                        title: "<b style='font-size:11px;'>inscripción</b>",
                        template: "#= kendo.toString(kendo.parseDate(FechaCreacion, 'yyyy-MM-dd'), 'dd/MM/yyyy hh:mm') #",
                        width: 25,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    },

                    {
                        field: "DesFechaInicio",
                        title: "<b style='font-size:11px;'>Inicio</b>",
                        width: 20,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    },
                    {
                        field: "DesFechaFin",
                        title: "<b style='font-size:11px;'>Finaliza</b>",
                        width: 20,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "Costo",
                        title: "<b style='font-size:11px;'>Costo</b>",
                        width: 15,
                        attributes: {
                            style: "font-size:12px;color:black;font-weight:bold;"
                        }
                    }, {
                        field: "MontoTotal",
                        title: "<b style='font-size:11px;'>A Cuenta</b>",
                        width: 15,
                        attributes: {
                            style: "font-size:12px;color:black;font-weight:bold;"
                        }
                    }, {
                        field: "Debe",
                        title: "<b style='font-size:11px;'>Debe</b>",
                        width: 13,
                        attributes: {
                            style: "font-size:12px;color:black;font-weight:bold;"
                        }
                    }, {
                        template: "<div data_idserver='18'><button type='button' class='btn btn-light btn-sm' style='font-size:11px;' onclick='VerPagos(#: CodigoMenbresia #)'><i class='fa-solid fa-trash'></i>&nbsp;Anular pago</button></div>",
                        title: "",
                        width: 22
                    }, {
                        template: "<div data_idserver='18'><button type='button' class='btn btn-light btn-sm' style='font-size:11px;' onclick='VerCuotas(#: CodigoMenbresia #)'><i class='fa-solid fa-trash'></i>&nbsp;Anular cuota</button></div>",
                        title: "",
                        width: 22
                    }
                ], dataBound: function (e) {
                    this.element.find('tbody tr:first').addClass('k-state-selected');
                    this.select(this.tbody.find('>tr:first'));
                }
                , change: function (e) {
                    var grid = this;
                    grid.select().each(function () {
                        var dataItem = grid.dataItem($(this));
                        var codMem = dataItem.CodigoMenbresia;
                        document.getElementById("GuardarTraspaso").style.display = 'none';
                        $('#hdTipoFechaFinContrato').val(dataItem.DesFechaFin);
                        EditarMembresiaContratoClientes(codMem);
                        document.getElementById("btnActualizarContrato").style.display = '';
                        document.getElementById("btnEliminarContratoSocios").style.display = '';
                        document.getElementById("btnGuardarContrato").style.display = 'none';

                        $('#hdCodigoCodigoMenbresiaPago').val(dataItem.CodigoMenbresia);
                        $('#hdMontoTotalGrillaContrato').val(dataItem.MontoTotal);

                        if (dataItem.Debe > 0) {

                            $('#lblTotal').val(dataItem.Debe);
                            $('#lblTotalDebe').val("0.00");
                            $('#TotalDebeMembresia_Ticket').html("0.00");
                            $('#hdCodigoDescripcionMenbresiaPago').val(dataItem.Descripcion);
                            $('#hdAsesorComercialPago').val(dataItem.AsesorComercial);
                            $('#hdCodigoTipoIngresoPago').val(dataItem.TipoIngreso);
                            $('#hdTipoProducto').val(dataItem.tipoProducto);
                            $('#hdMontoTal').val(dataItem.MontoTotal);

                            if (dataItem.MontoTotal > 0) {
                                document.getElementById("divCuotasPago").style.display = 'none';
                            } else {
                                document.getElementById("divCuotasPago").style.display = '';
                            }

                        } else {
                            LimpiarContratoPagos();
                        }
                    });
                }
            });
        }


        function ListarMembresiaTraspaso(codigo) {

            $("#gridMenbresiasTraspaso").empty();
            $("#gridMenbresiasTraspaso").kendoGrid({
                dataSource: {
                    type: "json",
                    transport: {
                        read: function (options) {
                            $.ajax({
                                data: '{"codSocio":"' + codigo + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarMembresiasTraspaso",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                }
                            });
                        }
                    }
                },
                selectable: "row",
                scrollable: true,
                sortable: true,
                height: 120,
                columns: [
                    {
                        field: "NombrePaquete",
                        title: "Promoción",
                        width: 130,
                        attributes: {

                            style: "font-size:12px;"
                        }
                    },
                    {
                        field: "FechaCreacion",
                        title: "fecha Insc",
                        template: "#= kendo.toString(kendo.parseDate(FechaCreacion, 'yyyy-MM-dd'), 'dd/MM/yyyy') #",
                        width: 70,
                        attributes: {

                            style: "font-size:12px;"
                        }
                    },
                    {
                        field: "DesFechaInicio",
                        title: "Fecha In",
                        width: 70,
                        attributes: {

                            style: "font-size:12px;"
                        }
                    },
                    {
                        field: "DesFechaFin",
                        title: "Fecha Fín",
                        width: 70,
                        attributes: {

                            style: "font-size:12px;"
                        }
                    }
                ], dataBound: function (e) {
                    var count = 0;
                    $('#gridMenbresiasTraspaso tbody tr').each(function () {
                        count += 1;
                    });
                    if (count > 0) {
                        var grid = $("#gridMenbresiasTraspaso").data("kendoGrid");
                        this.element.find('tbody tr:first').addClass('k-state-selected');
                        this.select(this.tbody.find('>tr:first'));
                        document.getElementById("divTransferenciaOcultarInformacion").style.display = '';
                        document.getElementById("divListadoMensajeTranferenciaContrato").style.display = 'none';
                        document.getElementById("GuardarTraspaso").style.display = '';

                    } else {
                        document.getElementById("divTransferenciaOcultarInformacion").style.display = 'none';
                        document.getElementById("divListadoMensajeTranferenciaContrato").style.display = '';
                        document.getElementById("GuardarTraspaso").style.display = 'none';

                    }
                }, change: function () {
                    var grid = this;
                    grid.select().each(function () {
                        var dataItem = grid.dataItem($(this));
                        var CodigoPaquete = dataItem.CodigoPaquete;
                        $("#hdCodPaqueteTraspaso").val(CodigoPaquete);
                        $("#hdCodigoMembresiaTraspasoOrigen").val(dataItem.CodigoMenbresia);
                        var codMem = dataItem.CodigoMenbresia;
                        TraspasarMembresia(codMem);

                        LimpiarBuscadorClienteTransferir();
                        var NombrePaquete = dataItem.NombrePaquete;
                        $('#nomMenbresia').html(NombrePaquete);
                    });
                }
            });
        }

        function TraspasarMembresia(codigoMembresia) {

            $.ajax({
                data: '{"codigoMenbresia":"' + codigoMembresia + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarMembresia",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var Cliente = $('#txtCodigo').val();
                    var Nombres = $('#txtNombre').val();
                    var Apellidos = $('#txtApellido').val();
                    var todayDate = new Date();
                    $('#txtFechaInicioTraspaso').data("kendoDatePicker").value(todayDate);
                    $('#txtFechaFinTraspaso').data('kendoDatePicker').value(msg.FechaFin);
                    var FechaFin = $('#txtFechaFinTraspaso').val();
                    var fechaHoy = $('#txtFechaInicioTraspaso').val();
                    $('#txtMotivoTraslado').val('Se traspasa la membresía de ' + Nombres.toUpperCase() + ' ' + Apellidos.toUpperCase() + ' con codigo ' + Cliente + ' desde el ' + fechaHoy + ' hasta el ' + FechaFin + '. Por motivos de ');
                    $('#txtNroSesionesTraspaso').val(msg.NroIngreso);
                    $('#txtFrezenDisponiblesTraspaso').val(msg.FrezenDisponibles);
                    $('#txtSesionesAsistidadTraspaso').val(msg.NroIngresoActual);
                    $('#txtCostoTraspaso').val(msg.Costo);
                    $('#chkTraspasoEstado').attr('checked', true);
                    $('#hdAccionTraspaso').val('N');
                    $('#txtContratoTraspaso').val('');
                    $('#txtAsesorExistente').val(msg.AsesorComercial);
                    $('#txtVendedorExistente').val(msg.UsuarioCreacion);
                }
            });
        }

        function LimpiarBuscadorClienteTransferir() {
            $("#txtBuscarCodigoClienteTransferir").val('');
            $("#txtBuscarNombresClienteTransferir").val('');
            $("#txtBuscarApellidosClienteTransferir").val('');
            $("#txtBuscarDniClienteTransferir").val('');
            $("#hdCodigoSocioTraspaso").val('');
            $('#txtDatosClienteTransferir').html('<label style="padding-top: 7px;font-size:11px;color:#fff;">&nbsp;&nbsp;Falta buscar al nuevo dueño de la membresia</label>');
        }

        function listaTipoContratoSerieTraspaso() {

            var ddlTipoContratoSerie = $("#ddlTipoContratoSerieTraspaso").kendoDropDownList({
                dataTextField: "Descripcion",
                dataValueField: "Codigo",
                dataSource: {
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/ListaTipoContratos",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                },
                                complete: function () {
                                    $("#ddlTipoContratoSerieTraspaso").data("kendoDropDownList").select(0);
                                    $('#ddlTipoContratoSerieTraspaso').change();
                                }
                            });
                        }
                    }
                }
            }).data("kendoDropDownList");
        }

        function generarSerieComprobanteMatriculaTraspaso(tipContrato) {
            $.ajax({
                data: '{"tipoContrato":"' + tipContrato + '"}',
                type: "POST",
                url: "/operacionesfit/ObtenerSerieGenaradoTipoContrato",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $('#txtContratoTraspaso').val(msg);
                }
            });
        }

        function validadorTraslado() {
            var validator = true;
            if ($('#txtCodigo').val() == 0) {
                validator = false;
                $.bootstrapGrowl("(Busque el cliente quién traspasará su membresía.)", { type: 'danger', width: 'auto' });
            } else {

            }
            if ($('#hdCodigoSocioTraspaso').val() == '') {
                validator = false;
                $.bootstrapGrowl("(Busque el cliente quién será traspasada la membresía.)", { type: 'danger', width: 'auto' });
            } else {

            }
            return validator;
        }

        function GuardarTraspasoMembresia() {
            document.getElementById('loadMe').style.display = 'block';
            $('button[type="button"]').attr("disabled", true);

            var indTraspaso = "TM";//Traspaso Membresia
            var codigoMembresia = 0;
            var codSocioTraslado = $('#hdCodigoSocioTraspaso').val();
            var codPaquete = $('#hdCodPaqueteTraspaso').val();
            var fechaInicio = kendo.toString($("#txtFechaInicioTraspaso").data('kendoDatePicker').value(), 'MM/dd/yyyy');
            var fechaFin = kendo.toString($("#txtFechaFinTraspaso").data('kendoDatePicker').value(), 'MM/dd/yyyy');
            var Hi = $('#txtHoraInicioMatricula').val();
            var Hf = $('#txtHoraFinMatricula').val();
            var costo = $('#txtCostoTraspaso').val();
            var nroIngreso = $('#txtNroSesionesTraspaso').val();
            var nroIngresoActual = $('#txtSesionesAsistidadTraspaso').val();
            var FrezenDisponibles = $('#txtFrezenDisponiblesTraspaso').val();
            var nroContrato = $('#txtContratoTraspaso').val();
            var matriculadoPor = 1;
            var estado = $('#chkTraspasoEstado').is(':checked') ? 1 : 0;
            var action = $('#hdAccionTraspaso').val();
            var User = $('#ddlVendedoresTraspaso').data("kendoDropDownList").value();  //$('#hdUsuario').val();
            var NroDiasCongelar = 0;
            var fechaFreziing = kendo.toString($("#txtFechaFreezingTraspaso").data('kendoDatePicker').value(), 'MM/dd/yyyy');
            var fechaDesFreziing = kendo.toString($("#txtFechaFreezingFinTraspaso").data('kendoDatePicker').value(), 'MM/dd/yyyy');
            var TipoMembresia = 2;
            var motivoMembresia = $('#txtMotivoTraslado').val();
            var TipoDescuento = 0;
            var MontoDescuento = 0;
            var Observacion = "";
            var TipoContrato = $('#ddlTipoContratoSerieTraspaso').data("kendoDropDownList").value();
            var AsesorComercial = $('#ddlAsesorTraspaso').data("kendoDropDownList").value();//$('#hdAsesorComercialTraspaso').val() == '' ? '0' : $('#hdAsesorComercialTraspaso').val();
            var TipoIngreso = 1;
            var OrigenSociosTraspaso = $('#txtCodigo').val();
            var OrigenMembresiaTraspaso = $('#hdCodigoMembresiaTraspasoOrigen').val() == '' ? '0' : $('#hdCodigoMembresiaTraspasoOrigen').val();

            var CodigoProfesor = 0;
            var CodTiempoMenbresia = 0;

            $.ajax({
                data: '{"codigo":"' + codigoMembresia +
                    '","codigoSocio":"' + codSocioTraslado +
                    '","codigoPaquete":"' + codPaquete +
                    '","fechaInicio":"' + fechaInicio +
                    '","fechaFin":"' + fechaFin +
                    '","Hi":"' + Hi +
                    '","Hf":"' + Hf +
                    '","costo":"' + costo +
                    '","nroIngreso":"' + nroIngreso +
                    '","nroIngresoActual":"' + nroIngresoActual +
                    '","nroContrato":"' + nroContrato +
                    '","MatriculadoPor":"' + matriculadoPor +
                    '","FrezenDisponibles":"' + FrezenDisponibles +
                    '","NroDiasCongelar":"' + NroDiasCongelar +
                    '","fechaFreziing":"' + fechaFreziing +
                    '","fechaDesFreziing":"' + fechaDesFreziing +
                    '","estado":"' + estado +
                    '","action":"' + action +
                    '","User":"' + User +
                    '","TipoMembresia":"' + TipoMembresia +
                    '","OrigenContrato":"' + 1 +
                    '","ObservacionTraspaso":"' + motivoMembresia +
                    '","tipoDescuento":"' + TipoDescuento +
                    '","montoDescuento":"' + MontoDescuento +
                    '","observacion":"' + Observacion +
                    '","AsesorComercial":"' + AsesorComercial +
                    '","TipoIngreso":"' + TipoIngreso +
                    '","indTraspaso":"' + indTraspaso +
                    '","tipoContrato":"' + TipoContrato +
                    '","OrigenSociosTraspaso":"' + OrigenSociosTraspaso +
                    '","OrigenMembresiaTraspaso":"' + OrigenMembresiaTraspaso +
                    '","CodigoProfesor":"' + CodigoProfesor +
                    '","CodTiempoMenbresia":"' + CodTiempoMenbresia +
                    '"}',
                type: "POST",
                url: "/operacionesfit/GuardarMembresiaContrato",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg > 0) {
                        $('#myModalConfirmTraspaso').hide('fast');
                        $('#GuardarTraspaso').removeClass('disabled');
                        $.bootstrapGrowl("Los datos se han guardado correctamente.", { type: 'success', width: 'auto' });
                        ActualizarTraspasoMembresia(OrigenMembresiaTraspaso, codSocioTraslado);
                    } else {
                        $.bootstrapGrowl("Su tiempo se agoto vuelva a ingresar al sistema por favor, su ingreso solo dura 24 horas. Gracias", { type: 'danger', width: 'auto' });
                    }
                }, complete: function () {
                    document.getElementById('loadMe').style.display = 'none';
                    $('button[type="button"]').attr("disabled", false);
                    $('#txtBuscarPorCodigoClienteContrato').val($('#hdCodigoSocioTraspaso').val());
                    document.getElementById("GuardarTraspaso").style.display = 'none';
                    BuscarSociosContrato();
                }
            });

        }

        function ActualizarTraspasoMembresia(codigoMembresia, CodigoSocioReceptor) {

            $.ajax({
                data: '{"codigoMembresia":"' + codigoMembresia + '","CodigoSocioReceptor":"' + CodigoSocioReceptor + '"}',
                type: "POST",
                url: "/operacionesfit/ActualizarTraspasoMembresia",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var codSocio = $('#txtCodigo').val();
                    ListarMembresiaTraspaso(codSocio);
                }
            });
        }

        function listaVendedoresTraspaso() {
            var ddlVendedorTrapaso = $("#ddlVendedoresTraspaso").kendoDropDownList({
                dataTextField: "NombreCompleto",
                dataValueField: "NombreCompleto",
                dataSource: {
                    serverFiltering: false,
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/ListarUsuarioVendedor",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                    //var User = $('#hdUsuario').val();
                                    //$('#ddlVendedoresTraspaso').data("kendoDropDownList").value(User);
                                }
                            });
                        }
                    }
                }, change: function () {

                }
            }).data("kendoDropDownList");
        }

        function listaAsesoresVentasTraspaso() {

            $("#ddlAsesorTraspaso").kendoDropDownList({
                dataTextField: "NombreCompleto",
                dataValueField: "NombreCompleto",
                dataSource: {
                    serverFiltering: false,
                    transport: {
                        read: function (options) {
                            $.ajax({
                                type: "POST",
                                url: "/operacionesfit/ListarAsesorVentas",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                }
                            });
                        }
                    }
                }
            });
        }

        function GuardarMembresiaContrato() {

            var User = $('#ddlVendedoresContrato').data("kendoDropDownList").value();  //$('#hdUsuario').val();

            if (User != "") {
                $('button[type="button"]').attr("disabled", true);

                var indTraspaso = "NM";
                var todayDate = new Date();

                if (kendo.toString($("#txtFechaFreezing").data('kendoDatePicker').value(), 'MM/dd/yyyy') == null) {
                    $('#txtFechaFreezing').data("kendoDatePicker").value(todayDate);
                }
                if (kendo.toString($("#txtFechaFreezingFin").data('kendoDatePicker').value(), 'MM/dd/yyyy') == null) {
                    $('#txtFechaFreezingFin').data("kendoDatePicker").value(todayDate);
                }
                var codigoMembresia = $('#txtCodigoContrato').val() == '' ? '0' : $('#txtCodigoContrato').val();

                var codSocio = $('#txtCodigo').val();
                var codDisciplina = $('#ddlPaqueteContrato').data("kendoDropDownList").value();
                var fechaInicio = kendo.toString($("#txtFechaInicioContrato").data('kendoDatePicker').value(), 'MM/dd/yyyy');
                var fechaFin = kendo.toString($("#txtFechaFinContrato").data('kendoDatePicker').value(), 'MM/dd/yyyy');

                var Hi = $('#txtHoraInicioMatricula').val();
                var Hf = $('#txtHoraFinMatricula').val();

                var costo = $('#txtCosto').val();
                var nroIngreso = $('#txtNroClases').val() == 0 ? 1 : $('#txtNroClases').val();
                var nroIngresoActual = $('#txtNroClasesActual').val();
                var FrezenDisponibles = $('#txtFrezenDisponibles').val() == '' ? 0 : $('#txtFrezenDisponibles').val();
                var nroContrato = $('#txtContrato').val();
                var matriculadoPor = 1;
                var estado = $('#chkEstadoContrato').is(':checked') ? 1 : 0;
                var action = $('#hdAccionContrato').val();

                var AsesorComercial = $('#ddlAsesorVentas').data("kendoDropDownList").value() == 'Seleccionar' ? ' ' : $('#ddlAsesorVentas').data("kendoDropDownList").value();
                var NroDiasCongelar = $('#txtNroDiasCongelar').val() == '' ? 0 : $('#txtNroDiasCongelar').val();
                var fechaFreziing = kendo.toString($("#txtFechaFreezing").data('kendoDatePicker').value(), 'MM/dd/yyyy');
                var fechaDesFreziing = kendo.toString($("#txtFechaFreezingFin").data('kendoDatePicker').value(), 'MM/dd/yyyy');
                var TipoMembresia = $('#ddlTipoMembresia').data("kendoDropDownList").value();
                var OrigenContrato = $('#ddlOrigenContrato').data("kendoDropDownList").value();
                var motivoMembresia = $('#txtMotivo').val();

                var TipoDescuento = $('#ddlTipoDescuento').data("kendoDropDownList").value();
                var MontoDescuento = $('#txtMontoDescuento').val();
                var Observacion = $('#txtObservacion').val();
                var TipoIngreso = $('#ddlTipoIngresoMembresia').data("kendoDropDownList").value();
                var TipoContrato = $('#ddlTipoContratoSerie').data("kendoDropDownList").value();
                var CodigoProfesor = 0;
                var CodTiempoMenbresia = 0;
                document.getElementById('loadMe').style.display = 'block';
                $.ajax({
                    data: '{"codigo":"' + codigoMembresia + '","codigoSocio":"' + codSocio + '","codigoPaquete":"' + codDisciplina + '","fechaInicio":"' + fechaInicio + '","fechaFin":"' + fechaFin + '","Hi":"' + Hi + '","Hf":"' + Hf + '","costo":"' + costo + '","nroIngreso":"' + nroIngreso + '","nroIngresoActual":"' + nroIngresoActual + '","nroContrato":"' + nroContrato + '","MatriculadoPor":"' + matriculadoPor + '","FrezenDisponibles":"' + FrezenDisponibles + '","NroDiasCongelar":"' + NroDiasCongelar + '","fechaFreziing":"' + fechaFreziing + '","fechaDesFreziing":"' + fechaDesFreziing + '","estado":"' + estado + '","action":"' + action + '","User":"' + User + '","TipoMembresia":"' + TipoMembresia + '","OrigenContrato":"' + OrigenContrato + '","ObservacionTraspaso":"' + motivoMembresia + '","tipoDescuento":"' + TipoDescuento + '","montoDescuento":"' + MontoDescuento + '","observacion":"' + Observacion + '","AsesorComercial":"' + AsesorComercial + '","TipoIngreso":"' + TipoIngreso + '","indTraspaso":"' + indTraspaso + '","tipoContrato":"' + TipoContrato + '","OrigenSociosTraspaso":"' + 0 + '","OrigenMembresiaTraspaso":"' + 0 + '","CodigoProfesor":"' + CodigoProfesor + '","CodTiempoMenbresia":"' + CodTiempoMenbresia + '"}',
                    type: "POST",
                    url: "/operacionesfit/GuardarMembresiaContrato",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        if (action == 'N') {
                            if (msg > 0) {
                                //ListarContratoMembresia(msg);
                                //buscarConfiguracionImprimirContrato();
                                ListarMembresiaContratos(codSocio);
                                $.bootstrapGrowl("Los datos se han guardado correctamente.", { type: 'success', width: 'auto' });

                                //ActivarGenerarContratoMembresias ?
                                var enabled = document.getElementById("txtActivarGenerarContratoMembresias").value;
                                var KeyTC = document.getElementById("txtKeyTipoContrato").value;

                                if (enabled) {
                                    if (KeyTC > 1) {
                                        getTipoDeContrato(KeyTC);
                                    }

                                }

                            } else {
                                $.bootstrapGrowl("Su tiempo se agoto vuelva a ingresar al sistema por favor, su ingreso solo dura 24 horas. Gracias", { type: 'danger', width: 'auto' });
                            }
                        } else {

                            ListarMembresiaContratos(codSocio);
                            $.bootstrapGrowl("Los datos se han Actualizados correctamente.", { type: 'success', width: 'auto' });
                            document.getElementById("myModalConfirmActualizarContrato").style.display = 'none';
                        }
                    }, complete: function () {
                        $('button[type="button"]').attr("disabled", false);
                        document.getElementById('loadMe').style.display = 'none';
                    }
                });
            } else {
                //$("#lbl_ddlVendedoresContrato").css("color", "red");
                $.bootstrapGrowl("Debe tener minimo un usuario counter activo.", { type: 'danger', width: 'auto' });
            }

        }

        //getTCByCodigo
        function getTipoDeContrato(codigo) {
            var code = document.getElementById("txtBuscarPorCodigoClienteContrato").value;
            var fullname = document.getElementById("txtNombre").value + ' ' + document.getElementById("txtApellido").value;
            var dni = document.getElementById("txtDni").value;
            var membresia = document.getElementById("txtNombreMemTC").value;
            var ncontrato = document.getElementById("txtContrato").value;

            var finicio = document.getElementById("txtFechaInicioContrato").value;
            var ffin = document.getElementById("txtFechaFinContrato").value;
            var data = {
                codigo: codigo,
                cdclient: code,
                customer: fullname,
                doc: dni,
                membresia: membresia,
                ncontrato: ncontrato,
                finicio: finicio,
                ffin: ffin,
            };

            $.ajax({
                data: JSON.stringify(data),
                type: "POST",
                url: "/operacionesfit/GetTipoContratoPDF",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg)
                    if (msg.Status == 0) {
                        document.getElementById("btnModalClausula").click();
                        document.getElementById("bodymodalcontentClusula").innerHTML = msg?.Message1;
                        document.getElementById("divrenderPDFtc").src = msg?.Message3;
                        document.getElementById("namepdftcm").value = msg?.Message2;

                        var correo = document.getElementById("txtCorreo").value;
                        document.getElementById("txtCorreoClausula").value = correo;
                        document.getElementById("txtCorreoPDFtc").value = correo;
                    }
                }
            });
        }

        function buscarConfiguracionImprimirContrato() {

            $.ajax({
                type: "POST",
                url: "/operacionesfit/buscarConfiguracionImprimirContrato",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.EstadoImprimirContrato == 1) {
                        ImprimeDiv();
                    } else {
                        $.bootstrapGrowl("Imprimir Contrato desactivado.", { type: 'primary', width: 'auto' });
                    }
                }
            });
        }

        function ImprimeDiv() {
            var ancho = screen.width - 10;
            var alto = screen.height - 75;
            var divToPrint = document.getElementById('DivIdToPrint');
            var newWin = window.open('', 'Print-Window', 'directories=no, border=0,scrollbars=yes,status=yes,toolbar=no,titlebar=no, resizable=no, menubar=no,width=' + ancho + ',height=' + alto + ',top=0,left=0');
            newWin.document.open();
            newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML);
            newWin.document.write(document.getElementById('documentoClausulas').value.replace(/\n/gi, '<br>'));
            newWin.document.write('</body></html>');
            newWin.document.close();
            setTimeout(function () { newWin.close(); }, 100000000);
        }

        function ListarContratoMembresia(codigoMembresia) {

            $.ajax({
                data: '{"codigoMenbresia":"' + codigoMembresia + '"}',
                type: "POST",
                url: "/operacionesfit/ListarContratoMembresia",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $('#txtcodigo_Membresia').val(msg.codigo_Membresia);
                    $('#txtfechaInicio_Membresia').val(msg.fechaInicio_Membresia); //Listo
                    $('#txtfechaFin_Membresia').val(msg.fechaFin_Membresia); //Listo
                    $('#txtcosto_Membresia').val(msg.costo_Membresia); //Listo
                    $('#txtnroContrato_Membresia').val(msg.nroContrato_Membresia); //Listo
                    $('#txtcodigo_Socio').val(msg.codigo_Socio);
                    $('#txtnombre_Socio').val(msg.nombre_Socio);  //Listo
                    $('#txtapellido_Socio').val(msg.apellido_Socio); //Listo
                    $('#txtdni_Socio').val(msg.dni_Socio); //Listo
                    $('#txttelefono_Socio').val(msg.telefono_Socio); //Listo
                    $('#txtcelular_Socio').val(msg.celular_Socio); //Listo
                    $('#txtcorreo_Socio').val(msg.correo_Socio); //Listo
                    $('#txtfechaNacimiento_Socio').val(msg.fechaNacimiento_Socio); //Listo
                    $('#txtgenero_Socio').val(msg.genero_Socio); //Listo
                    $('#txtfacebook_Socio').val(msg.facebook_Socio);
                    $('#txtdireccion_Socio').val(msg.direccion_Socio);
                    $('#txtdistrito_Socio').val(msg.distrito_Socio);
                    $('#txtocupacion_Socio').val(msg.ocupacion_Socio); //Listo
                    $('#txttipo_Socio').val(msg.tipo_Socio);
                    $('#txtcodigo_Paquete').val(msg.codigo_Paquete);
                    $('#txtnombre_Paquete').val(msg.nombre_Paquete); //Listo
                    $('#txtvalorDias_Paquete').val(msg.valorDias_Paquete);  //Listo
                    $('#txtdiasFreezing_Paquete').val(msg.diasFreezing_Paquete);
                    var numeroContrato = $('#txtnroContrato_Membresia').val();
                    $('#documentoContrato').html(numeroContrato);
                    var documentoNombreSocio = $('#txtnombre_Socio').val();
                    $('#documentoNombreSocio').html(documentoNombreSocio);
                    var documentoApellidoSocio = $('#txtapellido_Socio').val();
                    $('#documentoApellidoSocio').html(documentoApellidoSocio);
                    var documentoTelefono = $('#txttelefono_Socio').val();
                    $('#documentoTelefono').html(documentoTelefono);
                    var documentoCelular = $('#txtcelular_Socio').val();
                    $('#documentoCelular').html(documentoCelular);
                    var documentoEmail = $('#txtcorreo_Socio').val();
                    $('#documentoEmail').html(documentoEmail);
                    var documentoDNI = $('#txtdni_Socio').val();
                    $('#documentoDNI').html(documentoDNI);
                    var documentoFechaNacimiento = $('#txtfechaNacimiento_Socio').val();
                    $('#documentoFechaNacimiento').html(documentoFechaNacimiento);
                    var documentoSexo = $('#txtgenero_Socio').val();
                    $('#documentoSexo').html(documentoSexo);
                    var documentoReferido = $("#txtreferidoPor_Socio option:selected").text()
                    $('#documentoReferido').html(documentoReferido);
                    var documentoOcupacion = $('#txtocupacion_Socio').val();
                    $('#documentoOcupacion').html(documentoOcupacion);
                    var documentoNumeroDias = $('#txtvalorDias_Paquete').val();
                    $('#documentoNumeroDias').html(documentoNumeroDias);
                    var documentoFechaInicio = $('#txtfechaInicio_Membresia').val();
                    $('#documentoFechaInicio').html(documentoFechaInicio);
                    var documentoFechaFin = $('#txtfechaFin_Membresia').val();
                    $('#documentoFechaFin').html(documentoFechaFin);
                    var documentoNombreMembresia = $('#txtnombre_Paquete').val();
                    $('#documentoNombreMembresia').html(documentoNombreMembresia);
                    var documentoCostoMembresia = $('#txtcosto_Membresia').val();
                    $('#documentoCostoMembresia').html(documentoCostoMembresia);
                    $('#documentoClausulas').val(msg.Clausula);
                    if (msg.observacionTraspaso == "") {
                        var documentoFechaInicio = $('#txtfechaInicio_Membresia').val();
                        $('#documentoFechaInicio').html('Fecha de inicio: ' + documentoFechaInicio);
                        var documentoFechaFin = $('#txtfechaFin_Membresia').val();
                        $('#documentoFechaFin').html('Fecha de expiración: ' + documentoFechaFin);
                    } else {
                        $('#documentoFechaInicio').html('');
                        $('#documentoFechaFin').html('');
                    }
                }
            });
        }

        function EditarMembresiaContratoClientes(CodigoMenbresia) {

            $.ajax({
                data: '{"codigoMenbresia":"' + CodigoMenbresia + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarMembresiaEditar",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg)
                    $('#txtCodigoContrato').val(msg.CodigoMenbresia);
                    $('#txtNroClases').val(msg.NroIngreso);
                    $('#txtNroClasesActual').val(msg.NroIngresoActual);
                    $('#txtFrezenDisponibles').val(msg.FrezenDisponibles);
                    $('#txtCosto').val(msg.Costo);
                    $('#hdCodigoCosto').val(msg.Costo)
                    $('#txtObservacion').val(msg.Observacion);
                    $('#txtMontoDescuento').val(msg.MontoDescuento);
                    $('#chkEstadoContrato').prop('checked', msg.Estado);
                    $("#ddlPaqueteContrato").data('kendoDropDownList').value(msg.CodigoPaquete);

                    $('#ddlTipoIngresoMembresia').data('kendoDropDownList').value(msg.TipoIngreso);
                    $('#ddlVendedoresContrato').data('kendoDropDownList').value(msg.UsuarioCreacion);
                    $('#ddlAsesorVentas').data('kendoDropDownList').value(msg.AsesorComercial);
                    $('#txtFechaInicioContrato').data('kendoDatePicker').value(msg.FechaInicio);
                    $('#txtFechaFinContrato').data('kendoDatePicker').value(msg.FechaFin);
                    $("#ddlTipoContratoSerie").data('kendoDropDownList').value(msg.TipoContrato);
                    $('#txtContrato').val(msg.NroContrato);
                    $('#ddlTipoDescuento').data('kendoDropDownList').value(msg.TipoDescuento);
                    if (msg.TipoDescuento == 2) {
                        document.getElementById("imgDesPorcentaje").style.display = '';
                    } else {
                        document.getElementById("imgDesPorcentaje").style.display = 'none';
                    }
                    document.getElementById("txtMontoDescuento").disabled = true;
                    $('#ddlTipoMembresia').data("kendoDropDownList").enable(false);
                    $('#ddlTipoMembresia').data('kendoDropDownList').value(msg.TipoMembresia);
                    $('#ddlOrigenContrato').data('kendoDropDownList').value(msg.CodigoMebresiaOrigen);





                    $('#hdAccionContrato').val('E');

                    document.getElementById("codigoTipoContratoM").value = msg?.TipoContrato;

                    if (msg?.TipoContrato > 1) {
                        document.getElementById("btnGenerateContrato").style.display = "inline";
                    } else {
                        document.getElementById("btnGenerateContrato").style.display = "none";
                    }


                }
            });
        }

        function VerCuotas(CodigoMenbresia) {
            $('#myModalCuotas').show('fast');
            ListarCuota(CodigoMenbresia);
            $('#hdCodMembresiaCuotas').val(CodigoMenbresia);
        }
        function EliminarCuota(codigo) {
            $('#hdCodigoCuota').val(codigo);
            $('#myModalConfirmEliminarCuota').show('fast');
        }
        function VerPagos(CodigoMenbresia) {
            $('#myModalVerPagos').show('fast');
            $('#hdCodigoMenbresiaVerPago').val(CodigoMenbresia);
            ListarVerPagos(CodigoMenbresia);
        }

        function ListarCuota(codigo) {

            $("#gridCuotas").kendoGrid({
                dataSource: {
                    type: "json",
                    transport: {
                        read: function (options) {
                            $.ajax({
                                data: '{"codigo":"' + codigo + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarCuotas",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                }
                            });
                        }
                    },

                },
                sortable: true,
                height: 250,
                columns: [{
                    field: "Monto",
                    title: "Monto",
                    title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Monto<b>",
                    width: 90,
                    format: '{0:0.00}',
                    attributes: {
                        style: "font-size:12px;"
                    }
                }, {
                    field: "Fecha",
                    title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Fecha<b>",
                    template: "#= kendo.toString(kendo.parseDate(Fecha, 'yyyy-MM-dd'), 'dd/MM/yyyy') #",
                    width: 90,
                    attributes: {
                        style: "font-size:12px;"
                    }
                },
                {
                    field: "UsuarioCreacion",
                    title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Usuario Creador<b>",
                    width: 120,
                    attributes: {
                        style: "font-size:12px;"
                    }
                }
                    , {
                    template: "<div><input type='button' id='txtEliminar_#: CodigoCuota #' class='btn btn-primary btn-sm' title='Eliminar Cuota' value='Eliminar cuota' onclick='EliminarCuota(#: CodigoCuota #)'></div>",
                    title: "",
                    width: 105
                }]
            });
        }

        //membresia y pago
        function ListarVerPagos(codigoMenbresia) {
            $("#gridVerPagos").empty();
            $("#gridVerPagos").kendoGrid({
                dataSource: {
                    type: "json",
                    transport: {
                        read: function (options) {
                            $.ajax({
                                data: '{"codMembresia":"' + codigoMenbresia + '"}',
                                type: "POST",
                                url: "/operacionesfit/ListarHistorialPagos",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    options.success(msg);
                                    $('#txtResponsable_AnularPagoMembresia').html('Responsable: ' + getCookie("_Usuario_Business"));
                                }
                            });
                        }
                    }

                },
                sortable: true,
                height: 350,
                columns: [
                    {
                        field: "DesEstado",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Estado<b>",
                        template: "<b style='font-size:11px;color:#: ColorEstado #;text-transform:uppercase;'>#: DesEstado #</b>",
                        width: 5,
                        attributes: {
                            style: "font-size:11px;text-transform:lowercase;"
                        }
                    }, {
                        field: "FechaPago",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Fecha Pago<b>",
                        template: "#= kendo.toString(kendo.parseDate(FechaPago, 'yyyy-MM-dd'), 'dd/MM/yyyy hh:mm:ss tt') #",
                        width: 10,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "Monto",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Monto<b>",
                        width: 4,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "DesFormaPago",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>F.Pago<b>",
                        width: 6,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "nroTarjeta",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Tarjeta<b>",
                        width: 8,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "NroComprobante",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Documento<b>",
                        width: 9,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        field: "UsuarioCreacion",
                        title: "<b style='font-size:11px;color:#fff;font-weight:bold;'>Responsable<b>",
                        width: 7,
                        attributes: {
                            style: "font-size:11px;"
                        }
                    }, {
                        template: "<button type='button' style='font-size:11px;' class='btn btn-primary btn-sm' onclick='AnularPago(#: CodigoPagoMembresia #)'>Anular pago</button>",
                        title: "",
                        width: 7
                    }

                ]
            });

        }

        function AnularPago(CodigoPagoMembresia) {
            $('#myModalConfirmAnularPago').show("fast");
            document.getElementById("myModalVerPagos").style.display = 'none';
            $('#hdCodigoPago').val(CodigoPagoMembresia);
        }

        function EstaFocus_CodigoSocioContrato() {
            $("#txtBuscarPorCodigoClienteContrato").css("background-color", "yellow");
        }

        function EstaFocus_DNISocioContrato() {
            $("#txtBuscarPorDniClienteContrato").css("background-color", "yellow");
        }

        function SalidaFocus_CodigoSocioContrato() {
            $("#txtBuscarPorCodigoClienteContrato").css("background-color", "White");
        }

        function SalidaFocus_DNISocioContrato() {
            $("#txtBuscarPorDniClienteContrato").css("background-color", "White");
        }

        function validarCamposCadena(e) { // 1
            tecla = (document.all) ? e.keyCode : e.which; // 2
            if (tecla == 8) return true; // 3
            patron = /[A-Za-z.\s\w\ñ\Ñ]/; // 4
            te = String.fromCharCode(tecla); // 5
            return patron.test(te); // 6
        }

        function GuardarSocioContrato() {

            $('button[type="button"]').attr("disabled", true);
            var CodigoDuro = $('#txtBuscarPorCodigoClienteContrato').val() == '' ? 0 : $('#txtBuscarPorCodigoClienteContrato').val();
            var CodigoAutomatico = $('#txtCodigo').val() == '' ? 0 : $('#txtCodigo').val();

            //var Codigo = $('#txtCodigo').val() == '' ? CodigoDuro : $('#txtCodigo').val();
            var Codigo = CodigoAutomatico == 0 ? CodigoDuro : CodigoAutomatico;
            var Nombres = $('#txtNombre').val();
            var Apellido = $('#txtApellido').val();
            var TipoDocumento = $('#ddlTipoDocumento').data('kendoDropDownList').value();
            var Dni = $('#txtDni').val();
            var FechaNacimiento = kendo.toString($("#txtFechaNacimiento").data('kendoDatePicker').value(), 'MM/dd/yyyy');
            var Genero = $('#cboGenero').data('kendoDropDownList');
            var ValorGenero = Genero.text().substr(0, 1);
            var EstadoCivil = $('#cboEstadoCivil').data('kendoDropDownList').value();
            var Correo = $('#txtCorreo').val();
            var Distrito = $('#txtDistrito').val();

            var Estado = $('#chkEstado').is(':checked');
            var Telefono = $('#txtTelefono').val();
            var Celular = $('#txtCelular').val();
            var UrlFacebook = $('#txtUrlFacebook').val();
            var Ocupacion = $('#txtOcupacion').val();
            var DireccionTrabajo = $('#txtDireccionTrabajo').val();
            var TipoCliente = 1;
            var TelefonoTrabajo = $('#txtTelefonoTrabajo').val();
            var Ubicaciones = $('#hdUbicaciones').val();
            var Referido = 0;
            var Direccion = $('#txtDireccion').val();
            var Nota = $('#txtPrimeraNotaCliente').val();
            var chkHijos = $('#chkHijos').is(':checked');

            if (chkHijos == true) {
                Flag = 1;
            } else {
                Flag = 0;
            }
            var Hijos = Flag;

            var TipoClienteSocioAgenda = 1;

            document.getElementById('loadMe').style.display = 'block';
            $.ajax({
                data: '{"Codigo":"' + Codigo + '","Nombres":"' + Nombres + '","Apellido":"' + Apellido + '","TipoDocumento":"' + TipoDocumento + '","Dni":"' + Dni + '","FechaNacimiento":"' + FechaNacimiento + '","Genero":"' + ValorGenero + '","EstadoCivil":"' + EstadoCivil + '","Correo":"' + Correo + '","Distrito":"' + Distrito + '","Estado":"' + Estado + '","Telefono":"' + Telefono + '","Celular":"' + Celular + '","UrlFacebook":"' + UrlFacebook + '","Ocupacion":"' + Ocupacion + '","DireccionTrabajo":"' + DireccionTrabajo + '","TipoCliente":"' + TipoCliente + '","TelefonoTrabajo":"' + TelefonoTrabajo + '","Referido":"' + Referido + '","Ubicaciones":"' + Ubicaciones + '","Hijos":"' + Hijos + '","Direccion":"' + Direccion + '","TipoClienteSocioAgenda":"' + TipoClienteSocioAgenda + '","Nota":"' + Nota + '"}',
                type: "POST",
                url: "/operacionesfit/GuardarSocioContrato",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg == 0) {
                        $.bootstrapGrowl("Es oblogatorio ingresar el nro de documento DNI/CCI/CE.", { type: 'danger', width: 'auto' });
                    } else if (msg >= 1) {
                        $('#txtBuscarPorCodigoClienteContrato').val(msg);
                        BuscarSociosContrato();
                        $.bootstrapGrowl("Los datos se han guardado correctamente, ahora puedes ir al paso 2 para realizar una matricula.", { type: 'success', width: 'auto' });
                    } else if (msg == "error") {
                        $.bootstrapGrowl("Error, no hemos podido guardar la información, intentelo de nuevo.", { type: 'danger', width: 'auto' });
                    } else if (msg == "errorcodigo") {
                        $.bootstrapGrowl("No se pudo guardar al cliente.", { type: 'danger', width: 'auto' });
                    } else {
                        ListarProspectosExistentesDNI(msg);
                    }

                }, complete: function () {
                    $('button[type="button"]').attr("disabled", false);
                    document.getElementById('loadMe').style.display = 'none';
                }
            });
        }

        function ListarProspectosExistentesDNI(datos) {

            document.getElementById('loadMe').style.display = 'block';

            $("#gridProspectosExistentesDNI").empty();
            $("#gridProspectosExistentesDNI").kendoGrid({
                dataSource: {
                    type: "json",
                    transport: {
                        read: function (options) {
                            options.success(datos);
                            document.getElementById('loadMe').style.display = 'none';
                            $('#modaldiv_PropspectosExisteDNI').show('fast');
                        }
                    }
                },
                selectable: "row",
                sortable: true,
                height: 300,
                columns: [{
                    template: '<div style="width:25px;margin-left: -3px;"><label style="background-color:#: ColorOrigen #;width: 21px;border-radius:25px;height: 21px;"></label></div>',
                    title: "",
                    width: 5
                }, {
                    field: "desOrigen",
                    title: "<b style='color:#fff;font-weight:bold'>Origen</b>",
                    width: 7,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    field: "CodigoProspecto",
                    title: "<b style='color:#fff;font-weight:bold'>Codigo</b>",
                    width: 7,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    field: "Nombres",
                    title: "<b style='color:#fff;font-weight:bold'>Nombres</b>",
                    width: 10,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    field: "Apellidos",
                    title: "<b style='color:#fff;font-weight:bold'>Apellidos</b>",
                    width: 10,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    field: "DNI",
                    title: "<b style='color:#fff;font-weight:bold'>DNI/CCI/CE</b>",
                    width: 10,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    template: "<center><a style='display:#:EstadoCelular#' target='_blank' href='https://api.whatsapp.com/send?phone=#:Celular#'> <img src='/Content/app/img/whatsapp.png' style='height:23px;cursor:pointer;margin-left: -4px;' /> </a></center>",
                    title: "<center style='color:#fff;'></center>",
                    width: 5,
                    attributes: {
                        style: "font-size:11px;text-align:center;"
                    }
                }, {
                    field: "Celular",
                    title: "<b style='color:#fff;font-weight:bold'>Celular</b>",
                    width: 10,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    field: "Vendedor",
                    title: "<b style='color:#fff;font-weight:bold'>Vendedor</b>",
                    width: 10,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }, {
                    field: "DescFechaCreacion",
                    title: "<b style='color:#fff;font-weight:bold'>Creada</b>",
                    width: 10,
                    attributes: {
                        style: "font-size:11px;"
                    }
                }],
                dataBound: function (e) {
                    this.element.find('tbody tr:first').addClass('k-state-selected')
                    this.select(this.tbody.find('>tr:first'));
                }, change: function () {
                    var grid = this;
                    grid.select().each(function () {
                        var dataItem = grid.dataItem($(this));
                        //var CodigoCliente = dataItem.CodigoProspecto;
                    });
                }
            });
        }

        function event_btnCerrarmodaldiv_PropspectosExisteDNI() {
            document.getElementById('modaldiv_PropspectosExisteDNI').style.display = 'none';
        }

        function uspValidarNroComprobante(CodigoTipoComprobante, CodigoSubTipoDocumento, NroComprobante) {

            $.ajax({
                data: '{"CodigoTipoComprobante":"' + CodigoTipoComprobante + '","CodigoSubTipoDocumento":"' + CodigoSubTipoDocumento + '","NroComprobante":"' + NroComprobante + '"}',
                type: "POST",
                url: "/operacionesfit/uspValidarNroComprobante",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg.ValidadorSerie == 0) {
                        guardarVenta();
                    } else {
                        $.bootstrapGrowl("EL nro del comprobante de pago ya existe, no se puede realizar la venta.", { type: 'danger', width: 'auto' });
                    }

                }
            });
        }

        function validador() {
            var valida = true;
            var txtNombre = $('#txtNombre').val();
            if (txtNombre == "") {
                valida = false;
                $('#txtNombre').addClass('borderValidar');
            } else {
                $('#txtNombre').removeClass('borderValidar');
            }
            var txtApellido = $('#txtApellido').val();
            if (txtApellido == "") {
                valida = false;
                $('#txtApellido').addClass('borderValidar');
            } else {
                $('#txtApellido').removeClass('borderValidar');
            }
            return valida;
        }

        function TipoPago() {
            var valor = "";
            $('input[name="orderBoxFormaPago[]"]:checked').each(function () {
                valor += $(this).val();
            });
            if (valor == 1) {
                //document.getElementById("divOpcionTarjetas1").style.display = 'none';
                //document.getElementById("divOpcionTarjetas2").style.display = 'none';
            } else if (valor == 2) {
                //document.getElementById("divOpcionTarjetas1").style.display = '';
                //document.getElementById("divOpcionTarjetas2").style.display = 'none';
            } else if (valor == 3) {
                //document.getElementById("divOpcionTarjetas1").style.display = '';
                //document.getElementById("divOpcionTarjetas2").style.display = 'none';
            } else if (valor == 4) {
                //document.getElementById("divOpcionTarjetas1").style.display = 'none';
                //document.getElementById("divOpcionTarjetas2").style.display = '';
            } else if (valor == 5) {
                //document.getElementById("divOpcionTarjetas1").style.display = 'none';
                //document.getElementById("divOpcionTarjetas2").style.display = 'none';
            }
        }

        function guardarVenta() {

            $('button[type="button"]').attr("disabled", true);
            document.getElementById('loadMe').style.display = 'block';
            var index = 0;
            var codigoSalida = 0;
            var codigoCliente = $('#txtCodigo').val() == '' ? 0 : $('#txtCodigo').val();
            var razonSocial_Sr = $('#txtNombre').val() + ' ' + $('#txtApellido').val();
            var nroDNIRUC = $('#txtDni').val();
            var direccion = $('#txtDireccion').val();
            var fechaSalida = kendo.toString($("#txtFechaSalida").data('kendoDatePicker').value(), 'MM/dd/yyyy hh:mm:ss tt');
            var codigoSubTipoDocumento = $('#ddlSubTipoDocumento').data("kendoDropDownList").value();
            var codigoTipoDocumentoSocio = $('#ddlTipoDocumento').data("kendoDropDownList").value();
            var nroDocumento = $('#txtNroDocumento').val();
            var subTotal = $('#txtSubTotalTop').html();
            var igv = $('#txtIGVTop').html();
            var total = $('#txtTotalPagado').val();
            var codigoTipoDocumento = "";
            var nro_ruc_empresa = $('#txtNroDocumentoContribuyente').val();
            var razonsocial_empresa = $('#txtNombreEmpresa').val();
            var direccion_fiscal_empresa = $('#txtDireccionFiscalEmpresa').val();
            var facturacion_observaciones = $('#txtNroObservacionesFacturacion').val().trim();

            $('input[name="orderBoxComprobante[]"]:checked').each(function () {
                codigoTipoDocumento += $(this).val();
            });
            if (codigoTipoDocumento == 1) {
                var subTotal = $('#txtSubTotalTop').html();
                var igv = $('#txtIGVTop').html();
                var total = $('#txtTotalPagado').val();
            } else {
                var subTotal = '0.00';
                var igv = '0.00';
                var total = $('#txtTotalPagado').val();
            }
            var xml = "";
            xml += "<ds>";
            var codigoProducto = $('#hdCodigoCodigoMenbresiaPago').val();
            var tipo = $('#hdTipoProducto').val();
            var CodigoDetalle = 0;
            var CodigoPedido = 0;
            var AsesorComercial = $('#hdAsesorComercialPago').val();
            var TipoIngresoMembre = $('#hdCodigoTipoIngresoPago').val();
            var cantidad = 1;
            var descripcion = $('#hdCodigoDescripcionMenbresiaPago').val();
            var precioUnitario = $('#txtTotalPagado').val();
            var importe = $('#txtTotalPagado').val();
            xml += "<d>";
            xml += "<a>" + codigoProducto + "</a>"; //CodigoProducto
            xml += "<b>" + tipo + "</b>"; //tipo
            xml += "<c>" + cantidad + "</c>"; //Cantidad
            xml += "<e>" + descripcion + "</e>"; //Descripcion
            xml += "<f>" + precioUnitario + "</f>"; //PrecioUnitario
            xml += "<g>" + importe + "</g>"; //Importe
            xml += "<i>" + CodigoDetalle + "</i>"; //Importe
            xml += "<j>" + CodigoPedido + "</j>"; //codigoPedido
            xml += "<k>" + AsesorComercial + "</k>"; //Asesor comercial
            xml += "<n>" + TipoIngresoMembre + "</n>";
            //xml += "<n>" + codigoTipoDocumentoSocio + "</n>"; //
            xml += "</d>";
            xml += "</ds>";
            //FORMA DE PAGO
            var xmlFormaPago = "";
            xmlFormaPago += "<ds>";
            var FP_TipoMoneda = 1;
            var FP_Monto = $('#txtTotalPagado').val();
            var FP_TipoCambio = 0;
            var FP_NroBoucher = $('#txtTextoBaucher1').val();
            var FP_FormaPago = "";
            $('input[name="orderBoxFormaPago[]"]:checked').each(function () {
                FP_FormaPago += $(this).val();
            });
            var FP_SubFormaPago = "";
            if (FP_FormaPago == 1) {
                FP_SubFormaPago = 0;
            } else if (FP_FormaPago == 2) {
                $('input[name="orderBoxOpcion1[]"]:checked').each(function () {
                    FP_SubFormaPago += $(this).val();
                });
            } else if (FP_FormaPago == 3) {
                $('input[name="orderBoxOpcion1[]"]:checked').each(function () {
                    FP_SubFormaPago += $(this).val();
                });
            } else if (FP_FormaPago == 4) {
                $('input[name="orderBoxOpcion2[]"]:checked').each(function () {
                    FP_SubFormaPago += $(this).val();
                });
            } else if (FP_FormaPago == 5) {
                FP_SubFormaPago = 0;
            }

            //formaPago1
            xmlFormaPago += "<d>";
            xmlFormaPago += "<a>" + FP_TipoMoneda + "</a>"; //Tipo moneda
            xmlFormaPago += "<b>" + FP_Monto + "</b>"; //Monto
            xmlFormaPago += "<c>" + FP_TipoCambio + "</c>"; //Tipo cambio
            xmlFormaPago += "<e>" + FP_FormaPago + "</e>"; //Forma de pago
            xmlFormaPago += "<f>" + FP_SubFormaPago + "</f>"; //sub Forma de pago
            xmlFormaPago += "<g>" + FP_NroBoucher + "</g>"; //Nro Boucher
            xmlFormaPago += "</d>";
            xmlFormaPago += "</ds>";
            var xmlCuotas = "";
            xmlCuotas += "<ds>";
            $('#gridCuotasContrato tbody tr').each(function () {
                var Fecha = $(this).find("td").eq(1).find("input").val();
                var Monto = $(this).find("td").eq(2).find("input").val();
                var CodigoMembresia = $('#hdCodigoCodigoMenbresiaPago').val();
                xmlCuotas += "<d>";
                xmlCuotas += "<a>" + Fecha + "</a>";
                xmlCuotas += "<b>" + Monto + "</b>";
                xmlCuotas += "<c>" + CodigoMembresia + "</c>";
                xmlCuotas += "</d>";
            });
            xmlCuotas += "</ds>";

            $.ajax({
                data: '{"codigoSalida":"' + codigoSalida + '","CodigoSocio":"' + codigoCliente + '","CodigoTipoDocumentoSocio":"' + codigoTipoDocumentoSocio + '","RazonSocial_Sr":"' + razonSocial_Sr + '","RUC_DNI":"' + nroDNIRUC + '","Direccion":"' + direccion + '","FechaVenta":"' + fechaSalida +
                    '","CodigoTipoComprobante":"' + codigoTipoDocumento + '","CodigoSubTipoComprobante":"' + codigoSubTipoDocumento + '","NroComprobante":"' + nroDocumento +
                    '","NroTarjeta":"' + FP_NroBoucher + '","TipoMoneda":"' + 0 + '","FormaPago":"' + FP_FormaPago +
                    '","SubTotal":"' + subTotal + '","IGV":"' + igv + '","TotalNeto":"' + total +
                    '","tipoCambio":"' + 0 + '","listaDetalle":"' + xml + '","listaFormaPago":"' + xmlFormaPago +
                    '","TotalDolares":"' + 0 + '","listaCuotas":"' + xmlCuotas + '","RucContribuyente":"' + nro_ruc_empresa + '","RazonContribuyente":"' + razonsocial_empresa + '","DireccionFiscal":"' + direccion_fiscal_empresa + '","Observaciones":"' + facturacion_observaciones + '"}',
                type: "POST",
                url: "/operacionesfit/GuardarSalida",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg.split('|')[1] == 0) {

                        $.bootstrapGrowl("La facturas y boletas electronicas no estan habilitadas.", { type: 'success', width: 'auto' });
                        $.bootstrapGrowl("El pago se ha realizado correctamente.", { type: 'success', width: 'auto' });

                        LimpiarMenbresiaContrato();
                        ListaTipoDocumentoContrato();
                        var CodigoSocio = $('#txtCodigo').val();
                        ListarMembresiaContratos(CodigoSocio);
                        LimpiarContratoPagos();

                        $('#gridCuotasContrato tr:not(:first-child)').slice(1).remove();
                        $('#txtTotalPagado').val("0.00");

                    } else if (msg.split('|')[1] == "1") {
                        var CodigoSocio = $('#txtCodigo').val();

                        $.bootstrapGrowl("La facturas y boletas electronicas no estan habilitadas.", { type: 'success', width: 'auto' });
                        $.bootstrapGrowl("Imprimiendo comprobante.....", { type: 'success', width: 'auto' });
                        console.log(msg);
                        //now
                        //BuscarInformacionGeneralVentaPorCodigo(msg.split('|')[0]);
                        generatepdf(msg.split('|')[0]);
                        generarSerieComprobante();
                        var CodigoSocio = $('#txtCodigo').val();
                        ListarMembresiaContratos(CodigoSocio);

                    } else if (msg.split('|')[1] == "2") {

                        var urlPDFComprobante = msg.split('|')[2];
                        if (urlPDFComprobante != null) {
                            ImprimirPDFJs(urlPDFComprobante);
                        }
                        else {
                            $.bootstrapGrowl("No se emitio sunafact.", { type: 'success', width: 'auto' });
                        }
                    }
                    else if (msg.split('|')[1] == "3") {
                        $.bootstrapGrowl(msg.split('|')[2], { type: 'error', width: 'auto' });
                    }
                    else if (msg.split('|')[1] == "4") {
                        $.bootstrapGrowl(msg.split('|')[2], { type: 'error', width: 'auto' });
                    }
                }, complete: function () {

                    $('#hdTotalCuota').val('0.00');
                    $('button[type="button"]').attr("disabled", false);
                    document.getElementById('loadMe').style.display = 'none';
                    CalcularTotalMontoCuota();
                    if ($('#txtCodigoAbrirCaja').val() != '') {
                        if (parseInt($('#txtCodigoAbrirCaja').val()) > 0) {
                            uspInformacionGeneralAbrirCaja();
                        }
                    }

                    LimpiarContratoPagos();
                }
            });
        }

        function generatepdf(code) {

            $.ajax({
                data: JSON.stringify({ codigo: code }),
                type: "POST",
                url: "/gestionce/generatePDF",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.Status == 0) {
                        document.getElementById("btnModalPdf").click();
                        document.getElementById("divrenderPdf").src = msg?.Message1;
                        document.getElementById("txtCorreoPDF").value = document.getElementById("txtCorreo").value;
                        document.getElementById("namepdftcm").value = msg?.Message2;

                    } else {
                        $.bootstrapGrowl(msg.Message1, { type: 'danger', width: 'auto' });
                    }

                }
            });
        }

        function BuscarInformacionGeneralVentaPorCodigo(codigo) {

            $.ajax({
                data: '{"codigo":"' + codigo + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarInformacionGeneralVentaPorCodigo",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg);
                    var Confi_Tipo_Comprobante = msg.Tipo_Conf_Comprobante;
                    if (Confi_Tipo_Comprobante == 1) {
                        $('#NombreEmpresaVentaTicket').html(msg.NombreEmpresa);
                        $('#DistritoEmpresaVentaTicket').html(msg.DistritoEmpresa);
                        if (msg.RucEmpresa != '') {
                            $('#RucEmpresaVentaTicket').html('RUC: ' + msg.RucEmpresa);
                        } else {
                            document.getElementById("RucEmpresaVentaTicket").style.display = 'none';
                        }
                        if (msg.CelularEmpresa != '') {
                            $('#CelularEmpresaVentaTicket').html('Celular: ' + msg.CelularEmpresa);
                        } else {
                            document.getElementById("CelularEmpresaVentaTicket").style.display = 'none';
                        }
                        if (msg.TelefonoEmpresa != '') {
                            $('#TelefonoEmpresaVentaTicket').html('Telefono: ' + msg.TelefonoEmpresa);
                        } else {
                            document.getElementById("TelefonoEmpresaVentaTicket").style.display = 'none';
                        }

                        $('#lblFraseVentaUno').html(msg.Frase);

                        //if (msg.CorreoEmpresa != '') {
                        //    $('#EmailEmpresaVentaTicket').html('Email: ' + msg.CorreoEmpresa);
                        //} else {
                        //    document.getElementById("EmailEmpresaVentaTicket").style.display = 'none';
                        //}
                        $('#FechaDeLaVentaVentaTicket').html('FECHA: ' + msg.DescFechaVenta);
                        $('#HoraDeLaVentaVentaTicket').html('HORA: ' + msg.DescHoraVenta);

                        $('#NroComprobanteVentaTicket').html(msg.NroComprobante);

                        if (msg.NombreCliente != '') {
                            $('#NombreClienteTicket').html('CLIENTE: ' + msg.NombreCliente + ' (' + $('#txtBuscarPorCodigoClienteContrato').val() + ')');
                        } else {
                            $('#NombreClienteTicket').html('CLIENTE:');
                        }

                        if (msg.DireccionDistritoCliente != '') {
                            $('#DireccionDistritoClienteTicket').html('DIRECCION: ' + msg.DireccionDistritoCliente);
                        } else {
                            $('#DireccionDistritoClienteTicket').html('DIRECCION:');
                        }
                        if (msg.RUC_DNI != '') {
                            $('#RucClienteTicket').html('RUC/DNI/CE: ' + msg.RUC_DNI);
                        } else {
                            $('#RucClienteTicket').html('RUC/DNI/CE:');
                        }

                        $('#UsuarioCreacionTicket').html('Responsable: ' + msg.UsuarioCreacion);

                        $('#SubTotalVentaVentaTicket').html(msg.SubTotal);
                        $('#IgvVentaVentaTicket').html(msg.IGV);
                        $('#TotalVentaVentaTicket').html(msg.TotalNeto);

                        $('#TotalPrecioTotalMembresia_Ticket').html($('#txtCosto').val());

                        //$('#TotalDebeMembresia_Ticket').html(parseFloat($('#lblTotalDebe').val()).toFixed(2));

                        BuscarFormaPagoDeVentaPorCodigo(codigo);
                        var tipoDocumento = "";
                        $('input[name="orderBoxComprobante[]"]:checked').each(function () {
                            tipoDocumento += $(this).val();
                        });
                        if (tipoDocumento == 1) {
                            document.getElementById("ticketSubtotal").style.display = '';
                            document.getElementById("ticketIgv").style.display = '';
                        } else {
                            document.getElementById("ticketSubtotal").style.display = 'none';
                            document.getElementById("ticketIgv").style.display = 'none';
                        }
                    } else if (Confi_Tipo_Comprobante == 2) {
                        $('#tc_Tipo_Comprobante').html(msg.TipoComprobante);
                        $('#tc_Correlativo_Comprobante').html(msg.Correlativo_Comprobante);
                        $('#tc_Dia').html(msg.Dia);
                        $('#tc_Mes').html(msg.Mes);
                        $('#tc_Anio').html(msg.Anio);
                        $('#tc_Cliente').html(msg.NombreCliente);
                        $('#tc_Direccion_Cli').html(msg.DireccionCliente);
                        $('#tc_Ruc_Dni_Cli').html(msg.RUC_DNI);
                        $('#tc_Dia_2').html(msg.Dia);
                        var Mes = msg.Mes;
                        if (Mes == 1) {
                            Mes = 'Ene.';
                        } else if (Mes == 2) {
                            Mes = 'Feb.';
                        } else if (Mes == 3) {
                            Mes = 'Mar.';
                        } else if (Mes == 4) {
                            Mes = 'Abr.';
                        } else if (Mes == 5) {
                            Mes = 'May.';
                        } else if (Mes == 6) {
                            Mes = 'Jun.';
                        } else if (Mes == 7) {
                            Mes = 'Jul.';
                        } else if (Mes == 8) {
                            Mes = 'Agos.';
                        } else if (Mes == 9) {
                            Mes = 'Set.';
                        } else if (Mes == 10) {
                            Mes = 'Oct.';
                        } else if (Mes == 11) {
                            Mes = 'Nov.';
                        } else if (Mes == 12) {
                            Mes = 'Dic.';
                        }
                        var Anios = (msg.Anio).toString();
                        Anios = Anios.substr(3, 1);
                        $('#tc_Mes_2').html(Mes);
                        $('#tc_Anio_2').html(Anios);
                        $('#tc_SubTotal').html((msg.SubTotal).toFixed(2));
                        $('#tc_IGV').html((msg.IGV).toFixed(2));
                        $('#tc_Total').html((msg.TotalNeto).toFixed(2));
                        BuscarInformacionDetalleDeVentaPorCodigo_TC_2(codigo);
                    }
                }
            });
        }

        function BuscarFormaPagoDeVentaPorCodigo(codigo) {
            $('#tfootFormaPago').html('');
            var controlHtml = "";
            $.ajax({
                data: '{"CodigoVenta":"' + codigo + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarFormaPagoDeVentaPorCodigo",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    for (var i = 0; i < msg.length; i++) {
                        try {
                            if (msg[i].Monto > 0) {
                                var formaPago = "";
                                switch (msg[i].FormaPago) {
                                    case 1:
                                        formaPago = "Efectivo";
                                        break;
                                    case 2:
                                        formaPago = "T. Debito";
                                        break;
                                    case 3:
                                        formaPago = "T. Credito";
                                        break;
                                    case 4:
                                        formaPago = "Depostito";
                                        break;
                                    case 5:
                                        formaPago = "Web";
                                        break;
                                    case 6:
                                        formaPago = "Cuponera";
                                        break;
                                }

                                controlHtml += '<tr>' +
                                    '<th style="font-size: 1.5em; text-align: left;"></th>' +
                                    '<th style="font-size: 1.5em; text-align: right;text-transform:uppercase">' + formaPago + '</th>' +
                                    '<th style="font-size: 1.5em; text-align: right;width:60px;">' + msg[i].Monto + '</th>' +
                                    '</tr>';
                            }
                        }
                        catch (err) {
                            alert(err.message);
                        }
                    }
                    $('#tfootFormaPago').append(controlHtml);
                }, complete: function () {
                    BuscarInformacionDetalleDeVentaPorCodigo(codigo);
                }
            });
        }

        function BuscarInformacionDetalleDeVentaPorCodigo(codigo) {

            $('#ProductosDeVenta').html('');
            var controlHtml = "";
            $.ajax({
                data: '{"CodigoVenta":"' + codigo + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarInformacionDetalleDeVentaPorCodigo",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    for (var i = 0; i < msg.length; i++) {
                        try {
                            controlHtml += '<tr style="border-bottom: 1px solid #eeee;">' +
                                '<td style="line-height: normal;font-size: 1.2em;text-align:left;">' + msg[i].Cantidad + '</td>' +
                                '<td style="line-height: normal;font-size: 1.2em;text-align:left;">' + msg[i].DescripcionProducto + '</td>' +
                                '<td style="line-height: normal;font-size: 1.2em;text-align:right;">' + msg[i].ImporteProducto + '</td>' +
                                '</tr>';
                        }
                        catch (err) {
                            alert(err.message);
                        }
                    }
                    $('#ProductosDeVenta').append(controlHtml);
                    ImprimeVentaSocio();
                }
            });
        }

        function ImprimeVentaSocio() {
            var ancho = screen.width - 10;
            var alto = screen.height - 75;
            var divToPrint = document.getElementById('divTicketVenta');
            var newWin = window.open('', 'Print-Window', 'directories=no, border=0,scrollbars=yes,status=yes,toolbar=no,titlebar=no, resizable=no, menubar=no,width=' + ancho + ',height=' + alto + ',top=0,left=0');
            newWin.document.open();
            newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</body></html>');
            newWin.document.close();

            setTimeout(function () { newWin.close(); }, 100);

            LimpiarMenbresiaContrato();
            CalcularTotalMontoCuota();
            ListaTipoDocumentoContrato();
            var CodigoSocio = $('#txtCodigo').val();
            ListarMembresiaContratos(CodigoSocio);
            $('#gridCuotasContrato tr:not(:first-child)').slice(1).remove();

            $('#txtTotalPagado').val("0.00");
            $('#lblRealizarPago').removeClass('disabled');

            var todayDate = new Date();
            $('#txtFechaSalida').data("kendoDatePicker").value(todayDate);

        }


        var codigoArray = new Array();
        codigoArray.push(0);

        function agregarCuotasContrato() {
            var Fecha = kendo.toString($("#txtFechaCuota").data('kendoDatePicker').value(), 'dd/MM/yyyy');
            var Monto = $('#txtMontoCuota').val();

            var indexFila = parseInt(codigoArray.length) + 1;
            codigoArray.push(indexFila);
            var fila = '';

            //tipoProducto  1 = Producto, 2 = Membresia, 3 = Libre, 4 = producto elaborado , 5 = eventos , 6 = suplementos ,7 = nutricion , 8 = personalizado ,9 = ropas
            fila = '<tr id="TRfilaCuotas_' + indexFila + '">' +
                '<td><input style="margin-left: -4px;" title="remover" type="checkbox" id="chkCuotasContrato_' + indexFila + '" onclick="removerProductosCuotas(this)"></td>' +
                '<td><input type="text"  class="form-control form-control-sm"  value="' + Fecha + '" style="width:90px;border-color:transparent;background-color: transparent;font-size:12px;" disabled></td>' +
                '<td><input type="text"   class="form-control form-control-sm" value="' + parseFloat(Monto).toFixed(2) + '" style="width:70px;border-color:transparent;background-color: transparent;font-size:12px;color:red;" disabled></td>' +
                '</tr>';

            if (fila.length > 0) {

                $('#gridCuotasContrato').find('tbody').append(fila);
                CalcularTotalMontoCuota();
                $('#txtMontoCuota').val("");
            }
        }

        function removerProductosCuotas(control) {
            $(control).parent().parent().remove();
            CalcularTotalMontoCuota();
        }

        function CalcularTotalMontoCuota() {
            var total = 0;
            $('#gridCuotasContrato tbody tr').each(function () {
                total += parseFloat($(this).find("td").eq(2).find("input").val());
            });

            $('#hdTotalCuota').val(total);
        }

        function BuscarInformacionDetalleDeVentaPorCodigo_TC_2(codigo) {

            $('#tc_Productos').html('');
            var controlHtml = "";
            $.ajax({
                data: '{"CodigoVenta":"' + codigo + '"}',
                type: "POST",
                url: "/operacionesfit/BuscarInformacionDetalleDeVentaPorCodigo",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    controlHtml += '<table style="width: 100%;" border="0">';
                    for (var i = 0; i < msg.length; i++) {
                        try {
                            controlHtml += '<tr style="height: 30px;">' +
                                '<td align="right" style="width: 8%;font-size:15px;">' + msg[i].Cantidad + '</td>' +
                                '<td style="width: 80%;font-size:9px; padding-left: 15px;">' + msg[i].DescripcionProducto + '</td>' +
                                '<td align="right" style="width: 12%;font-size:15px;">' + (msg[i].ImporteProducto).toFixed(2) + '</td>' +
                                '</tr>';
                        }
                        catch (err) {
                            alert(err.message);
                        }
                    }
                    controlHtml += '</table>';
                    $('#tc_Productos').append(controlHtml);
                    ImprimeVentaSocio_TC_2();
                }
            });
        }

        function ImprimeVentaSocio_TC_2() {
            var ancho = screen.width - 10;
            var alto = screen.height - 75;
            var divToPrint = document.getElementById('divImprimirComprobante_Tipo_2');
            var newWin = window.open('', 'Print-Window', 'directories=no, border=0,scrollbars=yes,status=yes,toolbar=no,titlebar=no, resizable=no, menubar=no,width=' + ancho + ',height=' + alto + ',top=0,left=0');
            newWin.document.open();
            newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</body></html>');
            newWin.document.close();
            setTimeout(function () { newWin.close(); }, 100);
            LimpiarMenbresiaContrato();
            removerProductos();
            $('#lblRealizarPago').removeClass('disabled');
            newWin.document.close();
            setTimeout(function () { newWin.close(); }, 100);
        }

        function removerProductos() {
            $('#txtTextoBaucher1').val('');
            $('#txtTotalPagado').val('0.00');
            calcularTotalNeto();
        }


        function BuscarSociosTransferenciaContrato() {
            if ($('#txtBuscarCodigoClienteTransferir').val() == '' && $('#txtBuscarNombresClienteTransferir').val() == '' && $('#txtBuscarApellidosClienteTransferir').val() == '' && $('#txtBuscarDniClienteTransferir').val() == '') {
                $.bootstrapGrowl("Complete el campo a buscar", { type: 'info', width: 'auto' });
                $('#hdCodigoSocioTraspaso').val('');
                $('#txtDatosClienteTransferir').html('<label style="padding-top: 7px;font-size:11px;color:#fff;">&nbsp;&nbsp;Falta buscar al nuevo dueño de la membresia</label>');
            } else if ($('#txtBuscarCodigoClienteTransferir').val() == 0 && $('#txtBuscarNombresClienteTransferir').val() == '' && $('#txtBuscarApellidosClienteTransferir').val() == '' && $('#txtBuscarDniClienteTransferir').val() == '') {
                $.bootstrapGrowl("El cliente a buscar no existe", { type: 'danger', width: 'auto' });
                $('#hdCodigoSocioTraspaso').val('');
                $('#txtDatosClienteTransferir').html('<label style="padding-top: 7px;font-size:11px;color:#fff;">&nbsp;&nbsp;Falta buscar al nuevo dueño de la membresia</label>');
            } else {
                var Codigo = $('#txtBuscarCodigoClienteTransferir').val() == '' ? 0 : $('#txtBuscarCodigoClienteTransferir').val();
                var Nombre = $('#txtBuscarNombresClienteTransferir').val();
                var Apellido = $('#txtBuscarApellidosClienteTransferir').val();
                var Dni = $('#txtBuscarDniClienteTransferir').val();
                var CodigoSede = 0;
                document.getElementById('loadMe').style.display = 'block';
                $.ajax({
                    data: '{"codigo":"' + Codigo + '","Nombres":"' + Nombre + '","Apellidos":"' + Apellido + '","Dni":"' + Dni + '","CodigoSede":"' + CodigoSede + '"}',
                    type: "POST",
                    url: "/operacionesfit/BuscarSociosConFiltrosTransferenciaContrato",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        if (msg == null) {
                            $.bootstrapGrowl("El cliente a buscar no existe", { type: 'danger', width: 'auto' });
                            $('#hdCodigoSocioTraspaso').val('');
                            $('#txtDatosClienteTransferir').html('<label style="padding-top: 7px;font-size:11px;color:#fff;">&nbsp;&nbsp;Falta buscar al nuevo dueño de la membresia</label>');
                        } else {
                            $('#txtDatosClienteTransferir').html("<table width='100%'><tr><td style='font-size: 11px;'>&nbsp;&nbsp;" + msg.Nombres.toUpperCase() + ', ' + msg.Apellidos.toUpperCase() + "</td><td style='font-size: 11px;'><h style='color:#ed1b24;'>Su codigo es :</h> " + msg.CodigoSocio + "</td><td style='font-size: 11px;'><h style='color:#ed1b24;'>Su Dni es :</h> " + msg.DNI + "</td><td style='font-size: 11px;'><h style='color:#ed1b24;'>Estado :</h> " + msg.NomEstadoCliente + "</td></tr></table>")
                            $('#hdCodigoSocioTraspaso').val(msg.CodigoSocio);
                            $('#txtBuscarCodigoClienteTransferir').val(msg.CodigoSocio);
                            $("#lblNomDestinoTraspaso").html(msg.Nombres.toUpperCase() + ', ' + msg.Apellidos.toUpperCase());

                        }
                    }, complete: function () {
                        document.getElementById('loadMe').style.display = 'none';
                    }
                });
            }
        }

        function getValidadorDNI() {
            var dni = $('#txtDni').val();
            document.getElementById('loadMe').style.display = 'block';
            $.ajax({
                data: '{"dni":"' + dni + '"}',
                type: "POST",
                url: "/operacionesfit/ValidarDNI",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg > 0) {
                        $.bootstrapGrowl("El numero de documento ya existe.", { type: 'danger', width: 'auto' });
                    }
                    else if (msg == 0 || $('#txtDni').val() == '') {
                        GuardarSocioContrato();
                        return true;
                    }
                }, complete: function () {
                    document.getElementById('loadMe').style.display = 'none';
                }
            });
        }

        function validarNumeros(e) { // 1
            tecla = (document.all) ? e.keyCode : e.which; // 2
            if (tecla == 8) return true; // backspace
            if (e.ctrlKey && tecla == 86) { return true }; //Ctrl v
            if (e.ctrlKey && tecla == 67) { return true }; //Ctrl c
            if (e.ctrlKey && tecla == 88) { return true }; //Ctrl x
            if (tecla >= 35 && tecla <= 40) { return true; } //direcionales ini-fin
            if (tecla == 46) { return true; } //Supr
            if (tecla >= 96 && tecla <= 106) { return true; } //numpad
            if (tecla == 9) { return true; } //tab

            patron = /[0-9]/; // patron

            te = String.fromCharCode(tecla);
            return patron.test(te); // prueba
        }

        function event_cerrarModalError() {

            document.getElementById('modalErrorContrato').style.display = 'none';

        }

        function SEGListarPerfilMenu() {

            var entidad = {};

            document.getElementById('loadMe').style.display = 'block';

            var metodoCorrecto = function (msg) {

                document.getElementById('loadMe').style.display = 'none';

                for (var i = 0; i < msg.length; i++) {

                    if (msg[i].Estado) {

                        $('[data-controlmodulo="' + msg[i].CodigoMenu + '"]').show('fast');

                        if (msg[i].CodigoMenu == '6512d6a7-500c-40f5-8fab-40ef5f533f20') {
                            $('#txtFechaFinContrato').data("kendoDatePicker").enable(false);
                        }
                        if (msg[i].CodigoMenu == '3c8b6f24-24b2-4e55-9e67-36da8566f656') {
                            $('#txtCosto').attr("disabled", true);
                        }
                        if (msg[i].CodigoMenu == '02e1e430-736c-4396-8c26-c1f8e4c2b25b') {
                            $('#txtFechaSalida').data("kendoDatePicker").enable(false);
                        }
                        if (msg[i].CodigoMenu == '3c8b6f24-24b2-4e55-9e67-36da8566f656') {
                            $('#txtCosto').attr("disabled", true);
                        }


                        if (msg[i].CodigoMenu == 'fb78492d-dd67-463c-9b68-89fb78d32978') {
                            $('#btnEliminarClienteContrato').attr("disabled", false);
                        }
                        if (msg[i].CodigoMenu == 'b59ce50d-1750-4afd-bb99-82f4b52141fd') {
                            $('#btnActualizarClientesContrato').attr("disabled", false);
                        }
                        if (msg[i].CodigoMenu == 'b2af03cc-2778-48eb-9647-16dadf51c33e') {
                            $('#btnGuardar').attr("disabled", false);
                        }

                        if (msg[i].CodigoMenu == 'fdbfc585-2dd6-4a33-a1da-f12aea4e2f8f') {
                            $('#btnNuevoContrato').attr("disabled", false);
                            $('#btnGuardarContrato').attr("disabled", false);
                        }
                        if (msg[i].CodigoMenu == '734a1c73-49da-4897-b263-821a9345d04b') {
                            $('#btnActualizarContrato').attr("disabled", false);
                        }
                        if (msg[i].CodigoMenu == '9f2e1a1d-f07f-4076-8dd7-1a2b50a824bd') {
                            $('#btnEliminarContratoSocios').attr("disabled", false);
                        }
                        if (msg[i].CodigoMenu == 'ad3e8139-a055-4c4a-9d07-da6fec5a9a7a') {
                            $('#GuardarTraspaso').attr("disabled", false);
                            $('#btnNuevoTraspaso').attr("disabled", false);
                        }
                    }
                }

                //buscarConfiguracion();
            };
            var metodoError = function (msg) {
                alert(msg);
            };
            var request = {
                //request: entidad
            };
            LlamarAJAX("/operacionesfit/SEGListarPerfilMenu_Control", request, metodoCorrecto, metodoError);

        }



        //buscar configurarion
        buscarConfiguracion();
        function buscarConfiguracion() {

            document.getElementById('loadMe').style.display = 'block';

            $.ajax({
                type: "POST",
                url: "/operacionesfit/BuscarConfiguracion",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    document.getElementById("txtActivarGenerarContratoMembresias").value = msg?.ActivarGenerarContratoMembresias;

                    $('#hdCodigoPais').val(msg.Pais);
                    if (msg.ConsultasNumeroDocumento_Estado) {

                        //$('.ConsultasNumeroDocumento_Activo').show('fast');
                        //$('#txtConsultasNumeroDocumento_UsuarioCreacion').val(msg.ConsultasNumeroDocumento_UsuarioCreacion);
                        //$('#txtConsultasNumeroDocumento_FechaPago').val(msg.ConsultasNumeroDocumento_FechaPago_Texto);
                        //$('#txtConsultasNumeroDocumento_FechaCreacion').val(msg.ConsultasNumeroDocumento_FechaCreacion_Texto);
                        //onkeydown = "return validarNumeros(event)"

                        $('#txtDni').keydown(function (event) {

                            $('#txtDni').css("border", "1px #00d27a solid");
                            $('#txtDni').css("background-color", "rgb(0 210 122 / 30 %)");
                            if (event.which == 13) {
                                if ($(this).val().length == 8) {
                                    $('#txtDni').css("background-color", "#fff");
                                    uspConsultarDNIporRENIEC($(this).val());
                                } else {
                                    alert("EL NÚMERO DE DOCUMENTO TENER 8 DIGITOS");
                                }

                                event.preventDefault();
                            }

                        });
                        $('#txtDni').keypress(function (event) {

                            $('#txtDni').css("border", "1px #00d27a solid");
                            $('#txtDni').css("background-color", "rgb(0 210 122 / 30 %)");

                        });
                        $('#txtDni').keyup(function (event) {

                            $('#txtDni').css("border", "1px #ced4da solid");
                        });
                    }

                    document.getElementById('loadMe').style.display = 'none';

                    $('#hdTieneFacturacionElectronica').prop('checked', msg.TieneFacturacionElectronica);

                }, complete: function () {

                    LimpiarNuevoClienteContrato();

                }
            });

        }

        function uspConsultarDNIporRENIEC(Number) {

            document.getElementById('loadMe').style.display = 'block';

            $.ajax({
                data: '{"Number":"' + Number + '"}',
                type: "POST",
                url: "/operacionesfit/ConsultarDNIporRENIEC",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg == undefined || msg == null) {
                        alert("LA API DE CONSULTAS DNI DE TERCEROS ESTA TENIENDO PROBLEMAS");
                    } else if (msg == "Not Found") {
                        alert("NO SE ENCONTRO ESTE NRO DE DOCUMENTO EN LA BASE DE DATOS DE LA API DEL TERCERO.");
                        $('#txtDni').css("border", "1px #ced4da solid");
                        $('#txtNombre').val('');
                        $('#txtApellido').val('');
                    }
                    else {
                        var datos = JSON.parse(msg);
                        $('#txtDni').css("border", "1px #00d27a solid");
                        $('#txtNombre').val(datos.nombres);
                        $('#txtApellido').val(datos.apellidoPaterno + ' ' + datos.apellidoMaterno);
                    }

                    //alert(msg.Content);
                    //alert(msg.StatusCode);
                    //msg.Content

                    //msg.apellidoPaterno
                    //msg.apellidoMaterno

                }, complete: function () {

                    document.getElementById('loadMe').style.display = 'none';
                    $('#txtDni').css("border", "1px #ced4da solid");
                }
            });

        }

        function uspValidarUsuario_AnularPagoMembresia() {

            var Vendedor = getCookie("_Usuario_Business");
            var Clave = $('#txtValidarClave_AnularPagoMembresia').val().trim();

            $.ajax({
                data: '{"VendedorGrillaRenovReins":"' + Vendedor + '","Clave":"' + Clave + '"}',
                type: "POST",
                url: "/operacionesfit/uspValidarUsuarioIngresado",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.ValidacionUsuario > 0) {
                        event_AnularPagoMembresia();
                    } else {
                        alert("la clave del responsable no es correcta.");
                    }
                }
            });

        }

        function event_AnularPagoMembresia() {

            $('button[type="button"]').attr("disabled", true);

            var CodigoPagoMembresia = $('#hdCodigoPago').val();
            var Comentario = $('#txtMotivo_AnularPagoMembresia').val();

            $.ajax({
                data: '{"CodigoPagoMembresia":"' + CodigoPagoMembresia + '","Comentario":"' + Comentario + '"}',
                type: "POST",
                url: "/operacionesfit/AnularPago",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg > 0) {

                        document.getElementById("myModalConfirmAnularPago").style.display = 'none';
                        $.bootstrapGrowl("el pago se elimino correctamente", { type: 'success', width: 'auto' });

                        $('#txtMotivo_AnularPagoMembresia').val('');
                        $('#txtValidarClave_AnularPagoMembresia').val('');

                        var CodigoSocio = $('#txtCodigo').val();
                        ListarMembresiaContratos(CodigoSocio);

                    } else {
                        $.bootstrapGrowl("Error, no se pudo guardar correctamente.", { type: 'danger', width: 'auto' });
                    }
                }, complete: function () {
                    $('button[type="button"]').attr("disabled", false);
                }
            });

        }

        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i].trim();
                if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
            }
            return "";
        }

        function ImprimirPDFJs(url) {
            //window.open(url, "_blank");

            printJS({
                printable: url,
                type: 'pdf',
                showModal: true,
                base64: true,
            });
        }
        //





        //replazeeee clausula
        function reemplaceHTMLTC(doriginal, data) {
            let final = null;
            data.forEach((item, index) => {
                if (item.value) {
                    var resp = includesTC(doriginal, item?.code, item?.value)
                    createElementD(resp)
                    final = resp;
                }
            });
            return final;

        }

        function includesTC(doriginal, code, value) {
            var existed = doriginal.innerHTML.includes(code)
            if (existed) {
                console.log(code)
                console.log(value)
                var content = doriginal.outerHTML;
                var contentReplace = content.replaceAll(code, value)
                return contentReplace;
            }
            return doriginal.outerHTML;

        }

        function createElementD(data) {
            //const newDiv = document.createElement("div");
            //const newContent = document.createTextNode(data);
            //newDiv.appendChild(newContent);
            //return newDiv;
            document.getElementById("bodymodalcontentClusula").innerHTML = data;

        }

        function sendEmail(e) {
            e.disabled = true;
            var to = document.getElementById("txtCorreoClausula").value;
            var clausula = document.getElementById("bodymodalcontentClusula").innerHTML;
            var data = {
                clausula: clausula,
                to: to
            }

            $.ajax({
                data: JSON.stringify(data),
                type: "POST",
                url: "/gestionce/sendEmailTC",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg)
                    if (msg?.Status == 0) {
                        $.bootstrapGrowl(msg?.Message1, { type: 'success', width: 'auto' });
                    } else {
                        $.bootstrapGrowl(msg?.Message1, { type: 'danger', width: 'auto' });
                    }
                    e.disabled = false;

                }
            });
        }
        function sendEmailPDF(e) {
            e.disabled = true;
            var to = document.getElementById("txtCorreoPDF").value;
            var namepdf = document.getElementById("namepdftcm").value;
            var data = {
                name: namepdf,
                to: to
            }

            $.ajax({
                data: JSON.stringify(data),
                type: "POST",
                url: "/gestionce/sendEmailVentaPdf",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg)
                    if (msg?.Status == 0) {
                        $.bootstrapGrowl(msg?.Message1, { type: 'success', width: 'auto' });
                    } else {
                        $.bootstrapGrowl(msg?.Message1, { type: 'danger', width: 'auto' });
                    }
                    e.disabled = false;

                }
            });
        }

        function sendEmailPDFtc(e) {
            e.disabled = true;
            var to = document.getElementById("txtCorreoPDFtc").value;
            var namepdf = document.getElementById("namepdftcm").value;
            var data = {
                name: namepdf,
                to: to,
                asunto: "Contrato"
            }

            $.ajax({
                data: JSON.stringify(data),
                type: "POST",
                url: "/gestionce/sendEmailVentaPdf",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    console.log(msg)
                    if (msg?.Status == 0) {
                        $.bootstrapGrowl(msg?.Message1, { type: 'success', width: 'auto' });
                    } else {
                        $.bootstrapGrowl(msg?.Message1, { type: 'danger', width: 'auto' });
                    }
                    e.disabled = false;

                }
            });
        }



        function generateTCHearder() {
            var codigo = document.getElementById("codigoTipoContratoM").value;
            if (codigo != null && codigo != "" && codigo != 0) {
                var code = document.getElementById("txtBuscarPorCodigoClienteContrato").value;
                var fullname = document.getElementById("txtNombre").value + ' ' + document.getElementById("txtApellido").value;
                var dni = document.getElementById("txtDni").value;
                var membresia = $("#ddlPaqueteContrato").data("kendoDropDownList").text();
                var ss = $("#ddlPaqueteContrato").data("kendoDropDownList").dataItem();
                var nrcontrato = document.getElementById("txtContrato").value;
                var finicio = document.getElementById("txtFechaInicioContrato").value;
                var ffin = document.getElementById("txtFechaFinContrato").value;
                var data = {
                    codigo: codigo,
                    cdclient: code,
                    customer: fullname,
                    doc: dni,
                    membresia: membresia,
                    ncontrato: nrcontrato,
                    finicio: finicio,
                    ffin: ffin,
                };

                $.ajax({
                    data: JSON.stringify(data),
                    type: "POST",
                    url: "/operacionesfit/GetTipoContratoPDF",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        if (msg.Status == 0) {
                            document.getElementById("divrendergeneratetcPdf").src = msg?.Message3;
                            document.getElementById("namepdftcm").value = msg?.Message2;

                            var correo = document.getElementById("txtCorreo").value;
                            document.getElementById("txtCorreoPDFGenerate").value = correo;

                        }
                    }
                });
            }

        }

        function sendEmailPDFGenerate(e) {
            e.disabled = true;
            var to = document.getElementById("txtCorreoPDFGenerate").value;
            var namepdf = document.getElementById("namepdftcm").value;
            var data = {
                name: namepdf,
                to: to,
                asunto: "Contrato"
            }

            $.ajax({
                data: JSON.stringify(data),
                type: "POST",
                url: "/gestionce/sendEmailVentaPdf",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {

                    if (msg?.Status == 0) {
                        $.bootstrapGrowl(msg?.Message1, { type: 'success', width: 'auto' });
                    } else {
                        $.bootstrapGrowl(msg?.Message1, { type: 'danger', width: 'auto' });
                    }
                    e.disabled = false;

                }
            });
        }

        function removePdf() {
            var name = document.getElementById("namepdftcm").value;
            console.log(name)
            if (name.trim().length > 0 && name != "") {
                $.ajax({
                    data: JSON.stringify({ name: name }),
                    type: "POST",
                    url: "/gestionce/removePDF",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {


                    }
                });
            }
        }


    </script>
}